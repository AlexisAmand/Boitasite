<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>SELFHTML: Divers compl&eacute;ments techniques / .htaccess - contr&ocirc;ler les r&eacute;actions du serveur</title>
<link rel="stylesheet" type="text/css" href="../src/selfhtml.css">
<meta name="description"    content="Quelles possibilit&eacute;s sont offertes par l'utilisation du fichier .htaccess - par exemple protection par mot de passe, listes de r&eacute;pertoires individuelles ou contenus en alternative, transmission de donn&eacute;es comprim&eacute;es gzip">
<meta name="keywords"       content="SELFHTML, .htaccess, option de r&eacute;pertoire, protection par mot de passe, contenus en alternative, directory browsing, listes de r&eacute;pertoires, gzip">
<meta name="author"         content="Stefan M&uuml;nz, selfhtml@teamone.de">
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<meta name="DC.Publisher"   content="Serge Fran&ccedil;ois, selfhtml@selfhtml.com.fr">
<meta name="DC.Date"        content="2003-01-27T08:00+00:00">
<meta name="DC.Identifier"  content="http://selfhtml.selfhtml.com.fr/divers/htaccess.htm">
<meta name="DC.Language"    content="fr">
<meta name="DC.Rights"      content="../editorial/copyright.htm">
<meta name="DC.Date.Create" content="2003-01-27T08:00+00:00">
<meta name="SELF.Version"   content="1">
<meta name="SELF.Pagetype"  content="Information">
<meta name="SELF.Path"      content="SELFHTML == ../index.htm // Divers compl&eacute;ments techniques == index.htm">
<!-- Matomo -->
<script type="text/javascript">
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//matomo.boitasite.com/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#AA5522" vlink="#772200" alink="#000000">

<table cellpadding="4" cellspacing="0" border="0" width="100%">
<tr>
<td bgcolor="#FFEEDD" class="nav"><a class="an" name="top"><img src="../src/refchap.gif" width="16" height="13" border="0" alt="Renvoie au chapitre d'origine"></a> <a href="../index.htm"><b>SELFHTML</b></a>/<a href="../navigation/index.htm" target="_parent">Aides &agrave; la navigation</a> <img src="../src/refchap.gif" width="16" height="13" border="0" alt="Renvoie au chapitre d'origine"> <a href="index.htm"><b>Divers compl&eacute;ments techniques</b></a> </td>
</tr>
</table><table cellpadding="4" cellspacing="0" border="0" width="100%">
<tr>
<td bgcolor="#EEEEEE" class="doc" width="110"><img src="../src/logo.gif" width="106" height="109" border="0" alt="SELFHTML"></td>
<td bgcolor="#EEEEEE" class="doc" valign="bottom" width="100%"><h2>.htaccess - contr&ocirc;ler les r&eacute;actions du serveur</h2></td>
</tr>
<tr>
<td bgcolor="#EEEEEE" class="doc" valign="top" align="center">
<img src="../src/docx.gif" width="30" height="20" vspace="6" border="0" alt="Page d'information: vue d'ensemble">
</td>
<td bgcolor="#FFFFFF" valign="top" nowrap>
<p>
<img src="../src/bas.gif" width="14" height="10" border="0" alt="vers le bas">&nbsp;<a href="#generalites"><b>G&eacute;n&eacute;ralit&eacute;s sur les fichiers .htaccess</b></a><br>
<img src="../src/bas.gif" width="14" height="10" border="0" alt="vers le bas">&nbsp;<a href="#protection_repertoire"><b>Prot&eacute;ger des r&eacute;pertoires et des fichiers avec mot de passe</b></a><br>
<img src="../src/bas.gif" width="14" height="10" border="0" alt="vers le bas">&nbsp;<a href="#ip_domaine_nom"><b>Autoriser ou exclure des IPs, des domaines IP ou des adresses nominatives</b></a><br>
<img src="../src/bas.gif" width="14" height="10" border="0" alt="vers le bas">&nbsp;<a href="#options"><b>R&eacute;gler les options du r&eacute;pertoire</b></a><br>
<img src="../src/bas.gif" width="14" height="10" border="0" alt="vers le bas">&nbsp;<a href="#navigation"><b>R&eacute;gler la navigation dans les r&eacute;pertoires</b></a><br>
<img src="../src/bas.gif" width="14" height="10" border="0" alt="vers le bas">&nbsp;<a href="#contenus_alternative"><b>Envoyer des contenus en alternative</b></a><br>
</p>
</td>
</tr><tr><td colspan="2" bgcolor="#EEEEEE" class="doc">&#160;<a href="#bottom"><img src="../src/bas.gif" width="14" height="10" border="0" alt="vers le bas"></a>&#160;</td></tr>
</table>





<h2 class="Sh2"><a class="an" name="generalites">G&eacute;n&eacute;ralit&eacute;s sur les fichiers .htaccess</a></h2>

<p>Les fichiers <var>.htaccess</var> sont des fichiers de configuration pour les r&eacute;pertoires qui font partie de l'offre Web. Ainsi la technique <var>.htaccess</var> est-elle le moyen courant pour ne permettre l'acc&egrave;s &agrave; certaines donn&eacute;es qu'&agrave; certains utilisateurs. <var>.htaccess</var> est donc la r&eacute;ponse &agrave; la question toujours pos&eacute;e et repos&eacute;e concernant une protection par mot de passe &quot;efficace&quot;. Cependant, il est possible avec les fichiers <var>.htaccess</var> de faire bien plus encore que de prot&eacute;ger les donn&eacute;es avec des mots de passe. Ainsi vous pouvez aussi exclure automatiquement (sans acc&egrave;s par mot de passe des groupes d'utilisateurs complets ou les exclure tous &agrave; l'exception de certains. Vous pouvez r&eacute;gler les options pour la navigation dans les r&eacute;pertoires (le navigateur Web appelle un r&eacute;pertoire dans lequel ne se trouve aucun fichier par d&eacute;faut comme par exemple <var>index.htm</var>). Vous pouvez cr&eacute;er des re-directions automatiques ou des r&egrave;gles propres pour les messages d'erreur HTTP. Vous pouvez m&ecirc;me sous certaines conditions, servir des contenus en alternative, par exemple des pages Web avec diff&eacute;rentes langues en fonction de la langue du navigateur Web utilis&eacute; - et cela sans CGI, sans  JavaScript. Et enfin, vous pouvez m&ecirc;me r&eacute;gler de telle fa&ccedil;on que les donn&eacute;es soient transmises comprim&eacute;es au navigateur appelant.</p>

<p>Les serveurs Web qui sont compatibles avec le serveur NCSA, connaissent le concept des fichiers <var>.htaccess</var>. Aujourd'hui, cela concerne avant tout les serveurs Web <b>Apache</b> qui deviennent pr&eacute;pond&eacute;rants et le quasi standard sur le Web. Quand sur votre serveur Web c'est un serveur Web Apache qui tourne, alors vous pouvez mettre en &#339;uvre la technique des fichiers <var>.htaccess</var>. Au cas o&ugrave; vous ignorez quel logiciel de serveur Web est install&eacute; sur l'ordinateur o&ugrave; votre projet Web est h&eacute;berg&eacute;, alors vous pouvez utiliser dans l'offre en ligne de  SELFHTML actuel le <img src="../src/de.gif" width="14" height="10" border="0" alt="page en langue allemande"><img src="../src/serverdoc.gif" width="15" height="10" border="0" alt="Page d'information: connexion exig&eacute;e">&nbsp;<a href="http://selfaktuell.teamone.de/sonst/serverid.htm"><b>d&eacute;tecteur de serveur SELFHTML</b></a>, pour le savoir. Demandez autrement en cas de doute &agrave; votre fournisseur d'acc&egrave;s ou &agrave; votre Webmestre!</p>

<p>Les fichiers portant le nom <var>.htaccess</var> (le premier caract&egrave;re est un point) sont par nature une partie de la configuration du serveur Web. Le serveur Web dispose bien &eacute;galement de fichiers de configuration globaux. N&eacute;anmoins, ceux-ci se trouvent normalement sous le r&eacute;pertoire des programmes du serveur Web et ne sont pas forc&eacute;ment accessibles &agrave; tous les utilisateurs qui g&egrave;rent un projet Web. <var>Les fichiers .htaccess</var> par contre sont plac&eacute;s dans l'endroit du r&eacute;pertoire dans lequel se trouve l'offre Web. Donc l&agrave;-m&ecirc;me o&ugrave; vous placez vos fichiers HTML, vos fichiers graphiques etc..., vous pouvez donc aussi placer vos fichiers <var>.htaccess</var>.</p>

<p>Le fait que le nom <var>.htaccess</var> commence par un point est une tradition de l'univers Unix. L&agrave;, beaucoup de fichiers de configuration sp&eacute;cifiques au r&eacute;pertoire commencent par un point. Le fichier <var>.profile</var> par exemple est connu. Dans la configuration globale du serveur Web Apache il est possible, il est vrai de r&eacute;gler un autre nom que <var>.htaccess</var>.</p>

<p>Les fichiers <var>.htaccess</var> sont de purs fichiers texte qui doivent &ecirc;tre trait&eacute;s avec un &eacute;diteur de texte. Quand vous avez un acc&egrave;s Telnet ou bien SSH &agrave; l'ordinateur serveur sur lequel se trouve votre offre Web, vous pouvez cr&eacute;er et modifier ces fichiers directement sur le serveur en appelant l&agrave; un &eacute;diteur de texte appropri&eacute; (sur les syst&egrave;mes Unix par exemple l'&eacute;diteur <var>vi</var>). Quand vous n'avez qu'un acc&egrave;s FTP &agrave; l'ordinateur serveur, vous pouvez cr&eacute;er ce fichier localement sur votre ordinateur avec un &eacute;diteur de texte et le transmettre ensuite sur le serveur.</p>

<p>Vous pouvez combiner toutes les possibilit&eacute;s d&eacute;crites s&eacute;par&eacute;ment dans cette partie dans un fichier <var>.htaccess</var>. Ainsi vous pouvez donc par exemple &agrave; la fois installer une protection par mot de passe et noter des options pour la navigation dans les r&eacute;pertoires ou pour l'envoi de contenus en alternative.</p>

<p>Les fichiers <var>.htaccess</var> s'appliquent toujours au r&eacute;pertoire dans lequel ils sont sauvegard&eacute;s ainsi que pour tous ses sous-r&eacute;pertoires et les sous r&eacute;pertoires de ces derniers. Si vous d&eacute;sirez d'autres dispositions pour l'un des sous-r&eacute;pertoires, vous devez y placer &agrave; nouveau un fichier <var>.htaccess</var>. Les mentions du fichier actuel respectif pr&eacute;valent sur les mentions du r&eacute;pertoire parent.</p>




<table bgcolor="#EEEEEE" class="doc" width="100%"><tr><td>
&#160;<a href="#top"><img src="../src/haut.gif" width="14" height="10" border="0" alt="vers le haut"></a><a href="#bottom"><img src="../src/bas.gif" width="14" height="10" border="0" alt="vers le bas"></a>&#160;
</td></tr></table>
<h2 class="Sh2"><a class="an" name="protection_repertoire">Prot&eacute;ger des r&eacute;pertoires et des fichiers avec mot de passe</a></h2>

<p>Les fichiers <var>.htaccess</var> sont sp&eacute;cifiques au r&eacute;pertoire. Sauvegardez donc le fichier <var>.htaccess</var> dans le r&eacute;pertoire o&ugrave; se trouvent les donn&eacute;es prot&eacute;g&eacute;es. Vous pouvez prot&eacute;ger au choix le r&eacute;pertoire complet avec tous ses sous-r&eacute;pertoires ou bien seulement certains fichiers ou types de fichiers. En outre, vous pouvez installer la protection par mot de passe soit pour des utilisateurs distincts ou pour des groupes complets d'utilisateurs. Des combinaisons panachant les deux formes sont aussi possibles. Afin que la protection du r&eacute;pertoire par mot de passe fonctionne, le fichier <var>.htaccess</var> ne suffit pas bien s&ucirc;r &agrave; lui seul. Vous avez besoin en plus d'un fichier o&ugrave; figurent les utilisateurs et leurs mots de passe. Au cas o&ugrave; vous travaillez avec des groupes d'utilisateurs, vous avez besoin en plus d'un fichier dans lequel sont d&eacute;finis les groupes d'utilisateurs. Ces deux autres fichiers sont aussi cr&eacute;&eacute;s avec un &eacute;diteur de texte.</p>

<h3>Exemple: fichier <var>.htaccess</var></h3>

<table width="100%" cellpadding="10"><tr><td class="xmpcode" bgcolor="#FFFFE0"><pre>
# fichier .htaccess pour le r�pertoire Web /service
AuthType Basic
AuthName &quot;espace-Service&quot;
AuthUserFile /usr/administration/web/.htusers
AuthGroupFile /usr/administration/web/.htgroups
require user  Audrey Christian Antoine
require group techniciens
</pre></td></tr></table>

<h3 class="xpl">Explication:</h3>

<p>La premi&egrave;re ligne du fichier d'exemple est un commentaire. Ces lignes de commentaires doivent commencer par le signe di&egrave;se <code>#</code>. Toutes les autres lignes ont une construction uniforme: elles commencent par des mots-cl&eacute;s suivis des mentions qui le concernent s&eacute;par&eacute;es par un ou plusieurs espaces. Les lignes vides sont autoris&eacute;es. Les lignes comportant des mentions que le serveur Web ne peut pas interpr&eacute;ter peuvent cependant conduire &agrave; une &quot;Internal Server Error&quot; (<img src="../src/doc.gif" width="15" height="10" border="0" alt="Autre page d'information">&nbsp;<a href="httpstatuscodes.htm"><b> Codes d'&eacute;tat HTTP</b></a>&nbsp;<code>500</code>).</p>

<p>Pour installer une protection par mot de passe, vous avez besoin des mots-cl&eacute;s <code>AuthType</code>, <code>AuthName</code>, <code>AuthUserFile</code>, et &eacute;galement, quand vous travaillez avec des groupes d'utilisateurs, de <code>AuthGroupFile</code>. De plus, vous avez besoin d'une ou plusieurs mentions relatives au mot-cl&eacute; <code>require</code>.</p>

<p>Avec <code>AuthType</code> le mode d'authentification est d&eacute;sign&eacute;. La mention habituelle est <code>Basic</code> - ici, les utilisateurs et leur not de passe figurent dans un fichier qu'il vous faut encore mentionner. un autre type d'authentification possible serait <code>PGP</code> (Pretty good privacy).</p>

<p>Pour <code>AuthUserFile</code> est mentionn&eacute; le fichier dans lequel figurent les utilisateurs autoris&eacute;s et leurs mots de passe. Le chemin complet absolu doit &ecirc;tre mentionn&eacute;. Ce <b>n</b>'est donc <b>pas</b> le chemin &agrave; partir du r&eacute;pertoire racine de votre projet, mais &agrave; partir du r&eacute;pertoire racine de l'ordinateur serveur. Le cas &eacute;ch&eacute;ant, questionnez &agrave; ce sujet votre fournisseur d'acc&egrave;s ou votre Webmestre! Il est aussi pr&eacute;f&eacute;rable pour des raisons de s&eacute;curit&eacute; de placer le fichier avec les utilisateurs et les mots de passe hors du projet Web sur le serveur. Mais vous ne pouvez pas acc&eacute;der, sur l'ordinateur serveur Web de tous les fournisseurs d'h&eacute;bergement, hors de votre propre projet Web. Dans ce cas, vous devez en tous cas choisir pour le fichier un nom de fichier qui commence par <var>.ht</var>. Car sur le serveur Apache, ces fichiers sont par d&eacute;faut cach&eacute;s aux visiteurs. La m&ecirc;me chose s'applique au fichier de groupe, au cas o&ugrave; vous travaillez avec des groupes. Celui-ci est mentionn&eacute; avec <code>AuthGroupFile</code>.</p>

<p>Pour <code>require</code> mentionnez comme deuxi&egrave;me mot-cl&eacute; soit <code>user</code> ou bien <code>group</code> selon que vous parlez d'utilisateurs distincts ou de groupes d'utilisateurs. Derri&egrave;re peuvent suivre un ou plusieurs noms d'utilisateurs ou de groupes d'utilisateurs.</p>

<p>Dans l'exemple ci-dessus sont mentionn&eacute;s les trois utilisateurs <code>Audrey Christian Antoine</code> ainsi que tous les utilisateurs du groupe <code>techniciens</code>. Afin que la protection par mot de passe fonctionne, les fichiers mentionn&eacute;s avec les utilisateurs et les groupes doivent maintenant &ecirc;tre cr&eacute;&eacute;s.</p>

<h3>Exemple: fichier <var>.htusers</var> sous Unix</h3>

<table width="100%" cellpadding="10"><tr><td class="xmpcode" bgcolor="#FFFFE0"><pre>
# Fichier d'utilisateurs pour projet Web
Audrey:INGoUvP4QNWNM
Michel:INw2mPEH.owe2
Christelle:INt4TUI7dOlQ6
Fanny:IN0w9l5E2Rltw
Norbert:INP0Mscg62Cbg
Diane:INbi/z9y/ogns
Christine:INmkm1zgB8qGk
Gaspard:INeRD/cUQIFP6
Christian:INL8hI.TVvsds
Antoine:INEyrT70PYPlo
</pre></td></tr></table>
<h3>Exemple: fichier <var>.htusers</var> par exemple sous Windows</h3>
<table width="100%" cellpadding="10"><tr><td class="xmpcode" bgcolor="#FFFFE0"><pre>
# Fichier d'utilisateurs pour projet Web
Audrey:Hercule
Michel:Dionysos
Christelle:Olympia
Fanny:Aphrodite
Norbert:Pos�idon
Diane:Cupidon
Christine:Ath�na
Gaspard:Apollon
Christian:Jupiter
Antoine:Diane
</pre></td></tr></table>

<h3 class="xpl">Explication:</h3>

<p>Dans ces fichiers aussi les lignes de commentaires sont permises, elles sont introduites par <code>#</code>. Sinon, chaque ligne du fichier utilisateurs contient un nom d'utilisateur suivi imm&eacute;diatement de deux points et de son mot de passe. Sur les syst&egrave;mes Unix ce ne sont pas les mots de passe eux m&ecirc;mes, mais leur forme crypt&eacute;e. Pour cela, vous devez crypter les mots de passe &agrave; l'aide du m&eacute;canisme <var>crypt</var>. Au cas o&ugrave; vous ne pouvez pas le faire, vous pouvez utiliser le petit formulaire suivant. Entrez-y le mot de passe d&eacute;sir&eacute;. Le formulaire appelle un script CGI sur le Web lorsqu'il est envoy&eacute;. Le r&eacute;sultat que vous recevez est le mot de passe crypt&eacute;. Pour le faire, vous devez cependant &ecirc;tre connect&eacute; &agrave; Internet.</p>

<form action="http://www.selfhtml.com.fr/cgi-bin/cryptform/cryptform.pl" method="get">
<table cellpadding="8" cellspacing="1" bgcolor="#EEEEEE"><tr>
<td align="right" valign="middle">Mot de passe:</td>
<td align="right" valign="middle"><input type="password" name="password" size="14" maxlength="8"> <input type="submit"   value="crypter"></td>
</tr></table>
</form>

<h3>Exemple: fichier <var>.htgroups</var></h3>

<table width="100%" cellpadding="10"><tr><td class="xmpcode" bgcolor="#FFFFE0"><pre>
# Fichier de groupe pour projet Web
techniciens: Gaspard Diane Christelle
</pre></td></tr></table>

<h3 class="xpl">Explication:</h3>

<p>Le fichier de groupes est constitu&eacute; d'enregistrements pour lesquels un nom de groupe est d'abord not&eacute; suivi de deux points puis des noms des utilisateurs appartenant &agrave; ce groupe. Ces noms d'utilisateurs doivent correspondre &agrave; un enregistrement du fichier utilisateurs.</p>

<p>Le fichier de groupe est n&eacute;cessaire dans l'exemple uniquement parce que dans le fichier <var>.htaccess</var> un groupe d'utilisateurs a &eacute;t&eacute; mentionn&eacute;. Alors que vous avez besoin dans tous les cas du fichier utilisateurs, le fichier de groupe n'est indispensable que si vous utilisez des noms de groupe.</p>

<h3 class="inf">Incidence:</h3>

<p>Tous les visiteurs du projet Web qui essaient maintenant d'acc&eacute;der au r&eacute;pertoire avec le fichier <var>.htaccess</var>, re&ccedil;oivent de leur navigateur une fen&ecirc;tre de dialogue dans laquelle ils doivent entrer le nom d'utilisateur et le mot de passe. Seuls les visiteurs qui s'identifient avec une combinaison valide de nom d'utilisateur et de mot de passe ont acc&egrave;s au r&eacute;pertoire.</p>

<h3 class="inf"><a name="avance">Possibilit&eacute;s avanc&eacute;es:</a></h3>

<p>Ainsi qu'il est montr&eacute; dans l'exemple ci-dessus, la protection d'acc&egrave;s s'applique au r&eacute;pertoire dans lequel est sauvegard&eacute; le fichier <var>.htaccess</var>, ainsi qu'&agrave; tous les r&eacute;pertoires qui lui sont subalternes. Vous pouvez aussi limiter la protection &agrave; certains fichiers, types de fichiers ou m&eacute;thodes d'acc&egrave;s.</p>

<h3>Exemple: fichier <var>.htaccess</var></h3>

<table width="100%" cellpadding="10"><tr><td class="xmpcode" bgcolor="#FFFFE0"><pre>
# Fichier .htaccess pour le r�pertoire Web /service
AuthType Basic
AuthName &quot;espace-Service&quot;
AuthUserFile /usr/administration/web/.htusers
AuthGroupFile /usr/administration/web/.htgroups
&lt;Files *.htm&gt;
require user  Audrey Christian Antoine
require group techniciens
&lt;/Files&gt;
</pre></td></tr></table>

<h3 class="xpl">Explication:</h3>

<p>Pour limiter la protection, utilisez de fa&ccedil;on similaire aux rep&egrave;res HTML ou XML, les parenth&egrave;ses pointues. Dans le rep&egrave;re d'ouverture, derri&egrave;re la parenth&egrave;se pointue d'ouverture, peut figurer soit <code>Files</code>, comme dans l'exemple ci-dessus, soit <code>Limit</code>. Derri&egrave;re, vous pouvez faire uniquement une mention restrictive. Avec <code>*.htm</code> comme dans l'exemple, vous limitez la protection aux fichiers HTML. Avec une mention comme <code>secret.htm</code> ce seul et unique fichier serait prot&eacute;g&eacute;. Avec <code>Limit</code> vous pouvez limiter la m&eacute;thode d'acc&egrave;s par exemple &agrave; <code>GET</code> ou bien &agrave; <code>POST</code>.</p>

<h3 class="inf">Attention:</h3>

<p>Au cas o&ugrave; la protection de r&eacute;pertoires ne marchait vraiment pas chez vous, la raison pourrait en &ecirc;tre que dans la configuration centrale du serveur Apache trop peu soit permis pour l'inscription <code>AllowOverride</code>. Au cas o&ugrave; vous avez vous m&ecirc;me acc&egrave;s &agrave; la configuration du serveur Web, recherchez-y cette inscription et modifiez la. Affectez par exemple <code>All</code> comme valeur. Demandez autrement &agrave; votre fournisseur d'acc&egrave;s ou &agrave; votre Webmestre!</p>

<p>Les m&eacute;canismes de protection que vous cr&eacute;ez &agrave; l'aide de fichiers <var>.htaccess</var>, sont infiniment plus s&ucirc;rs au niveau HTTP que ceux qui sont cr&eacute;&eacute;s &agrave; l'aide de scripts CGI ou m&ecirc;me &agrave; l'aide de Javascript. Vous devez cependant savoir que <var>.htaccess</var> n'assure pas une protection g&eacute;n&eacute;rale. La protection ne s'applique que lorsque des navigateurs Web ou autres client Web r&eacute;clament des donn&eacute;es prot&eacute;g&eacute;es par le serveur Web. Elle ne s'applique pas, lorsque l'acc&egrave;s a lieu par exemple avec un autre protocole Internet comme FTP.</p>



<table bgcolor="#EEEEEE" class="doc" width="100%"><tr><td>
&#160;<a href="#top"><img src="../src/haut.gif" width="14" height="10" border="0" alt="vers le haut"></a><a href="#bottom"><img src="../src/bas.gif" width="14" height="10" border="0" alt="vers le bas"></a>&#160;
</td></tr></table>
<h2 class="Sh2"><a class="an" name="ip_domaine_nom">Autoriser ou exclure des IPs, des domaines IP ou des adresses nominatives</a></h2>

<p>Vous pouvez exclure certaines adresses IP ou domaines IP de l'acc&egrave;s aux pages Web. De la m&ecirc;me fa&ccedil;on vous pouvez exclure toutes les adresses IP et n'autoriser l'acc&egrave;s qu'&agrave; certaines d'entre elles. Les utilisateurs qui acc&egrave;dent par une adresse IP non autoris&eacute;e, re&ccedil;oivent alors un message d'erreur HTTP (le <img src="../src/doc.gif" width="15" height="10" border="0" alt="Autre page d'information">&nbsp;<a href="httpstatuscodes.htm"><b>code d'&eacute;tat HTTP</b></a> <code>403</code>), et l'acc&egrave;s leur est refus&eacute;.</p>

<p>Cela est &agrave; pr&eacute;coniser par exemple quand votre offre Web ne doit &ecirc;tre accessible qu'aux collaborateurs de votre entreprise ou lorsque vous d&eacute;sirez exclure certains utilisateurs ayant une adresse fixe et dont la conduite, sur un forum ou clavardage bas&eacute; sur le Web et que vous proposez, laisse &agrave; d&eacute;sirer.</p>

<h3>Exemple: fichier <var>.htaccess</var></h3>

<table width="100%" cellpadding="10"><tr><td class="xmpcode" bgcolor="#FFFFE0"><pre>
# Fichier r�glementant les domaines IP
Order deny,allow
Deny from .aol.com
Deny from 192.168
Allow from 192.168.220.102
</pre></td></tr></table>

<h3 class="xpl">Explication:</h3>

<p>D'abord vous fixez avec <code>Order</code> l'ordre logique d'interpr&eacute;tation des mentions qui suivent. La mention <code>deny,allow</code> est possible comme dans l'exemple ou &eacute;galement l'ordre inverse.</p>

<p>Dans les lignes qui commencent par <code>Deny from</code> ou <code>Allow from</code>, vous mentionnez une adresse IP concr&egrave;te ou une partie de celle-ci, une adresse nominative ou une partie de celle-ci. Avec <code>Deny from</code> vous interdisez l'acc&egrave;s &agrave; ou aux utilisateur(s) mentionn&eacute;s et avec  <code>Allow from</code> vous permettez l'acc&egrave;s. Le r&eacute;glage global par d&eacute;faut est normalement l'autorisation d'acc&egrave;s &agrave; tous les utilisateurs. Dans les fichiers <var>.htaccess</var> il est judicieux pour cette m&ecirc;me raison, de formuler avant tout des interdictions restrictives. Sans l'exemple ci-dessus, tous les utilisateurs qui naviguent avec une identification AOL sont exclus (<code>.aol.com</code>) ainsi que tous les utilisateurs dont le domaine IP num&eacute;rique est <code>192.168</code>. Pour permettre malgr&eacute; tout l'acc&egrave;s &agrave; un utilisateur d&eacute;termin&eacute; de ce domaine, son adresse IP est encore mentionn&eacute;e avec  <code>Allow from</code>.</p>

<p>La mention est interpr&eacute;t&eacute;e comme fragment de cha&icirc;ne de caract&egrave;res. Quand un client appelle une page Web dans le r&eacute;pertoire o&ugrave; se trouve le fichier  <var>.htaccess</var>, le serveur Web compare si une des cha&icirc;nes de caract&egrave;res not&eacute;es se trouve dans la cha&icirc;ne de caract&egrave;res transmise par le client appelant au serveur. Pour en savoir plus sur les cha&icirc;nes de caract&egrave;res possibles qui sont transmises dans la pratique, il est recommand&eacute; de jeter un coup d'&#339;il dans les <img src="../src/doc.gif" width="15" height="10" border="0" alt="Autre page d'information">&nbsp;<a href="../projet/controler.htm#fichiers_log"><b>fichiers Log du serveur Web</b></a>.</p>

<h3 class="inf">Attention:</h3>

<p>Au lieu d'une cha&icirc;ne de caract&egrave;res d&eacute;termin&eacute;e, vous pouvez aussi noter <code>Allow from all</code> ou bien <code>Deny from all</code>, pour formuler une autorisation g&eacute;n&eacute;rale ou une interdiction g&eacute;n&eacute;rale.</p>

<p>Pour exclure et inclure certaines IP, certains domaines IP ou certaines adresses nominales, les m&ecirc;mes <a href="#avance"><img src="../src/haut.gif" width="14" height="10" border="0" alt="vers le haut"><b>possibilit&eacute;s avanc&eacute;es</b></a> que pour la protection par mot de passe sont permises. Les instructions avec <code>Deny from</code> et <code>Allow from</code> peuvent ici &ecirc;tre incluses dans les rep&egrave;res correspondants. Il est ainsi possible par exemple de limiter l'exclusion de certains utilisateurs ou cercles d'utilisateurs &agrave; certains fichiers  ou &agrave; certaines m&eacute;thodes d'acc&egrave;s.</p>





<table bgcolor="#EEEEEE" class="doc" width="100%"><tr><td>
&#160;<a href="#top"><img src="../src/haut.gif" width="14" height="10" border="0" alt="vers le haut"></a><a href="#bottom"><img src="../src/bas.gif" width="14" height="10" border="0" alt="vers le bas"></a>&#160;
</td></tr></table>
<h2 class="Sh2"><a class="an" name="options">R&eacute;gler les options du r&eacute;pertoire</a></h2>

<p>&Agrave; l'aide d'un fichier <var>.htaccess</var> vous pouvez modifier toutes les options globales de r&eacute;pertoire qui sont r&eacute;gl&eacute;es dans la configuration du serveur Web, pour le r&eacute;pertoire correspondants et ses sous-r&eacute;pertoires. La condition pr&eacute;alable en est bien s&ucirc;r que soit inscrit dans la configuration centrale du serveur Web <code>AllowOverride All</code>. Si ce n'est pas le cas, alors les mentions pour d'autres options de r&eacute;pertoire sont ignor&eacute;es.</p>

<h3>Exemple: fichier <var>.htaccess</var></h3>

<table width="100%" cellpadding="10"><tr><td class="xmpcode" bgcolor="#FFFFE0"><pre>
# fichier pour le r�pertoire /images
Options +ExecCGI -Indexes
DirectoryIndex premier.htm start.htm
ErrorDocument 403 &quot;L'acc�s � ce r�pertoire est interdit&quot;.
ErrorDocument 404 /special/404.html
ErrorDocument 500 http://www.mon_autre_serveur.fr/special/500.html
</pre></td></tr></table>

<h3 class="xpl">Explication:</h3>

<p>Avec <code>Options</code> vous pouvez modifier des r&eacute;glages de base importants que le serveur Web utilise pour les r&eacute;pertoires. Derri&egrave;re <code>Options</code> vous pouvez noter une ou plusieurs des mentions suivantes:<br>
<code>+ExecCGI</code> permet l'ex&eacute;cution de <img src="../src/chap.gif" width="15" height="13" border="0" alt="Chapitre: vue d'ensemble">&nbsp;<a href="../cgiperl/index.htm"><b>scripts CGI</b></a> dans le r&eacute;pertoire au cas o&ugrave; la configuration centrale ne le permet que dans le r&eacute;pertoire CGI d&eacute;fini et <code>-ExecCGI</code> l'interdit, dans la mesure o&ugrave; la configuration centrale le permet dans tous les r&eacute;pertoires.<br>
<code>+Includes</code> permet l'ex&eacute;cution de <img src="../src/doc.gif" width="15" height="10" border="0" alt="Autre page d'information">&nbsp;<a href="../cgiperl/introduction/ssi.htm"><b>Server Side Includes</b></a> dans le r&eacute;pertoire au cas o&ugrave; la configuration centrale l'interdit et  <code>-Includes</code> l'interdit, dans la mesure o&ugrave; la configuration centrale le permet.<br>
<code>+IncludesNOEXEC</code> permet l'ex&eacute;cution de Server Side Includes, qui n'ex&eacute;cutent aucun script CGI, <code>-IncludesNOEXEC</code> interdit ces Server Side Includes.<br>
<code>+Indexes</code> permet la navigation dans les r&eacute;pertoires au cas o&ugrave; la configuration centrale l'interdit, et <code>-Indexes</code> l'interdit dans la mesure o&ugrave; la configuration centrale le permet. Pour la  navigation dans les r&eacute;pertoires le contenu du r&eacute;pertoire est list&eacute; au cas o&ugrave; seul le r&eacute;pertoire est appel&eacute; (par exemple <var>http://www.votre-nom.fr/images/</var>) et qu'aucun fichier  avec la &quot;fonction index&quot; ne s'y trouve.
Avec <code>+MultiViews</code> vous permettez la d&eacute;finition de <img src="../src/bas.gif" width="14" height="10" border="0" alt="vers le bas">&nbsp;<a href="#contenus_alternative"><b>contenus en alternative</b></a>, avec <code>-MultiViews</code> vous l'annulez.</p>

<p>Normalement le serveur Web est configur&eacute; de telle fa&ccedil;on qu'il permet de &quot;fouiner&quot; dans le r&eacute;pertoire au cas o&ugrave; aucun fichier avec la &quot;fonction index&quot; ne s'y trouve. Il s'agit, dans les r&eacute;glages de la plupart des serveurs Web, de fichiers nomm&eacute;s <var>index.htm</var> ou bien <var>index.html</var>.<br>
Avec <code>DirectoryIndex</code> vous pouvez fixer d'autres noms de fichiers qui remplissent dans ce r&eacute;pertoire et ses sous-r&eacute;pertoires le r&ocirc;le de fichiers avec la fonction index. Vous pouvez mentionner autant de noms de fichiers que vous le d&eacute;sirez.</p>

<p>Par d&eacute;faut, le serveur Web affiche un fichier HTML contenu dans ses configurations quand une erreur d'acc&egrave;s se produit, par exemple quand le fichier r&eacute;clam&eacute; n'existe pas. Vous pouvez modifier cela aussi:<br>
Avec <code>ErrorDocument</code> vous d&eacute;finissez un message ou un fichier personnel qui est affich&eacute; en cas d'erreur. Derri&egrave;re le mot cl&eacute;, notez le <img src="../src/doc.gif" width="15" height="10" border="0" alt="Autre page d'information">&nbsp;<a href="httpstatuscodes.htm"><b>code d'&eacute;tat HTTP</b></a> d&eacute;sir&eacute; - Les erreurs typiques qui peuvent survenir sont celles portant les num&eacute;ros <code>403</code>, <code>404</code> et <code>500</code>. Derri&egrave;re le num&eacute;ro avec le code d'&eacute;tat, vous pouvez soit noter un message d'erreur personnalis&eacute; entre guillemets ou bien mentionner l'adresse d'une page Web qui doit &ecirc;tre affich&eacute;e en cas d'erreur. Pour les adresses sur votre propre domaine, vous pouvez travailler avec des noms de chemins absolus, le r&eacute;pertoire racine du projet Web formant le point de d&eacute;part. Au cas o&ugrave; vous ne notez qu'un message d'erreur, celui-ci est affich&eacute; comme pur texte dans le navigateur au cas o&ugrave; l'erreur se produit. Les pages Web mentionn&eacute;es peuvent &ecirc;tre structur&eacute;es selon votre humeur et envie. Il est par exemple agr&eacute;able et moins inqui&eacute;tant pour les visiteurs quand ils voient s'afficher en cas d'erreur une page dont la pr&eacute;sentation est la m&ecirc;me que celle des autres pages du projet.</p>





<table bgcolor="#EEEEEE" class="doc" width="100%"><tr><td>
&#160;<a href="#top"><img src="../src/haut.gif" width="14" height="10" border="0" alt="vers le haut"></a><a href="#bottom"><img src="../src/bas.gif" width="14" height="10" border="0" alt="vers le bas"></a>&#160;
</td></tr></table>
<h2 class="Sh2"><a class="an" name="navigation">R&eacute;gler la navigation dans les r&eacute;pertoires</a></h2>

<p>Quand vous autorisez la navigation dans les r&eacute;pertoires, de telle fa&ccedil;on que pour un appel comme  <var>http://www.votre-nom.fr/images/</var> le contenu du r&eacute;pertoire soit list&eacute;, vous pouvez modifier l'apparence pour l'affichage des listes de r&eacute;pertoires dans le navigateur. Cela est plus facile &agrave; comprendre si vous gardez en t&ecirc;te l'id&eacute;e que le navigateur Web g&eacute;n&egrave;re simplement du code HTML de fa&ccedil;on dynamique lors de l'affichage de la liste d'un r&eacute;pertoire, pour en afficher le contenu lu. Avec les options d&eacute;crites ici, vous pouvez influer sur la sortie HTML du serveur Web.</p>

<p>L'illustration suivante montre comment un navigateur pourrait afficher la liste d'un r&eacute;pertoire pour lequel on utilise ses propres descriptions de fichier et ic&ocirc;nes:</p>

<p><img src="repertoire.gif" width="627" height="304" border="0" alt="Exemple de repr&eacute;sentation d'un r&eacute;pertoire"></p>

<h3>Exemple: fichier <var>.htaccess</var></h3>

<table width="100%" cellpadding="10"><tr><td class="xmpcode" bgcolor="#FFFFE0"><pre>
# fichier pour le r�pertoire /images
FancyIndexing On
AddDescription &quot;Fichier HTML, affichable&quot; *.htm *.html
AddDescription &quot;Graphique GIF, affichable&quot; *.gif
AddDescription &quot;Graphique JPEG, affichable&quot; *.jpg
AddDescription &quot;Archive ZIP, � t�l�charger&quot; *.zip
AddIcon /src/bleu.gif html htm
AddIcon /src/jaune.gif gif jpg
AddIcon /src/vert.gif ^^DIRECTORY^^
AddIcon /src/bleu.gif ^^BLANKICON^^
</pre></td></tr></table>

<h3 class="xpl">Explication:</h3>

<p>Avec <code>FancyIndexing On</code> vous activez vos propres options pour la repr&eacute;sentation de la liste du r&eacute;pertoire. Les inscriptions des autres lignes de l'exemple ci-dessus d&eacute;finissent ces options d'affichage.</p>

<p>Avec <code>AddDescription</code> vous pouvez noter un court descriptif devant figurer derri&egrave;re un ou plusieurs fichiers. Notez d'abord entre guillemets le texte souhait&eacute; et mentionnez derri&egrave;re &agrave; quel(s) fichier(s) le texte doit s'appliquer. Ici vous pouvez, comme dans l'exemple ci-dessus utiliser des caract&egrave;res de remplacement.</p>

<p>Avec <code>AddIcon</code> vous pouvez d&eacute;terminer pour un ou plusieurs fichiers un graphisme personnalis&eacute;. Mentionnez ici l'URI du graphique. Pour les adresses sur votre propre domaine, vous pouvez travailler avec des noms de chemins absolus, le r&eacute;pertoire racine du projet Web formant le point de d&eacute;part. Derri&egrave;re la mention du fichier graphique souhait&eacute;, vous pouvez noter une ou plusieurs extensions de fichier. Les fichiers ayant cette extension recevront alors &agrave; l'affichage le symbole graphique correspondant. &Agrave; la place des extensions de fichiers, vous pouvez aussi noter des expressions r&eacute;serv&eacute;es comme <code>^^DIRECTORY^^</code> (les r&eacute;pertoires re&ccedil;oivent ce symbole graphique) ou <code>^^BLANKICON^^</code> (Les fichiers sans extensions ou les fichiers ne pouvant &ecirc;tre class&eacute;s re&ccedil;oivent ce symbole graphique).</p>

<p>D'autres options qui ne sont pas not&eacute;es dans l'exemple ci-dessus sont &eacute;galement possibles:</p>

<p>Avec <code>AddType</code> vous pouvez affecter &agrave; un <img src="../src/chap.gif" width="15" height="13" border="0" alt="Chapitre: vue d'ensemble">&nbsp;<a href="typesmime.htm"><b>type Mime</b></a> une ou plusieurs extensions de fichier.<br>
Avec <code>AddType text/xml adr</code> vous affectez par exemple les fichiers  <code>*.adr</code> au type Mime <code>text/xml</code>.<br>
Avec <code>AddEncoding</code> vous pouvez affecter &agrave; un sous type d'un type Mime, une ou plusieurs extensions de fichiers.<br>
Avec <code>AddEncoding javascript jscr</code> vous affectez par exemple les fichiers <code>*.jscr</code> au type Mime <code>text/javascript</code>.</p>

<p>Avec <code>AddIconByType</code> vous pouvez affecter un symbole graphique &agrave; un type Mime. Tous le fichier de ce type Mime sont alors affich&eacute;s avec ce symbole graphique.<br>
Avec <code>AddIconByType text/xml /src/structure.gif</code> vous affectez par exemple aux fichiers ayant le type Mime <code>text/xml</code> un graphique dont l'adresse est <code>/src/structure.gif</code>.<br>
Avec <code>AddIconByEncoding</code> vous pouvez affecter un symbole graphique au sous-type d'un type Mime.<br>
Avec <code>AddIconByEncoding javascript /src/action.gif</code> vous affectez par exemple aux fichiers du sous-type Mime <code>javascript</code> un graphique dont l'adresse est <code>/src/action.gif</code>.</p>

<p>Avec <code>DefaultIcon</code> vous d&eacute;terminez un symbole graphique pour tous les cas qui ne sont pas couverts par des mentions plus sp&eacute;cifiques.<br>
Avec <code>DefaultIcon /src/point.gif</code> vous d&eacute;terminez par exemples que toutes les inscriptions de r&eacute;pertoires qu'il est impossible d'affecter &agrave; des symboles graphiques, recevront le graphique  dont l'adresse est <code>/src/point.gif</code>.</p>

<p>Avec <code>HeaderName</code> vous d&eacute;finissez votre propre fichier pour l'affichage de l'information d'ent&ecirc;te du r&eacute;pertoire.<br>
Avec <code>HeaderName entete.htm</code> vous d&eacute;finissez par exemple que l'affichage de l'ent&ecirc;te sera assur&eacute; par le fichier <code>entete.htm</code> du m&ecirc;me r&eacute;pertoire.</p>

<p>Avec <code>ReadmeName</code> vous d&eacute;finissez un fichier dans lequel figurent des informations compl&eacute;mentaires sur le r&eacute;pertoire, par exemple des remarques sur les droits d'auteur. Ce fichier est incorpor&eacute; sous la liste du r&eacute;pertoire.<br>
Avec <code>HeaderName pied.htm</code> vous d&eacute;finissez par exemple que l'affichage des informations &quot;lisezmoi&quot; sera assur&eacute; par le fichier <code>pied.htm</code> du m&ecirc;me r&eacute;pertoire.</p>

<p>Avec <code>IndexIgnore</code> vous pouvez mentionner des fichiers qui ne doivent pas appara&icirc;tre dans la liste du r&eacute;pertoire.<br>
Avec <code>IndexIgnore entete.htm pied.htm photo_nu.jpg *.bmp</code> vous d&eacute;terminez par exemple que les fichiers <code>entete.htm</code>, <code>pied.htm</code>, <code>photo_nu.jpg</code> ainsi que tous les fichiers avec l'extension <code>.bmp</code> ne soient pas affich&eacute;s.</p>

<p>Avec <code>IndexOrderDefault</code> l'ordre est d&eacute;termin&eacute;. Par d&eacute;faut les &eacute;l&eacute;ments du r&eacute;pertoire sont affich&eacute;s dans l'ordre alphab&eacute;tique croissant des noms de fichiers.<br>
Avec <code>IndexOrderDefault Descending Name</code> vous pouvez par exemple trier dans l'ordre d&eacute;croissant des noms de fichier,<br>
avec <code>IndexOrderDefault Ascending Date</code> dans l'ordre d&eacute;croissant de la date et de l'heure,<br>
avec <code>IndexOrderDefault Descending Size</code> dans l'ordre d&eacute;croissant de la taille de fichier<br>
er avec <code>IndexOrderDefault Ascending Description</code> par ordre croissant de descriptifs de fichier.</p>

<p>Avec <code>AddAlt</code> vous pouvez affecter &agrave; un symbole graphique utilis&eacute; une <img src="../src/doc.gif" width="15" height="10" border="0" alt="Autre page d'information">&nbsp;<a href="../html/graphiques/incorporer.htm#referencer"><b>alternative en texte HTML</b></a>, au cas o&ugrave; le graphique ne peut pas &ecirc;tre affich&eacute;.<br>
Avec <code>AddAlt &quot;c'est un fichier graphique&quot; jaune.gif</code> vous d&eacute;terminez par exemple l' alternative en texte <code>c'est un fichier graphique </code> pour le  symbole graphique <code>jaune.gif</code>.<br>
Avec <code>AddAltByType</code> vous pouvez affecter &agrave; tous les symboles graphiques plac&eacute;s devant les fichiers d'un certain type Mime une alternative en texte HTML commune.<br>
Avec <code>AddAltByType &quot;c'est un fichier bas&eacute; sur XML&quot; text/xml</code> vous affectez par exemple &agrave; tous les symboles graphiques qui figurent devant un fichier du type Mime <code>text/xml</code>, l' alternative en texte mentionn&eacute;e.<br>
Avec <code>AddAltByEncoding</code> vous pouvez affecter &agrave; tous les symboles graphiques plac&eacute;s devant les fichiers d'un certain sous-type Mime une alternative en texte HTML commune.<br>
Avec <code>AddAltByEncoding &quot;c'est un fichier bas&eacute; sur XML&quot; javascript</code> vous affectez par exemple &agrave; tous les symboles graphiques plac&eacute;s devant les fichiers du sous-type Mime <code>javascript</code>, l' alternative en texte mentionn&eacute;e.</p>

<p>Avec <code>IndexOptions</code> vous pouvez enfin fixer d'autres options distinctes.<br>
Avec <code>IndexOptions IconHeight=12 IconWidth=14 IconsAreLinks ScanHTMLTitles</code> vous fixez par exemple que les graphiques ic&ocirc;nes sont affich&eacute;s avec une hauteur fixe de 12 pixels et une largeur fixe de 14 pixels. Les ic&ocirc;nes peuvent en outre &ecirc;tre cliqu&eacute;es en tant que lien et appellent le fichier affich&eacute; &agrave; leur c&ocirc;t&eacute;. Dans la colonne du descriptif de fichier c'est le contenu de l'&eacute;l&eacute;ment   <code>title</code>  qu'ils contiennent qui est lu et affich&eacute; comme court descriptif du fichier dans le cas des fichiers HTML.<br>
Les autres options sont:<br>
Avec <code>SuppressColumnSorting</code> les &eacute;l&eacute;ments du r&eacute;pertoire sont affich&eacute;s sans &ecirc;tre tri&eacute;s.<br>
Avec <code>SuppressDescription</code> aucun descriptif de fichier n'est affich&eacute;.<br>
Avec <code>SuppressLastModified</code> aucune date et heure n'est affich&eacute;e pour les &eacute;l&eacute;ments.<br>
Avec <code>SuppressSize</code> aucune taille de fichier n'est affich&eacute;e.</p>









<table bgcolor="#EEEEEE" class="doc" width="100%"><tr><td>
&#160;<a href="#top"><img src="../src/haut.gif" width="14" height="10" border="0" alt="vers le haut"></a><a href="#bottom"><img src="../src/bas.gif" width="14" height="10" border="0" alt="vers le bas"></a>&#160;
</td></tr></table>
<h2 class="Sh2"><a class="an" name="contenus_alternative">Envoyer des contenus en alternative</a></h2>

<p>Vous pouvez influer sur la communication entre le serveur Web et le client appelant et faire en sorte que des contenus diff&eacute;rents soient envoy&eacute;s selon les types de client. De cette fa&ccedil;on vous pouvez par exemple envoyer une page index en langue fran&ccedil;aise ou en langue allemande selon que l'utilisateur utilise un navigateur avec une interface fran&ccedil;aise ou allemande. Ou bien vous pouvez envoyer en alternative un fichier HTML ou un fichier WML selon que le client qui appelle est un client Web normal ou un t&eacute;l&eacute;phone portable qui d&eacute;sire avoir des contenus bas&eacute;s sur WAP/WML.</p>

<p>Pour proposer des contenus en alternative, quelques r&eacute;glages sont n&eacute;cessaires dans le fichier <var>.htaccess</var>  (dans la mesure o&ugrave; ils ne sont pas d&eacute;j&agrave; effectu&eacute;s dans la configuration centrale du serveur Web). Vous avez besoin par ailleurs d'un &quot;fichier de r&eacute;partition&quot;.</p>

<h3>Exemple: fichier <var>.htaccess</var></h3>

<table width="100%" cellpadding="10"><tr><td class="xmpcode" bgcolor="#FFFFE0"><pre>
# r�glages pour contenus en alternative
AddType application/x-type-map var
Options +MultiViews
DirectoryIndex index
</pre></td></tr></table>

<h3>Exemple: fichier <var>index.var</var></h3>

<table width="100%" cellpadding="10"><tr><td class="xmpcode" bgcolor="#FFFFE0"><pre>
URI: index; vary=&quot;type,language&quot;

URI: francais.htm
Content-type: text/html; qs=1.0
Content-language: fr

URI: allemand.htm
Content-type: text/html; qs=0.8
Content-language: de
</pre></td></tr></table>

<h3 class="xpl">Explication:</h3>

<p>Dans le fichier <var>.htaccess</var> se trouvent les inscriptions suivantes:<br>
<code>AddType application/x-type-map var</code> ajoute un <img src="../src/doc.gif" width="15" height="10" border="0" alt="Autre page d'information">&nbsp;<a href="typesmime.htm"><b>type Mime</b></a> que le serveur Web conna&icirc;t (tout au moins Apache). C'est le type Mime pour le fichier avec des mentions sur les contenus en alternative. Comme extension de ces fichiers a &eacute;t&eacute; d&eacute;finie dans l'exemple <code>var</code>. Les fichiers <var>*.var</var> sont donc reconnus comme fichiers d'instructions pour les contenus en alternative.<br>
<code>Options +MultiViews</code> active la fonction MultiView. Pour les contenus en alternative, cette option doit &ecirc;tre activ&eacute;e de fa&ccedil;on explicite.<br>
<code>DirectoryIndex index</code> nomme les fichiers dans le nom desquels figure  <code>index</code>, comme &eacute;tant les fichiers pour la fonction index.</p>

<p>Vous avez besoin ensuite dans l'exemple d'un fichier nomm&eacute; <var>index.var</var> dans le m&ecirc;me r&eacute;pertoire que le fichier <var>.htaccess</var>. Le fichier <var>index.var</var> de l'exemple contient dans la premi&egrave;re ligne la mention suivante:<br>
<code>URI: index; vary=&quot;type,language&quot;</code><br>
Vous exprimez par l&agrave; que les d&eacute;finitions qui suivent doivent &ecirc;tre prises en compte pour les contenus en alternative  quand des requ&ecirc;tes arrivent et co&iuml;ncident avec le <code>DirectoryIndex</code> fix&eacute;  (d&eacute;fini auparavant dans l'exemple comme <code>index</code>). Les alternatives peuvent concerner des mentions sur le type de ficher (<code>type</code>) et sur la langue (<code>language</code>).</p>

<p>Cette premi&egrave;re instruction et les alternatives possibles sont s&eacute;par&eacute;es par une ligne vide. Chaque alternative commence par <code>URI:</code>. &Agrave; la suite vient l'URI souhait&eacute;e qui doit &ecirc;tre appel&eacute;e pour l'alternative concern&eacute;e. Dans l'exemple ci-dessus, il s'agit de fichiers du m&ecirc;me r&eacute;pertoire, &agrave; savoir d'une part <code>francais.htm</code> et d'autre part <code>allemand.htm</code>.<br>
Avec <code>Content-type:</code> vous d&eacute;terminez le type Mime de l'URI mentionn&eacute;e pour <code>URI:</code>, dans l'exemple ci-dessus <code>text/html</code>. Au cas o&ugrave; par exemple vous voulez envoyer des contenus en alternative pour navigateur Web et t&eacute;l&eacute;phone portable WAP, vous pouvez pour une alternative proposer un fichier WML avec le type Mime  <code>text/vnd.wap.wml</code>, et dans l'autre un fichier HTML avec le type Mime habituel <code>text/html</code>. La mention <code>Content-type:</code> est en tout cas obligatoire m&ecirc;me quand vous n'y faites pas de mentions diff&eacute;rentes.<br>
Pour <code>Content-type</code> vous pouvez encore noter &agrave; la fin, s&eacute;par&eacute;e par un point virgule une mention sur <code>qs</code>. Derri&egrave;re ce mot-cl&eacute; et un signe &eacute;gal,  vous pouvez attribuer des valeurs num&eacute;riques pour les alternatives. Les alternatives avec les valeurs plus &eacute;lev&eacute;es, seront privil&eacute;gi&eacute;es dans le cas o&ugrave; il n'est pas possible autrement de d&eacute;cider quelle alternative doit &ecirc;tre choisie.<br>
Avec <code>Content-language:</code> vous pouvez diff&eacute;rencier les langues en mentionnant une <img src="../src/doc.gif" width="15" height="10" border="0" alt="Autre page d'information">&nbsp;<a href="abrevlangues.htm"><b>abr&eacute;viation de langue</b></a>. En fonction de la langue utilis&eacute;e ou privil&eacute;gi&eacute;e par le client qui appelle, l'alternative correspondante sera alors choisie.</p>

<p>Pour des contenus en alternative, vous avez naturellement aussi besoin de fichiers en alternative. Dans l'exemple ci-dessus il s'agirait des fichiers <var>francais.htm</var> et <var>allemand.htm</var>, qui ont le m&ecirc;me contenu mais dans des langues diff&eacute;rentes.</p>

<p>Quand vous placez un tel fichier <var>.htaccess</var> et <var>index.var</var> dans le r&eacute;pertoire de d&eacute;marrage d'un domaine par exemple dans le r&eacute;pertoire de d&eacute;marrage de <var>http://www.votre-nom.fr/</var>, alors les visiteurs qui ne font qu'appeler le domaine sans sp&eacute;cifier de nom de fichier d&eacute;termin&eacute;, seront orient&eacute;s automatiquement sur la page de la langue ayant pu &ecirc;tre reconnue par le logiciel. &Agrave; partir de l&agrave;, des liens diff&eacute;rents en cons&eacute;quence, peuvent mener au reste de l'offre, de fa&ccedil;on &agrave; ce que la langue reste la m&ecirc;me. Soyez cependant circonspect avec cette possibilit&eacute; d'orientation. Ayez en t&ecirc;te que tous les visiteurs de votre projet Web ne sont pas libres dans le choix de leur navigateur. Un visiteur francophone dans un Caf&eacute; Internet anglais aura son id&eacute;e sur le choix de la langue quand il visite des pages espagnole. Pr&eacute;voyez &eacute;ventuellement un choix de la langue par le client.</p>






<table cellpadding="4" cellspacing="0" border="0" width="100%">
<tr><td colspan="2" bgcolor="#EEEEEE" class="doc">
&#160;<a href="#top"><img src="../src/haut.gif" width="14" height="10" border="0" alt="vers le haut"></a>
</td></tr>
<tr><td bgcolor="#EEEEEE" class="doc" align="right"><a href="palettescouleurs.htm"><img src="../src/suivant.gif" width="10" height="10" border="0" hspace="10" alt="page suivante"></a></td>
<td bgcolor="#FFFFFF"><img src="../src/doc.gif" width="15" height="10" border="0" alt="Autre page d'information"> <a href="palettescouleurs.htm"><b>Palettes de couleurs standard </b></a>
</td></tr>
<tr>
<td bgcolor="#EEEEEE" class="doc" align="right"><a href="robots.htm"><img src="../src/precedent.gif" width="10" height="10" border="0" hspace="10" alt="page pr&eacute;c&eacute;dente"></a></td>
<td bgcolor="#FFFFFF" width="100%"><img src="../src/doc.gif" width="15" height="10" border="0" alt="Autre page d'information"> <a href="robots.htm"><b>robots.txt - contr&ocirc;ler les robots</b></a>
</td>
</tr>
<tr><td colspan="2" bgcolor="#EEEEEE" class="doc">&#160;</td></tr>
</table><table cellpadding="4" cellspacing="0" border="0" width="100%">
<tr>
<td bgcolor="#FFEEDD" class="nav"><a class="an" name="bottom"><img src="../src/refchap.gif" width="16" height="13" border="0" alt="Renvoie au chapitre d'origine"></a> <a href="../index.htm"><b>SELFHTML</b></a>/<a href="../navigation/index.htm" target="_parent">Aides &agrave; la navigation</a> <img src="../src/refchap.gif" width="16" height="13" border="0" alt="Renvoie au chapitre d'origine"> <a href="index.htm"><b>Divers compl&eacute;ments techniques</b></a> </td>
</tr>
</table>

<p>&copy; 2001 Stefan M&uuml;nz / &copy; 2003 Traduction <img src="../src/courriel.gif" width="15" height="10" border="0" alt="Adresse &eacute;lectronique">&nbsp;<a href="mailto:13405@free.fr">Serge Fran&ccedil;ois, 13405@free.fr</a><br><img src="../src/courriel.gif" width="15" height="10" border="0" alt="Adresse &eacute;lectronique">&nbsp;<a href="mailto:selfhtml@selfhtml.com.fr">selfhtml@selfhtml.com.fr</a></p>



</body>
</html>
