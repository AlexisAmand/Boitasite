<?php

function direcho($path) {
global $filetotal, $fullsize, $totaldirs;
if ($dir = opendir($path)) {
  while (false !== ($file = readdir($dir))) {
   if (is_dir($path."/".$file)) {                    //Si c'est un répertoire, on vérifie son contenu
   if ($file != '.' && $file != '..') {            // mais on exclut les fichiers '.' ou '..'
     echo '<li><b>' . $file . '</b></li><ul>';
     direcho($path."/".$file);
     echo '</ul>';
     $totaldirs++;
   }
   }
  else {                      //Si ce n'est pas un répertoire, on afficher simplement les fichiers avec la taille
   $tab = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
   $filesize = $tab . '(' . filesize ($path.'/'.$file) . ' kb)';
   echo '<li>' . $file . $filesize . '</li>';
   $fullsize = $fullsize + filesize ($path.'/'.$file);
   $filetotal++;
  }
}
closedir($dir);
}
}

direcho('.');

$fullsize = round($fullsize / 1024 / 1024, 2);

echo"<br><br>
<b>Nombre total de fichiers</b> - $filetotal fichier(s)<br>
<b>Nombre total de répertoires</b> - $totaldirs répertoire(s)<br>
<b>Taille Totale</b> - $fullsize MB<br>
";

?> 