<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Collecte les donn&eacute;es incorrectes issues des transactions XA non termin&eacute;es en raison d'erreurs s&eacute;v&egrave;res</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.mysqlnd-ms-xa-commit.html">« mysqlnd_ms_xa_commit</a></li>
      <li style="float: right;"><a href="function.mysqlnd-ms-xa-rollback.html">mysqlnd_ms_xa_rollback »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.mysqlnd-ms.html">Fonctions Mysqlnd_ms</a></li>
    <li>Collecte les donn&eacute;es incorrectes issues des transactions XA non termin&eacute;es en raison d'erreurs s&eacute;v&egrave;res</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.mysqlnd-ms-xa-gc" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mysqlnd_ms_xa_gc</h1>
  <p class="verinfo">(PECL mysqlnd_ms &lt; 1.6.0)</p><p class="refpurpose"><span class="refname">mysqlnd_ms_xa_gc</span> &mdash; <span class="dc-title">Collecte les données incorrectes issues des transactions XA non terminées en raison d&#039;erreurs sévères</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.mysqlnd-ms-xa-gc-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   
   <span class="methodname"><strong>mysqlnd_ms_xa_gc</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$connection</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$gtrid</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$ignore_max_retries</code></span>


  ]] ) : <span class="type">int</span></div>

  <p class="para rdfs-comment">
   Collecte les données incorrectes issues de transactions XA non terminées.
  </p>
  <p class="para">
   Le protocole XA est un protocole bloquant. Il existe des cas où les serveurs
   participants à une transaction globale ne peuvent réaliser les opérations,
   par exemple, lorsque le coordinateur de transaction s&#039;interrompt de façon
   innatendu ou se déconnecte. Dans de tel cas, les serveurs MySQL restent en
   attente d&#039;instruction pour finir la transaction XA en question. En raison du
   fait que les transactions occupent des ressources, elles doivent toujours
   être terminées proprement.
  </p>
  <p class="para">
   Le collecteur de données incorrectes requiert le stockage d&#039;un statut
   pour tracker les transactions globales. Lorsqu&#039;un client PHP se termine
   de façon innatendue au milieu d&#039;une transaction, et qu&#039;un nouveau client
   PHP démarre, alors le collecteur de données incorrectes peut connaître
   la transaction globale interrompue et la terminer. Si vous ne configurez
   pas de stockage de statut, le collecteur de données incorrectes ne peut
   effectuer aucune tâche de nettoyage.
  </p>
  <p class="para">
   Le stockage de statut doit être sécurisé contre les crash, avoir une haute
   disponibilité pour survivre à son propre crash. Actuellement, seul MySQL
   est supporté comme stockage de statut.
  </p>
  <p class="para">
   Le collecteur de données incorrectes peut aussi être exécuté automatiquement
   en tâche de fond. Voir la directive de configuration du plugin
   <code class="literal">garbage_collection</code> pour plus de détails.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <strong>Expérimental</strong><br />
   <p class="para">
    Cette fonctionalité est actuellement en cours de développement. Il peut y avoir
    des bogues et/ou des limitations dans les fonctionalités. Ne pas utiliser
    en environnement de production.
   </p>
  </p></blockquote>
 </div>

 
 <div class="refsect1 parameters" id="refsect1-function.mysqlnd-ms-xa-gc-parameters">
  <h3 class="title">Liste de paramètres</h3>
  <dl>

   
    <dt>
<code class="parameter">connection</code></dt>

     <dd>

      <p class="para">
       Un gestionnaire de connexion MySQL obtenu depuis une des fonctions
       de connexion des extensions <a href="ref.mysqli.html" class="link">mysqli</a>,
       <a href="ref.mysql.html" class="link">mysql</a> ou
       <a href="ref.pdo-mysql.html" class="link">PDO_MYSQL</a>.
      </p>
     </dd>

   
   
    <dt>
<code class="parameter">gtrid</code></dt>

    <dd>

     <p class="para">
      L&#039;identifiant de transaction globale (gtrid). Si fourni, le collecteur
      de données incorrectes ne considérera que la transaction. Sinon, le
      stockage de statut sera analysé à la recherche d&#039;une transaction non terminée.
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">ignore_max_retries</code></dt>

     <dd>

      <p class="para">
       Si l&#039;on doit ignorer ou non la configuration <code class="literal">max_retries</code>
       du plugin. Si le collecteur de données incorrectes échoue, et que la
       limite <code class="literal">max_retries</code> est atteinte avant de terminer la
       transaction globale en échec, vous pouvez tenter des exécutions avant
       de chercher la cause et résoudre le problème manuellement en envoyer des
       requêtes SQL appropriées aux participants. Le fait de définir ce
       paramètre a le même effet que de définir temporairement la
       configuration <code class="literal">max_retries = 0</code>.
      </p>
     </dd>

   
  </dl>

 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.mysqlnd-ms-xa-gc-returnvalues">
  <h3 class="title">Valeurs de retour</h3>
  <p class="para">
   Retourne <strong><code>TRUE</code></strong> si la transaction globale a été annulée avec succès, <strong><code>FALSE</code></strong> sinon.
  </p>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-function.mysqlnd-ms-xa-gc-seealso">
  <h3 class="title">Voir aussi</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member">
     <a href="mysqlnd-ms.quickstart.xa_transactions.html" class="link">Démarrage rapide avec les
      transactions distribuées/XA</a>
    </li>
    <li class="member">
     <a href="mysqlnd-ms.configuration.html" class="link">La configuration à l&#039;exécution</a>
    </li>
    <li class="member">
     <a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.xa" class="link">La configuration du stockage des statuts</a>
    </li>
    <li class="member">
     <span class="function"><a href="function.mysqlnd-ms-get-stats.html" class="function" rel="rdfs-seeAlso">mysqlnd_ms_get_stats()</a> - Retourne des statistiques quant &agrave; la distribution et la connexion de requ&ecirc;tes</span>
    </li>
   </ul>
  </p>
 </div>

 
</div></div></div></body></html>