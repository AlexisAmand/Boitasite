<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Modifications entrainant une incompatibilit&eacute; ascendante</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="migration55.changes.html">« Qu'est-ce qui a chang&eacute; en PHP 5.5.x</a></li>
      <li style="float: right;"><a href="migration55.new-features.html">Nouvelles fonctionnalit&eacute;s »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="migration55.html">Migration de PHP 5.4.x &agrave; PHP 5.5.x</a></li>
    <li>Modifications entrainant une incompatibilit&eacute; ascendante</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="migration55.incompatible" class="sect1">
  <h2 class="title">Modifications entrainant une incompatibilité ascendante</h2>
  <p class="simpara">
   Bien que la plupart du code PHP 5 existant devrait fonctionner
   sans aucune modification, vous devez prendre en considération quelques
   incompatibilités ascendantes :
  </p>
  
  <div class="sect2" id="migration55.incompatible.windows">
   <h3 class="title">Abandon du support de Windows XP et 2003</h3>
   
   <p class="para">
    Le support de Windows XP et 2003 a été supprimé. Les binaires Windows
    de PHP requièrent maintenant Windows Vista ou supérieur.
   </p>
  </div>

  <div class="sect2" id="migration55.incompatible.case">
   <h3 class="title">La sensibilité à la casse ne dépend plus de la locale utilisée</h3>
   
   <p class="para">
    Toutes les comparaisons insensibles à la casse pour les noms de fonctions, de classes, 
    et de constantes sont maintenant
    indépendantes de la locale utilisée, et respectent les règles ASCII.
    Ceci permet une meilleure prise en charge des langues utilisant l&#039;alphabet latin
    avec des règles d&#039;assemblage inhabituelles, comme le turc et l&#039;azerbaïdjan.
   </p>
   <p class="para">
    Ceci peut avoir des impacts sur le code qui utilise l&#039;insensibilité à la casse
    pour des caractères non-ASCII avec des jeux de caractères multi-octets
    (incluant l&#039;UTF-8), comme les caractères accentués pour de nombreuses langues européennes.
    Si vous avez du code basé sur des langues non-anglaises, et non-ASCII, alors
    vous devriez tester que vous n&#039;êtes pas impacté par ce changement de comportement
    avant de déployer PHP 5.5 en environnement de production.
   </p>
  </div>

  <div class="sect2" id="migration55.incompatible.pack">
   <h3 class="title">Modifications des fonctions <span class="function"><a href="function.pack.html" class="function">pack()</a></span> et <span class="function"><a href="function.unpack.html" class="function">unpack()</a></span></h3>

   <p class="para">
    Des modifications ont été réalisées sur les fonctions <span class="function"><a href="function.pack.html" class="function">pack()</a></span>
    et <span class="function"><a href="function.unpack.html" class="function">unpack()</a></span> pour les rendre plus compatible avec Perl :
   </p>

   <ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">
      <span class="function"><a href="function.pack.html" class="function">pack()</a></span> supporte maintenant le code format &quot;Z&quot;,
      dont le comportement est identique à &quot;a&quot;.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <span class="function"><a href="function.unpack.html" class="function">unpack()</a></span> supporte maintenant le code format &quot;Z&quot;
      pour les chaînes de caractères complétées avec la valeur NULL,
      et se comporte comme &quot;a&quot; dans les précédentes versions : il va supprimer
      les octets NULL finaux.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <span class="function"><a href="function.unpack.html" class="function">unpack()</a></span> conserve maintenant les octets NULL finaux
      lorsque le code format &quot;a&quot; est utilisé.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <span class="function"><a href="function.unpack.html" class="function">unpack()</a></span> supprime maintenant les espaces blancs ASCII
      finaux lorsque le code format &quot;A&quot; est utilisé.
     </span>
    </li>
   </ul>

   <p class="para">
    L&#039;écriture de code compatible de façon ascendante qui utilise le code
    format &quot;a&quot; avec la fonction <span class="function"><a href="function.unpack.html" class="function">unpack()</a></span> requiert l&#039;utilisation
    de la fonction <span class="function"><a href="function.version-compare.html" class="function">version_compare()</a></span>, en raison de cette cassure
    de compatiblité ascendante.
   </p>
   <p class="para">
    Par exemple :
   </p>
   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Ancien&nbsp;code&nbsp;:<br /></span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">unpack</span><span style="color: #007700">(</span><span style="color: #DD0000">'a5'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$packed</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Nouveau&nbsp;code&nbsp;:<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">version_compare</span><span style="color: #007700">(</span><span style="color: #0000BB">PHP_VERSION</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'5.5.0-dev'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'&gt;='</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">unpack</span><span style="color: #007700">(</span><span style="color: #DD0000">'Z5'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$packed</span><span style="color: #007700">);<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">unpack</span><span style="color: #007700">(</span><span style="color: #DD0000">'a5'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$packed</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </div>
  <div class="sect2" id="migration55.incompatible.json">
   <h3 class="title">Changement de <span class="function"><a href="function.json-encode.html" class="function">json_encode()</a></span></h3>
   <p class="para">
    Quand la <code class="parameter">value</code> passé à <span class="function"><a href="function.json-encode.html" class="function">json_encode()</a></span>
    déclanche une error d&#039;encodage JSON, <strong><code>FALSE</code></strong> est désormais retourné au lieu
    d&#039;une sortie partielle, sauf si les <code class="parameter">options</code> contiennent
    <strong><code>JSON_PARTIAL_OUTPUT_ON_ERROR</code></strong>.
    Voir <span class="function"><a href="function.json-last-error.html" class="function">json_last_error()</a></span> pour la liste complète de raison
    qui peuvent provoquer l&#039;échec de l&#039;encodage JSON.
    Une des raisons potentielle d&#039;échec et que <code class="parameter">value</code>
    contient des <a href="language.types.string.html" class="link">chaîne de caractères</a> contentnant de l&#039;UTF-8 invalide.
   </p>
  </div>

  <div class="sect2" id="migration55.incompatible.self-parent-static">
   <h3 class="title"><code class="literal">self</code>, <code class="literal">parent</code> et
    <code class="literal">static</code> sont maintenant insensible à la casse</h3>

   <p class="para">
    Avant PHP 5.5, des cas existaient où les mots clés
    <a href="language.oop5.paamayim-nekudotayim.html" class="link">self</a>,
    <a href="language.oop5.paamayim-nekudotayim.html" class="link">parent</a> et
    <a href="language.oop5.late-static-bindings.html" class="link">static</a>
    étaient traités de façon sensible à la casse. Ceci a maintenant été résolu,
    et ces mots clés sont toujours gérés de façon insensible à la casse :
    <code class="literal">SELF::CONSTANT</code> est maintenant traité exactement comme
    <code class="literal">self::CONSTANT</code>.
   </p>
  </div>

  <div class="sect2" id="migration55.incompatible.guid">
   <h3 class="title">Suppression des logos PHP GUIDs</h3>

   <p class="para">
    Les GUIDs qui permettaient précédemment l&#039;affichage de divers logos PHP ont été supprimés.
    Ceci inclut la suppression des fonctions qui retournaient ces GUIDs.
    Voici une liste des fonctions supprimées :
   </p>

   <ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">
      <span class="function"><strong>php_logo_guid()</strong></span>
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <span class="function"><strong>php_egg_logo_guid()</strong></span>
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <span class="function"><strong>php_real_logo_guid()</strong></span>
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <span class="function"><strong>zend_logo_guid()</strong></span>
     </span>
    </li>
   </ul>
  </div>

  <div class="sect2" id="migration55.incompatible.execution">
   <h3 class="title">Modification dans l&#039;exécution interne</h3>

   <p class="para">
    Les auteurs d&#039;extensions devraient noter que la fonction
    <strong class="command">zend_execute()</strong> ne peut plus être surchargée,
    et que de nombreux changements ont été effectués sur la structure
    <code class="literal">execute_data</code> ainsi que sur les fonctions associées
    et sur les opcodes de gestion de méthodes.
   </p>

   <p class="para">
    La plupart des extensions ne sont normalement pas affectées par ces modifications,
    mais celles profondément ancrées dans le moteur Zend le seront, et
    nous recommandons à leurs auteurs de lire 
    <a href="migration55.internals.html" class="link">les notes relatives à ces
     modifications</a>.
   </p>
  </div>
 </div></div></div></body></html>