<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Convertit une archive phar vers un autre format de fichier d'archive phar ex&eacute;cutable</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="phar.converttodata.html">« Phar::convertToData</a></li>
      <li style="float: right;"><a href="phar.copy.html">Phar::copy »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.phar.html">Phar</a></li>
    <li>Convertit une archive phar vers un autre format de fichier d'archive phar ex&eacute;cutable</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="phar.converttoexecutable" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Phar::convertToExecutable</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.3.0, PHP 7, PECL phar &gt;= 2.0.0)</p><p class="refpurpose"><span class="refname">Phar::convertToExecutable</span> &mdash; <span class="dc-title">Convertit une archive phar vers un autre format de fichier d&#039;archive phar exécutable</span></p>

 </div>


 <div class="refsect1 description" id="refsect1-phar.converttoexecutable-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>Phar::convertToExecutable</strong></span>
    ([ <span class="methodparam"><span class="type">int</span> <code class="parameter">$format</code><span class="initializer"> = 9021976</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$compression</code><span class="initializer"> = 9021976</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$extension</code></span>
  ]]] ) : <span class="type"><a href="class.phar.html" class="type Phar">Phar</a></span></div>

  <blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">Cette
    méthode nécessite que la variable de configuration INI <code class="literal">phar.readonly</code>
    soit définie à <code class="literal">0</code> pour fonctionner avec les objets <a href="class.phar.html" class="classname">Phar</a>.
    Sinon, une exception <a href="class.pharexception.html" class="classname">PharException</a> sera lançée.</p></p></blockquote>
  <p class="para">
   Cette méthode est utilisée pour convertir une archive phar vers un autre format de fichier. Par exemple,
   elle peut être utilisée pour créer une archive phar basée sur tar en partant d&#039;une archive phar basée sur zip
   ou à partir d&#039;une archive phar exécutable basée sur le format de fichier phar. De plus, elle peut aussi
   être utilisée pour appliquer une compression globale à une archive basée sur tar ou sur phar.
  </p>
  <p class="para">
   Si aucun changement n&#039;est précisé, cette méthode lève une exception <a href="class.badmethodcallexception.html" class="classname">BadMethodCallException</a>.
  </p>
  <p class="para">
   En cas de succès, la méthode crée une nouvelle archive sur le disque et retourne un objet <a href="class.phar.html" class="classname">Phar</a>.
   L&#039;ancienne archive n&#039;est pas supprimée du disque, ce qui devrait être fait manuellement à la fin du procédé.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-phar.converttoexecutable-parameters">
  <h3 class="title">Liste de paramètres</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">format</code></dt>

     <dd>

      <p class="para">
       Ce doit être l&#039;un des formats <code class="literal">Phar::PHAR</code>, <code class="literal">Phar::TAR</code>,
       ou <code class="literal">Phar::ZIP</code>.  Si ce paramètre est <strong><code>NULL</code></strong>, le format de fichier actuel sera
       conservé.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">compression</code></dt>

     <dd>

      <p class="para">
       Ce doit être <code class="literal">Phar::NONE</code> pour aucune compression globale,
       <code class="literal">Phar::GZ</code> la une compression basée sur zlib et
       <code class="literal">Phar::BZ2</code> pour une compression basée sur bzip2.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">extension</code></dt>

     <dd>

      <p class="para">
       Ce paramètre est utilisée pour écraser l&#039;extension par défaut d&#039;une archive convertie.
       A noter que toutes les archives phar basée sur zip ou sur tar doivent comporter
       <code class="literal">.phar</code> dans leur extension pour être traitées comme une archive phar.
      </p>
      <p class="para">
       Si on convertit vers une archive basée sur phar, les extensions par défaut sont
       <code class="literal">.phar</code>, <code class="literal">.phar.gz</code>, ou <code class="literal">.phar.bz2</code>
       selon la compression spécifiée. Pour les archives phar basées sur tar, les extensions
       par défaut sont <code class="literal">.phar.tar</code>, <code class="literal">.phar.tar.gz</code>,
       et <code class="literal">.phar.tar.bz2</code>.  Pour les archives phar basées sur zip, l&#039;extension par
       défaut est <code class="literal">.phar.zip</code>.
      </p>
     </dd>

    
   </dl>

  </p>

 </div>

 <div class="refsect1 returnvalues" id="refsect1-phar.converttoexecutable-returnvalues">
  <h3 class="title">Valeurs de retour</h3>
  <p class="para">
   La méthode retourne un objet <a href="class.phar.html" class="classname">Phar</a> en cas de succès et lève une exception
   en cas d&#039;échec.
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-phar.converttoexecutable-errors">
  <h3 class="title">Erreurs / Exceptions</h3>
  <p class="para">
   Cette méthode lève une exception <a href="class.badmethodcallexception.html" class="classname">BadMethodCallException</a> si elle n&#039;est pas
   capable de compresser, si une méthode de compression inconnue a été spécifiée ou si l&#039;archive demandée
   a été mise en tampon avec <span class="function"><a href="phar.startbuffering.html" class="function">Phar::startBuffering()</a></span> sans être conclue avec 
   <span class="function"><a href="phar.stopbuffering.html" class="function">Phar::stopBuffering()</a></span>, lève une exception <a href="class.unexpectedvalueexception.html" class="classname">UnexpectedValueException</a>
   si le support en écriture a été désactivé et lève une exception <a href="class.pharexception.html" class="classname">PharException</a> si
   un quelconque problème a été rencontré pendant la phase de création de l&#039;archive.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-phar.converttoexecutable-examples">
  <h3 class="title">Exemples</h3>
  <p class="para">
   <div class="example" id="example-702">
    <p><strong>Exemple #1 Un exemple avec <span class="function"><strong>Phar::convertToExecutable()</strong></span></strong></p>
    <div class="example-contents"><p>
     Utilisons Phar::convertToExecutable() :
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tarphar&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Phar</span><span style="color: #007700">(</span><span style="color: #DD0000">'monphar.phar.tar'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;on&nbsp;le&nbsp;convertit&nbsp;vers&nbsp;le&nbsp;format&nbsp;de&nbsp;fichier&nbsp;phar<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;notez&nbsp;bien&nbsp;que&nbsp;monphar.phar.tar&nbsp;n'est&nbsp;*pas*&nbsp;effacé<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$phar&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$tarphar</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">convertToExecutable</span><span style="color: #007700">(</span><span style="color: #0000BB">Phar</span><span style="color: #007700">::</span><span style="color: #0000BB">PHAR</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;crée&nbsp;monphar.phar<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$phar</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setStub</span><span style="color: #007700">(</span><span style="color: #0000BB">$phar</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createDefaultStub</span><span style="color: #007700">(</span><span style="color: #DD0000">'cli.php'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'web/index.php'</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;crée&nbsp;monphar.phar.tgz<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$compressed&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$phar</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">convertToExecutable</span><span style="color: #007700">(</span><span style="color: #0000BB">Phar</span><span style="color: #007700">::</span><span style="color: #0000BB">TAR</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">Phar</span><span style="color: #007700">::</span><span style="color: #0000BB">GZ</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'.phar.tgz'</span><span style="color: #007700">);<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;on&nbsp;traite&nbsp;les&nbsp;erreurs&nbsp;ici<br /></span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-phar.converttoexecutable-seealso">
  <h3 class="title">Voir aussi</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="phar.converttodata.html" class="function" rel="rdfs-seeAlso">Phar::convertToData()</a> - Convertit une archive phar en un fichier non-ex&eacute;cutable</span></li>
    <li class="member"><span class="function"><a href="phardata.converttoexecutable.html" class="function" rel="rdfs-seeAlso">PharData::convertToExecutable()</a> - Convertit une archive tar/zip non-ex&eacute;cutable en une archive phar ex&eacute;cutable</span></li>
    <li class="member"><span class="function"><a href="phardata.converttodata.html" class="function" rel="rdfs-seeAlso">PharData::convertToData()</a> - Convertit une archive phar en une archive tar ou zip non-ex&eacute;cutable</span></li>
   </ul>
  </p>
 </div>


</div></div></div></body></html>