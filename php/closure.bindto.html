<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Duplique la fermeture avec un nouvel objet li&eacute; et un nouveau contexte de classe.</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="closure.bind.html">« Closure::bind</a></li>
      <li style="float: right;"><a href="closure.call.html">Closure::call »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.closure.html">Closure</a></li>
    <li>Duplique la fermeture avec un nouvel objet li&eacute; et un nouveau contexte de classe.</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="closure.bindto" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Closure::bindTo</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.4.0, PHP 7)</p><p class="refpurpose"><span class="refname">Closure::bindTo</span> &mdash; <span class="dc-title">
   Duplique la fermeture avec un nouvel objet lié et un nouveau contexte de classe.
  </span></p>

 </div>

 <div class="refsect1 description" id="refsect1-closure.bindto-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>Closure::bindTo</strong></span>
    ( <span class="methodparam"><span class="type">object</span> <code class="parameter">$newthis</code></span>
   [, <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$newscope</code>
   <span class="initializer"> = &quot;static&quot;</span></span>
  ] ) : <span class="type"><a href="class.closure.html" class="type Closure">Closure</a></span></div>

  <p class="para rdfs-comment">
   Crée et retourne une nouvelle <a href="functions.anonymous.html" class="link">fonction anonyme
   </a> avec le même corps et les même variables liées que l&#039;originale, mais avec un objet lié
   qui peut être différent, et un nouveau contexte de classe.
  </p>

  <p class="para">
   L&#039;objet lié détermine la valeur que <code class="literal">$this</code> aura dans le corps de la fonction,
   et le contexte de classe représente une classe qui détermine à quels membres privés et protégés
   la fonction anonyme aura accès. Autrement dit, les propriétés qui seront visibles seront les
   mêmes que si la fonction anonyme était une méthode de la classe passée via le paramètre
   <code class="parameter">newscope</code>.
  </p>

  <p class="para">
   Les fermetures statiques ne peuvent pas avoir d&#039;objet lié (la valeur du paramètre
   <code class="parameter">newthis</code> devrait être <strong><code>NULL</code></strong>), mais le contexte de classe peut,
   lui, être changé.
  </p>

  <p class="para">
   Cette fonction va vérifier qu&#039;une fermeture non-statique à laquelle on passe
   un contexte d&#039;objet deviendra liée à cet objet (et ne sera donc plus non-statique),
   et vice-versa. Dans ce but, les fermetures non-statiques auxquelles on passe un
   contexte de classe mais <strong><code>NULL</code></strong> comme contexte objet seront rendues statiques, et
   inversement.
  </p>

  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    Si vous voulez seulement dupliquer la fonction anonyme, vous pouvez utiliser
    <a href="language.oop5.cloning.html" class="link">le clonage</a> à la place.
   </p>
  </p></blockquote>

 </div>


 <div class="refsect1 parameters" id="refsect1-closure.bindto-parameters">
  <h3 class="title">Liste de paramètres</h3>
  <dl>

   
    <dt>
<code class="parameter">newthis</code></dt>

    <dd>

     <p class="para">
      L&#039;objet auquel lier la fonction anonyme, ou <strong><code>NULL</code></strong> pour une fermeture statique.
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">newscope</code></dt>

    <dd>

     <p class="para">
      Le contexte de classe à associer à la fermeture, ou &#039;static&#039; pour conserver le
      contexte actuel. Si un objet est passé, son type sera utilisé.
      Ceci determine la visibilité des méthodes protégées et privées de l&#039;objet lié.
      Il n&#039;est pas autorisé de passer (un objet d&#039;) une classe interne pour 
      ce paramètre.
     </p>
    </dd>

   
  </dl>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-closure.bindto-returnvalues">
  <h3 class="title">Valeurs de retour</h3>
  <p class="para">
   Retourne la nouvelle fermeture sous la forme d&#039;un objet <a href="class.closure.html" class="classname">Closure</a>,
    ou <strong><code>FALSE</code></strong> si une erreur survient
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-closure.bindto-changelog">
  <h3 class="title">Historique</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>7.0.0</td>
       <td>
        <code class="parameter">newscope</code> ne peut plus être (un objet d&#039;) une 
        class interne, ce qui était possible avant cette version.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-closure.bindto-examples">
  <h3 class="title">Exemples</h3>
  <div class="example" id="example-350">
   <p><strong>Exemple #1 Exemple <span class="function"><strong>Closure::bindTo()</strong></span></strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">A&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">$val</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">val&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">getClosure</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//retourne&nbsp;une&nbsp;fermeture&nbsp;liée&nbsp;à&nbsp;cet&nbsp;objet&nbsp;et&nbsp;ce&nbsp;contexte<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;function()&nbsp;{&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">val</span><span style="color: #007700">;&nbsp;};<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$ob1&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">A</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$ob2&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">A</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$cl&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$ob1</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClosure</span><span style="color: #007700">();<br />echo&nbsp;</span><span style="color: #0000BB">$cl</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$cl&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cl</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindTo</span><span style="color: #007700">(</span><span style="color: #0000BB">$ob2</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$cl</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher quelque chose de similaire à :</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
1
2
</pre></div>
   </div>
  </div>
 </div>



 <div class="refsect1 seealso" id="refsect1-closure.bindto-seealso">
  <h3 class="title">Voir aussi</h3>
  <ul class="simplelist">
   <li class="member"><a href="functions.anonymous.html" class="link">Fonctions anonymes</a></li>
   <li class="member"><span class="methodname"><a href="closure.bind.html" class="methodname" rel="rdfs-seeAlso">Closure::bind()</a> - Duplique une fermeture avec un nouvel objet li&eacute; et un nouveau contexte de classe.</span></li>
  </ul>
 </div>


</div></div></div></body></html>