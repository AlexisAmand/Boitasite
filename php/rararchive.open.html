<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Ouvre une archive RAR</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="rararchive.issolid.html">« RarArchive::isSolid</a></li>
      <li style="float: right;"><a href="rararchive.setallowbroken.html">RarArchive::setAllowBroken »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.rararchive.html">RarArchive</a></li>
    <li>Ouvre une archive RAR</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="rararchive.open" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">RarArchive::open</h1>
  <h1 class="refname">rar_open</h1>
  <p class="verinfo">(PECL rar &gt;= 2.0.0)</p><p class="refpurpose"><span class="refname">RarArchive::open</span> -- <span class="refname">rar_open</span> &mdash; <span class="dc-title">Ouvre une archive RAR</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-rararchive.open-description">
  <h3 class="title">Description</h3>
  <p class="para">Style orienté objet (méthode) :</p>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>RarArchive::open</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$password</code><span class="initializer"> = NULL</span></span>
   [, <span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$volume_callback</code><span class="initializer"> = NULL</span></span>
  ]] ) : <span class="type"><a href="class.rararchive.html" class="type RarArchive">RarArchive</a></span></div>

  <p class="para rdfs-comment">Style procédural :</p>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>rar_open</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$password</code><span class="initializer"> = NULL</span></span>
   [, <span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$volume_callback</code><span class="initializer"> = NULL</span></span>
  ]] ) : <span class="type"><a href="class.rararchive.html" class="type RarArchive">RarArchive</a></span></div>

  <p class="para rdfs-comment">
   Ouvre une archive RAR et retourne une instance <span class="type"><a href="class.rararchive.html" class="type RarArchive">RarArchive</a></span> la représentant.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    Si on tente d&#039;ouvrir une archive multi-volume, le chemin du premier volume
    doit être passé comme premier paramètre.
    Sinon, l&#039;ensemble des fichiers ne sera pas affiché.
   </p>
  </p></blockquote>
 </div>

 
 <div class="refsect1 parameters" id="refsect1-rararchive.open-parameters">
  <h3 class="title">Liste de paramètres</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">filename</code></dt>

     <dd>

      <p class="para">
       Path to the Rar archive.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">password</code></dt>

     <dd>

      <p class="para">
       Un mot de passe en text plein, si nécessaire pour décrypter l&#039;en-tête.
       Il sera également utilisé par défaut si des fichiers cryptés sont trouvés.
       Noter que les fichiers peuvent avoir un mot de passe différent, et ce,
       en respectant les en-têtes.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">volume_callback</code></dt>

     <dd>

      <p class="para">
       Une fonction qui reçoit un seul paramètre - le chemin du volume
       non trouvé - et retourne une <a href="language.types.string.html" class="link">chaîne de caractères</a> contenant le chemin correct
       du volume ou <strong><code>NULL</code></strong> si le volume n&#039;existe pas ou
       le chemin n&#039;est pas connu. Attention à ne pas créer de boucle infinie
       sachant que la fonction sera appelée indéfiniment si le chemin retourné
       dans un précédent appel ne correspond pas au volume désiré. Le fait de
       spécifier ce paramètre évitera une alerte qui devrait être émise lorsqu&#039;un
       volume n&#039;est pas trouvé ; une implémentation qui ne retourne que <strong><code>NULL</code></strong>
       peut toutefois être utilisée pour éviter une telle alerte.
      </p>
     </dd>

    
   </dl>

  </p>
  <div class="warning"><strong class="warning">Avertissement</strong>
   <p class="para">
    Avant la version 2.0.0, cette fonction ne gérait pas correctement les
    chemins relatifs. Utilisez la fonction
    <span class="function"><a href="function.realpath.html" class="function">realpath()</a></span> pour corriger ce bogue.</p>
  </div>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-rararchive.open-returnvalues">
  <h3 class="title">Valeurs de retour</h3>
  <p class="para">
   Retourne l&#039;instance <span class="type"><a href="class.rararchive.html" class="type RarArchive">RarArchive</a></span> requise  ou <strong><code>FALSE</code></strong> si une erreur survient.
  </p>
 </div>

 
 <div class="refsect1 changelog" id="refsect1-rararchive.open-changelog">
  <h3 class="title">Historique</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>3.0.0</td>
       <td>
        Le paramètre <code class="parameter">volume_callback</code> a été ajouté.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-rararchive.open-examples">
  <h3 class="title">Exemples</h3>
  <p class="para">
   <div class="example" id="example-788">
    <p><strong>Exemple #1 Style orienté objet</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$rar_arch&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">RarArchive</span><span style="color: #007700">::</span><span style="color: #0000BB">open</span><span style="color: #007700">(</span><span style="color: #DD0000">'encrypted_headers.rar'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'samplepassword'</span><span style="color: #007700">);<br />if&nbsp;(</span><span style="color: #0000BB">$rar_arch&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Échec&nbsp;lors&nbsp;de&nbsp;l'ouverture&nbsp;du&nbsp;fichier"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #0000BB">$entries&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$rar_arch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getEntries</span><span style="color: #007700">();<br />if&nbsp;(</span><span style="color: #0000BB">$entries&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Échec&nbsp;lors&nbsp;de&nbsp;la&nbsp;récupération&nbsp;des&nbsp;entrées"</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$entries</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"&nbsp;fichier(s)&nbsp;trouvé(s).\n"</span><span style="color: #007700">;<br /><br />if&nbsp;(empty(</span><span style="color: #0000BB">$entries</span><span style="color: #007700">))<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Aucune&nbsp;entrée&nbsp;valide&nbsp;n'a&nbsp;été&nbsp;trouvée."</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #0000BB">$stream&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">reset</span><span style="color: #007700">(</span><span style="color: #0000BB">$entries</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">getStream</span><span style="color: #007700">();<br />if&nbsp;(</span><span style="color: #0000BB">$stream&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Échec&nbsp;lors&nbsp;de&nbsp;l'ouverture&nbsp;du&nbsp;premier&nbsp;fichier"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$rar_arch</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">();<br /><br />echo&nbsp;</span><span style="color: #DD0000">"Contenu&nbsp;du&nbsp;premier&nbsp;fichier&nbsp;:\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">stream_get_contents</span><span style="color: #007700">(</span><span style="color: #0000BB">$stream</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$stream</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher quelque chose de similaire à :</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
2 fichier(s) trouvé(s).
Contenu du premier fichier :
Encrypted file 1 contents.
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-789">
    <p><strong>Exemple #2 Style procédural</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$rar_arch&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">rar_open</span><span style="color: #007700">(</span><span style="color: #DD0000">'encrypted_headers.rar'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'samplepassword'</span><span style="color: #007700">);<br />if&nbsp;(</span><span style="color: #0000BB">$rar_arch&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Échec&nbsp;lors&nbsp;de&nbsp;l'ouverture&nbsp;du&nbsp;fichier"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #0000BB">$entries&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">rar_list</span><span style="color: #007700">(</span><span style="color: #0000BB">$rar_arch</span><span style="color: #007700">);<br />if&nbsp;(</span><span style="color: #0000BB">$entries&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Échec&nbsp;lors&nbsp;de&nbsp;la&nbsp;récupération&nbsp;des&nbsp;entrées"</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$entries</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"&nbsp;fichier(s)&nbsp;trouvé(s).\n"</span><span style="color: #007700">;<br /><br />if&nbsp;(empty(</span><span style="color: #0000BB">$entries</span><span style="color: #007700">))<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Aucune&nbsp;entrée&nbsp;valide&nbsp;n'a&nbsp;été&nbsp;trouvée."</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #0000BB">$stream&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">reset</span><span style="color: #007700">(</span><span style="color: #0000BB">$entries</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">getStream</span><span style="color: #007700">();<br />if&nbsp;(</span><span style="color: #0000BB">$stream&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Échec&nbsp;lors&nbsp;de&nbsp;l'ouverture&nbsp;du&nbsp;premier&nbsp;fichier"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">rar_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$rar_arch</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #DD0000">"Contenu&nbsp;du&nbsp;premier&nbsp;fichier&nbsp;:\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">stream_get_contents</span><span style="color: #007700">(</span><span style="color: #0000BB">$stream</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$stream</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-790">
    <p><strong>Exemple #3 Fonction de rappel pour le volume</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;Dans&nbsp;cet&nbsp;exemple,&nbsp;il&nbsp;y&nbsp;a&nbsp;un&nbsp;volume&nbsp;nommé&nbsp;multi_broken.part1.rar<br />&nbsp;*&nbsp;dont&nbsp;le&nbsp;volume&nbsp;suivant&nbsp;est&nbsp;nommé&nbsp;multi.part2.rar&nbsp;*/<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">resolve</span><span style="color: #007700">(</span><span style="color: #0000BB">$vol</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'/_broken/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$vol</span><span style="color: #007700">))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'_broken'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$vol</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;else<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">$rar_file1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">rar_open</span><span style="color: #007700">(</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">__FILE__</span><span style="color: #007700">).</span><span style="color: #DD0000">'/multi_broken.part1.rar'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'resolve'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$entry&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$rar_file1</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getEntry</span><span style="color: #007700">(</span><span style="color: #DD0000">'file2.txt'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$entry</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">extract</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">__FILE__</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"/temp_file2.txt"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-rararchive.open-seealso">
  <h3 class="title">Voir aussi</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member">Le gestionnaire <a href="wrappers.rar.html" class="link"><code class="literal">rar://</code></a></li>
   </ul>
  </p>
 </div>

 
 
</div></div></div></body></html>