<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Options de recherche</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="regexp.reference.performance.html">« Performance</a></li>
      <li style="float: right;"><a href="reference.pcre.pattern.differences.html">Diff&eacute;rences avec Perl »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="pcre.pattern.html">Masques PCRE</a></li>
    <li>Options de recherche</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="reference.pcre.pattern.modifiers" class="article">
 <h1>Options de recherche</h1>

 
  <p class="para">
   Les options de PCRE sont listées ci-dessous. Les noms entre
   parenthèses sont les noms internes à PCRE.
   Les espaces et les caractères de nouvelles lignes sont ignorés 
   dans les modificateurs, les autres caractères causent des erreurs.
  </p>
  <p class="para">
   <blockquote class="blockquote">
    <dl>

     
      <dt>
<em class="emphasis">i</em> (<code class="literal">PCRE_CASELESS</code>)</dt>

      <dd>

       <span class="simpara">
        Effectue une recherche insensible à la casse.
       </span>
      </dd>

     
     
      <dt>
<em class="emphasis">m</em> (<code class="literal">PCRE_MULTILINE</code>)</dt>

      <dd>

       <span class="simpara">
        Par défaut, PCRE traite la chaîne sujet comme une seule
        ligne (même si cette chaîne contient des retours chariot).
        Le métacaractère &quot;début de ligne&quot; (^) ne sera
        valable qu&#039;une seule fois, au début de la ligne, et le
        métacaractère &quot;fin de ligne &quot; ($) ne sera valable
        qu&#039;à la fin de la chaîne, ou avant le retour chariot
        final (à moins que l&#039;option <em class="emphasis">D</em> ne soit activée).
        C&#039;est le même fonctionnement qu&#039;en Perl.
       </span>
       <span class="simpara">
        Lorsque cette option est activée, &quot; début de ligne &quot; et
        &quot; fin de ligne &quot; correspondront alors aux caractères
        suivant et précédent immédiatement un
        caractère de nouvelle ligne, en plus du début
        et de la fin de la chaîne. C&#039;est le même
        fonctionnement que l&#039;option Perl /m. S&#039;il n&#039;y a pas de
        caractère de nouvelle ligne &quot;\n&quot; dans la chaîne sujet,
        ou s&#039;il n&#039;y a aucune occurrence de ^ ou $ dans le masque, cette option
        ne sert à rien.
       </span>
      </dd>

     
     
      <dt>
<em class="emphasis">s</em> (<code class="literal">PCRE_DOTALL</code>)</dt>

      <dd>

       <span class="simpara">
        Avec cette option, le métacaractère point (.)
        remplace n&#039;importe quel caractère, y compris les nouvelles
        lignes. Sans cette option, le caractère point ne remplace
        pas les nouvelles lignes. Cette option est équivalente
        à l&#039;option Perl /s. Une classe de caractères
        négative telle que [^a] acceptera toujours les
        caractères de nouvelles lignes, indépendamment
        de cette option.
       </span>
      </dd>

     
     
      <dt>
<em class="emphasis">x</em> (<code class="literal">PCRE_EXTENDED</code>)</dt>

      <dd>

       <span class="simpara">
        Avec cette option, les caractères d&#039;espacement sont
        ignorés, sauf lorsqu&#039;ils sont échappés,
        ou à l&#039;intérieur d&#039;une classe de caractères,
        et tous les caractères entre # non échappés
        et en dehors d&#039;une classe de caractères, et le prochain
        caractère de nouvelle ligne sont ignorés. C&#039;est
        l&#039;équivalent Perl de l&#039;option /x : elle permet l&#039;ajout
        de commentaires dans les masques compliqués. Notez bien,
        cependant, que cela ne s&#039;applique qu&#039;aux caractères de
        données. Les caractères d&#039;espacement ne doivent
        jamais apparaître dans les séquences spéciales
        d&#039;un masque, par exemple dans la séquence (?( qui
        introduit une parenthèse conditionnelle.
       </span>
      </dd>

     
     
      <dt id="reference.pcre.pattern.modifiers.eval"><em class="emphasis">e</em> (<code class="literal">PREG_REPLACE_EVAL</code>)</dt>

      <dd>

       <div class="warning"><strong class="warning">Avertissement</strong><p class="simpara">
 Cette fonctionnalité est <em class="emphasis">OBSOLÈTE</em> à partir de PHP 5.5.0 et a été
 <em class="emphasis">SUPPRIMÉE</em> à partir de PHP 7.0.0.
</p></div>
       <span class="simpara">
        Avec cette option obsolète, <span class="function"><a href="function.preg-replace.html" class="function">preg_replace()</a></span> effectue la
        substitution normale des références arrières dans la
        chaîne de remplacement, puis l&#039;évalue comme un code PHP, et
        utilise le résultat pour remplacer la chaîne de recherche.
        Les guillemets simples, les guillemets doubles, les antislashs et les caractères
        NULL sont protégés avec des antislashs (<code class="literal">\</code>) dans
        les références arrières substituées.
       </span>
       <div class="caution"><strong class="caution">Attention</strong>
        <p class="para">
         La fonction <span class="function"><a href="function.addslashes.html" class="function">addslashes()</a></span> est exécutée sur toutes
         les références arrières trouvées avant d&#039;effectuer la substitution.
         Ainsi, lorsque les références arrières sont utilisées comme
         des chaînes entre guillemets, les caractères échappés seront convertis
         en version litérale. Cependant, les caractères qui sont échappés,
         qui ne sont normalement pas convertis, conserveront leurs slashes.
         Ceci rend l&#039;utilisation de ce modificateur compliquée.
        </p>
       </div>
       <div class="caution"><strong class="caution">Attention</strong>
        <p class="para">
         Assurez-vous que <code class="parameter">replacement</code> constitue une
         chaîne de code PHP valide, sinon, PHP émettra une erreur d&#039;analyse à la
         ligne contenant la fonction <span class="function"><a href="function.preg-replace.html" class="function">preg_replace()</a></span>.
        </p>
       </div>
       <div class="caution"><strong class="caution">Attention</strong>
        <p class="para">
         L&#039;utilisation de ce modificateur est <em class="emphasis">découragé</em>,
         sachant qu&#039;il peut introduire très facilement des vulnérabilités
         d&#039;exécution de code à distance. Pour empêcher ceci, la fonction
         <span class="function"><a href="function.preg-replace-callback.html" class="function">preg_replace_callback()</a></span> doit être utilisée à la place :
        </p>
        <div class="informalexample">
         <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$html&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'html'</span><span style="color: #007700">];<br /><br /></span><span style="color: #FF8000">//&nbsp;Mise&nbsp;en&nbsp;majuscule<br /></span><span style="color: #0000BB">$html&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">preg_replace_callback</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'(&lt;h([1-6])&gt;(.*?)&lt;/h\1&gt;)'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;(</span><span style="color: #0000BB">$m</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">"&lt;h</span><span style="color: #0000BB">$m</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]</span><span style="color: #DD0000">&gt;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">strtoupper</span><span style="color: #007700">(</span><span style="color: #0000BB">$m</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">])&nbsp;.&nbsp;</span><span style="color: #DD0000">"&lt;/h</span><span style="color: #0000BB">$m</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]</span><span style="color: #DD0000">&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$html<br /></span><span style="color: #007700">);</span>
</span>
</code></div>
         </div>

        </div>
        <p class="para">
         Si l&#039;exemple ci-dessus était écrit avec <span class="function"><a href="function.preg-replace.html" class="function">preg_replace()</a></span>
         et le modificateur <code class="literal">e</code>, le code pourrait être
         facilement exploité en passant une chaîne tel que
         <code class="literal">&lt;h1&gt;{${eval($_GET[php_code])}}&lt;/h1&gt;</code>.
         Ceci donnait l&#039;attaquant le pouvoir d&#039;exécuter du code PHP arbitraire
         et de ce fait leur donne presque un accès complet au serveur.
        </p>
       </div>
       <blockquote class="note"><p><strong class="note">Note</strong>: 
        <p class="para">
         Seule <span class="function"><a href="function.preg-replace.html" class="function">preg_replace()</a></span> utilise cette option. Elle est
         ignorée par les autres fonctions PCRE.
        </p>
       </p></blockquote>
      </dd>

     
     
      <dt>
<em class="emphasis">A</em> (<code class="literal">PCRE_ANCHORED</code>)</dt>

      <dd>

       <span class="simpara">
        Avec cette option, le masque est ancré de force, c&#039;est-à-dire
        que le masque doit s&#039;appliquer juste au début de la chaîne sujet
        pour être considéré comme trouvé. Il est possible de réaliser le
        même effet en ajoutant les métacaractères adéquats, ce qui est la
        seule manière de le faire en Perl.
       </span>
      </dd>

     
     
      <dt>
<em class="emphasis">D</em> (<code class="literal">PCRE_DOLLAR_ENDONLY</code>)</dt>

      <dd>

       <span class="simpara">
        Avec cette option, le métacaractère $ ne sera
        valable qu&#039;à la fin de la chaîne sujet. Sans
        cette option, $ est aussi valable avant une nouvelle ligne,
        si cette dernière est le dernier caractère de
        la chaîne. Cette option est ignorée si l&#039;option
        <em class="emphasis">m</em> est activée. Il n&#039;y a pas
        d&#039;équivalent en Perl.
       </span>
      </dd>

     
     
      <dt>
<em class="emphasis">S</em></dt>

      <dd>

       <span class="simpara">
        Lorsqu&#039;un masque est utilisé plusieurs fois, cela vaut
        la peine de passer quelques instants de plus pour l&#039;analyser
        et optimiser le code pour accélérer les
        traitements ultérieurs. Cette option force cette
        analyse plus poussée. Actuellement, cette analyse
        n&#039;est utile que pour les masques non ancrés, qui
        ne commencent pas par un caractère fixe.
       </span>
      </dd>

     
     
      <dt>
<em class="emphasis">U</em> (<code class="literal">PCRE_UNGREEDY</code>)</dt>

      <dd>

       <span class="simpara">
        Cette option inverse la tendance à la gourmandise des
        expressions rationnelles. Vous pouvez aussi inverser
        cette tendance au coup par coup avec un <code class="literal">?</code> mais
        cela rendra gourmand la séquence. Cette option n&#039;est pas compatible
        avec Perl. Elle peut aussi être mise dans le masque avec
        l&#039;option <code class="literal">?U</code> dans le
        <a href="regexp.reference.internal-options.html" class="link">pattern</a> ou
        par un point d&#039;interrogation avant le quantificateur (.e.g. <code class="literal">.*?</code>).
       </span>
       <blockquote class="note"><p><strong class="note">Note</strong>: 
        <p class="para">
         Il n&#039;est généralement pas possible de faire correspondre
         plus que la limite de <a href="pcre.configuration.html#ini.pcre.backtrack-limit" class="link">pcre.backtrack_limit</a>
         caractères en mode non gourmand.
        </p>
       </p></blockquote>
      </dd>

     
     
      <dt>
<em class="emphasis">X</em> (<code class="literal">PCRE_EXTRA</code>)</dt>

      <dd>

       <span class="simpara">
        Cette option ajoute d&#039;autres fonctionnalités incompatibles
        avec le PCRE de Perl. Tous les antislashs suivis d&#039;une lettre qui
        n&#039;aurait pas de signification particulière causent une erreur,
        permettant la réservation de ces combinaisons pour des ajouts
        fonctionnels ultérieurs. Par défaut, comme en Perl, les
        antislashs suivis d&#039;une lettre sans signification particulière
        sont traités comme des valeurs littérales. Actuellement,
        cette option ne déclenche pas d&#039;autres fonctions.
       </span>
      </dd>

     
     
      <dt>
<em class="emphasis">J</em> (<code class="literal">PCRE_INFO_JCHANGED</code>)</dt>

      <dd>

       <span class="simpara">
        L&#039;option (?J) interne de configuration modifie l&#039;option locale <code class="literal">PCRE_DUPNAMES</code>.
        Permet la duplication de noms pour les sous-masques.
        À partir de PHP 7.2.0 <code class="literal">J</code> est aussi supporter en tant que modificateur.
       </span>
      </dd>

     
     
      <dt>
<em class="emphasis">u</em> (<code class="literal">PCRE_UTF8</code>)</dt>

      <dd>

       <span class="simpara">
        Cette option désactive les fonctionnalités additionnelles de PCRE qui 
        ne sont pas compatibles avec Perl. Le masque et la chaîne d&#039;entrée sont 
        traitées comme des chaînes UTF-8. Une chaîne d&#039;entrée invalide 
        entrainera aucune détection par les fonctions preg_*. Un masque 
        invalide va lever une erreur de niveau E_WARNING. Les séquences UTF-8 
        de cinq et six octets sont considérées comme invalide depuis PHP 5.3.4
        (soit PCRE 7.3 2007-08-28); elles étaient considérées comme valide 
        précédemment.
       </span>
      </dd>

     
    </dl>

   </blockquote>
  </p>
</div>
</div></div></body></html>