<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Fixe et R&eacute;cup&egrave;re les Valeurs des Propri&eacute;t&eacute;s</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="sdo.examples-basic.html">« Utilisation simple</a></li>
      <li style="float: right;"><a href="sdo.sample.sequence.html">Travailler avec des Objets de Donn&eacute;es en S&eacute;quence »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="sdo.examples.html">Exemples</a></li>
    <li>Fixe et R&eacute;cup&egrave;re les Valeurs des Propri&eacute;t&eacute;s</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="sdo.sample.getset" class="section">
  <h2 class="title">Fixe et Récupère les Valeurs des Propriétés</h2>
  <p class="para">
   Les exemples suivants présument que <strong class="command">$compagnie</strong>
   est la racine d&#039;un arbre d&#039;objets de données créés depuis le schéma et le document
   montré ci-dessus.
  </p>
  <p class="para">
   <div class="example" id="example-6071">
    <p><strong>Exemple #1 Accès via les noms de Propriété</strong></p>
    <div class="example-contents"><p>
     Les propriétés des objets de données peuvent être accédées en utilisant
     la syntaxe d&#039;accès de propriété d&#039;objet. L&#039;exemple fixe le nom de
     compagnie à <code class="literal">&quot;Acme&quot;</code>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$company</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Acme'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>

  <p class="para">
   <div class="example" id="example-6072">
    <p><strong>Exemple #2 Accès via le nom de la propriété en tant que tableau indexé</strong></p>
    <div class="example-contents"><p>
     Nous pouvons également accéder aux propriétés en utilisant un tableau associatif.
     La forme la plus simple est d&#039;utiliser le nom de la propriété dans le tableau indexé.
     Par exemple, ce qui suit définit le nom de la compagnie et récupère 
     l&#039;<code class="literal">&quot;employeeOfTheMonth&quot;</code>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$company</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'UltraCorp'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$eotm&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$company</span><span style="color: #007700">[</span><span style="color: #DD0000">'employeeOfTheMonth'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>

  <p class="para">
   <div class="example" id="example-6073">
    <p><strong>Exemple #3 Itération d&#039;objet de données</strong></p>
    <div class="example-contents"><p>
     Vous pouvons passer en revue les propriétés d&#039;un objet de données 
     en utilisant l&#039;instruction <a href="control-structures.foreach.html" class="link">foreach</a>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$eotm&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$company</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">employeeOfTheMonth</span><span style="color: #007700">;<br />&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$eotm&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$name</span><span style="color: #DD0000">:&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     Affichera :
    </p></div>
    <div class="example-contents">
<div class="cdata"><pre>
name: Jane Doe
SN: E0003
</pre></div>
    </div>

    <div class="example-contents"><p>
     La propriété <code class="literal">&quot;manager&quot;</code> n&#039;est pas affichées, car elle
     n&#039;a pas été spécifiée.
    </p></div>
   </div>
  </p>

  <p class="para">
   <div class="example" id="example-6074">
    <p><strong>Exemple #4 Accès à une propriété à valeurs multiples par le nom</strong></p>
    <div class="example-contents"><p>
     Les propriétés à valeurs multiples d&#039;un objet de données peuvent être
     accédées en utilisant la syntaxe des noms de propriétés de l&#039;objet.
     Ce qui suit récupère la liste des départements.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$departments&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$company</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">departments</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>

  <p class="para">
   <div class="example" id="example-6075">
    <p><strong>Exemple #5 Accès aux éléments à valeurs multiples</strong></p>
    <div class="example-contents"><p>
     Nous pouvons accéder aux éléments individuels des propriétés à valeurs
     multiples en utilisant la syntaxe des tableaux. Ce qui suit permet d&#039;accéder
     au premier département de la compagnie.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$ad_tech_dept&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$company</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">departments</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>

  <p class="para">
   <div class="example" id="example-6076">
    <p><strong>Exemple #6 Itération d&#039;une propriété à valeurs multiples</strong></p>
    <div class="example-contents"><p>
     Les propriétés à valeurs multiples peuvent être passées en
     revue en utilisant l&#039;instruction <a href="control-structures.foreach.html" class="link">foreach</a>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;</span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$company</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">departments&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$department</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;...<br />&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     Chaque itération assignera le prochain département de
     la liste dans la variable <strong class="command">$department</strong>.
    </p></div>
   </div>
  </p>

  <p class="para">
   <div class="example" id="example-6077">
    <p><strong>Exemple #7 Accès aux propriétés chaînées</strong></p>
    <div class="example-contents"><p>
     Nous pouvons chaîner les références des propriétés sur une seule ligne.
     Ce qui suit définit et récupère le nom du premier département.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$company</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">departments</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Emerging&nbsp;Technologies'</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$dept_name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$company</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">departments</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>En utilisant la syntaxe des tableaux associatifs, c&#039;est l&#039;équivalent de</p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$company</span><span style="color: #007700">[</span><span style="color: #DD0000">'departments'</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #DD0000">'name'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'Emerging&nbsp;Technologies'</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$dept_name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$company</span><span style="color: #007700">[</span><span style="color: #DD0000">'departments'</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #DD0000">'name'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     Dans tous les cas, la variable dept_name est définie à <code class="literal">&quot;Emerging Technologies&quot;</code>.
    </p></div>
   </div>
  </p>

  <p class="para">
   <div class="example" id="example-6078">
    <p><strong>Exemple #8 Navigation XPath</strong></p>
    <div class="example-contents"><p>
     Le tableau associatif indexé peut être une expression façon XPath.
     Les expressions valides sont définies par une sous définition d&#039;XPath.
    </p></div>
    <div class="example-contents"><p>
     Deux façons d&#039;indexations de propriétés à valeurs multiples sont supportées.
     La première est la syntaxe de tableau XPath standard dont l&#039;index commence
     à 0, la seconde est une extension SDO à XPath avec un index qui commence
     à 0. La syntaxe standard est :
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$jane_doe&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$company</span><span style="color: #007700">[</span><span style="color: #DD0000">"departments[1]/employees[2]"</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>et la syntaxe de l&#039;extension SDO XPath est :</p></div> 
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$jane_doe&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$company</span><span style="color: #007700">[</span><span style="color: #DD0000">"departments.0/employees.1"</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     Les deux exemples ci-dessus récupèrent le second employé du premier
     département.
    </p></div>
   </div>
  </p>

  <p class="para">
   <div class="example" id="example-6079">
    <p><strong>Exemple #9 Requête XPath</strong></p>
    <div class="example-contents"><p>
     Nous pouvons utiliser XPath pour effectuer une requête et ainsi identifier
     des parties d&#039;un objet de données basé sur des données instanciées.
     Ce qui suit récupère le manager depuis le département
     <code class="literal">&quot;Advanced Technologies&quot;</code>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;$ad_tech_mgr&nbsp;</span><span style="color: #007700">=&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$company</span><span style="color: #007700">[</span><span style="color: #DD0000">"departments[name='Advanced&nbsp;Technologies']/employees[manager=true]"</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>

  <p class="para">
   <div class="example" id="example-6080">
    <p><strong>Exemple #10 Création d&#039;objets de données fils</strong></p>
    <div class="example-contents"><p>
     Un objet de données peut être une fraction pour ces objets de données fils.
     Un objet de données fils est automatiquement une partie des données.
     Ce qui suit ajoute un nouvel employé au département
     <code class="literal">&quot;Advanced Technologies&quot;</code>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$ad_tech_dept&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$company</span><span style="color: #007700">[</span><span style="color: #DD0000">"departments[name='Advanced&nbsp;Technologies']"</span><span style="color: #007700">];<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$new_hire&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$ad_tech_dept</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createDataObject</span><span style="color: #007700">(</span><span style="color: #DD0000">'employees'</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$new_hire</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'John&nbsp;Johnson'</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$new_hire</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SN&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'E0005'</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$new_hire</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">manager&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>

  <p class="para">
   <div class="example" id="example-6081">
    <p><strong>Exemple #11 Effacement d&#039;une propriété primitive</strong></p>
    <div class="example-contents"><p>
     Nous pouvons utiliser la fonction <span class="function"><a href="function.isset.html" class="function">isset()</a></span> et
     <span class="function"><a href="function.unset.html" class="function">unset()</a></span> pour tester et effacer des éléments
     de l&#039;objet de données.
    </p></div>
    <div class="example-contents"><p>
     Ce qui suit efface le nom du premier département.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;</span><span style="color: #007700">unset(</span><span style="color: #0000BB">$company</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">departments</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  </p>

  <p class="para">
   <div class="example" id="example-6082">
    <p><strong>Exemple #12 Effacement d&#039;un objet de données</strong></p>
    <div class="example-contents"><p>
     La fonction <span class="function"><a href="function.unset.html" class="function">unset()</a></span> peut également être utilisée
     pour effacer un objet de données de l&#039;arbre.
     L&#039;exemple suivant montre comment John Jones à quitter la compagnie...
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;</span><span style="color: #007700">unset(</span><span style="color: #0000BB">$company</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">departments</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">employees</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>

  <p class="para">
   <div class="example" id="example-6083">
    <p><strong>Exemple #13 Effacement d&#039;un objet de données référencé</strong></p>
    <div class="example-contents"><p>
     Ce qui suit efface <code class="literal">&quot;employeeOfTheMonth&quot;</code> de la compagnie.
     Si c&#039;est une relation contenue, alors l&#039;employé sera effacé de la compagnie.
     (probablement pas une bonne idée que d&#039;effacer chaque mois votre meilleur employé !)
     mais si c&#039;est une relation non-contenue, l&#039;employé référencé restera
     dans le département de la compagnie, mais ne sera plus accessible
     via la propriété <code class="literal">&quot;employeeOfTheMonth&quot;</code>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(isset(</span><span style="color: #0000BB">$company</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">employeeOfTheMonth</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;unset(</span><span style="color: #0000BB">$company</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">employeeOfTheMonth</span><span style="color: #007700">);<br />&nbsp;&nbsp;}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>

  <p class="para">
   <div class="example" id="example-6084">
    <p><strong>Exemple #14 Accès via l&#039;index de la propriété</strong></p>
    <div class="example-contents"><p>
     Les propriétés de l&#039;objet de données peuvent être accédées via leurs index en utilisant
     la syntaxe de tableaux. L&#039;index de la propriété est la position dont la propriété
     apparaît dans le modèle (dans ce cas, le schéma XML). Nous pouvons voir
     dans le schéma listé ci-dessus que l&#039;attribut du nom de la compagnie
     est la seconde propriété de la compagnie (l&#039;interface SDO ne fait pas de distinction
     entre les attributs XML et les éléments). Ce qui suit va définir le nom de la compagnie
     en <code class="literal">&quot;Acme&quot;</code>, avec le même résultat que lors de
     l&#039;<a href="sdo.sample.getset.html#sdo.examples.propname" class="link">accès via le nom de la propriété</a>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$company</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'Acme'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     L&#039;utilisation directe de l&#039;index dans ce cas est fragile. Normalement, la syntaxe
     reposant sur le nom de la propriété est préférable, mais l&#039;index des propriétés
     peut être nécessaire dans des cas très spéciaux.
    </p></div>
   </div>
  </p>

 </div></div></div></body></html>