<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>&Eacute;volutions incompatibles avec les versions pr&eacute;c&eacute;dentes</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="migration72.constants.html">« Nouvelles constantes globales</a></li>
      <li style="float: right;"><a href="migration72.deprecated.html">Fonctionnalit&eacute;s devenues obsol&egrave;tes en PHP 7.2.x »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="migration72.html">Migration de PHP 7.1.x vers PHP 7.2.x</a></li>
    <li>&Eacute;volutions incompatibles avec les versions pr&eacute;c&eacute;dentes</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="migration72.incompatible" class="sect1">
 <h2 class="title">Évolutions incompatibles avec les versions précédentes</h2>

 <div class="sect2" id="migration72.incompatible.number_format-no-neg-zero">
  <h3 class="title">Empêcher <span class="function"><a href="function.number-format.html" class="function">number_format()</a></span> de retourner zéro négatif</h3>

  <p class="para">
   Auparavant, il était possible pour la fonction 
   <span class="function"><a href="function.number-format.html" class="function">number_format()</a></span> retourne <code class="literal">-0</code>. 
   Bien que cela soit parfaitement valide conformément à la norme &quot;IEEE 754 
   floating point spécification&quot;, cette bizarrerie n&#039;était pas souhaitable 
   pour l’affichage des nombres mis en forme sous une forme lisible par l&#039;homme.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">number_format</span><span style="color: #007700">(-</span><span style="color: #0000BB">0.01</span><span style="color: #007700">));&nbsp;</span><span style="color: #FF8000">//&nbsp;maintenant&nbsp;affiche&nbsp;string(1)&nbsp;"0"&nbsp;à&nbsp;la&nbsp;place&nbsp;de&nbsp;string(2)&nbsp;"-0"</span>
</span>
</code></div>
   </div>

  </div>
 </div>

 <div class="sect2" id="migration72.incompatible.object-array-casts">
  <h3 class="title">Conversion des clés numériques dans les objets et tableau lors de cast</h3>

  <p class="para">
   Les clé numériques sont maintenant mieux appréhendées lors de cast
   d&#039;un tableau en objets et d&#039;objets en tableaux (cast explicite ou par 
   la fonction <span class="function"><a href="function.settype.html" class="function">settype()</a></span>).
  </p>

  <p class="para">
   Cela signifie que les clés représentées par un entier (ou un entier sous 
   forme de texte) d&#039;un tableau casté en objet sont désormais accessibles :
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;tableau&nbsp;vers&nbsp;un&nbsp;objet<br /></span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #0000BB">0&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">$obj&nbsp;</span><span style="color: #007700">=&nbsp;(object)</span><span style="color: #0000BB">$arr</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;{</span><span style="color: #DD0000">'0'</span><span style="color: #007700">},&nbsp;</span><span style="color: #FF8000">//&nbsp;désormais&nbsp;accessible<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;{</span><span style="color: #0000BB">0</span><span style="color: #007700">}&nbsp;</span><span style="color: #FF8000">//&nbsp;désormais&nbsp;accessible<br /></span><span style="color: #007700">);</span>
</span>
</code></div>
   </div>

   <p class="para">L&#039;exemple ci-dessus va afficher :</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
object(stdClass)#1 (1) {
  [&quot;0&quot;]=&gt;    // désormais clé texte plutôt qu&#039;une clé entière
  int(1)
}
int(1)
int(1)
</pre></div>
   </div>
  </div>

  <p class="para">
   Et entier (ou entier sous forme de texte) clés des objets casté en 
   tableaux sont désormais accessibles :
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;objet&nbsp;vers&nbsp;tableau<br /></span><span style="color: #0000BB">$obj&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;class&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">__construct</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;{</span><span style="color: #0000BB">0</span><span style="color: #007700">}&nbsp;=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />};<br /></span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">=&nbsp;(array)</span><span style="color: #0000BB">$obj</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],&nbsp;</span><span style="color: #FF8000">//&nbsp;désormais&nbsp;accessible<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #DD0000">'0'</span><span style="color: #007700">]&nbsp;</span><span style="color: #FF8000">//&nbsp;désormais&nbsp;accessible<br /></span><span style="color: #007700">);</span>
</span>
</code></div>
   </div>

   <p class="para">L&#039;exemple ci-dessus va afficher :</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
array(1) {
  [0]=&gt;    // désormais clé entière plutôt qu&#039;une clé texte
  int(1)
}
int(1)
int(1)
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect2" id="migration72.incompatible.no-null-to-get_class">
  <h3 class="title">Interdire de passer <strong><code>NULL</code></strong> à <span class="function"><a href="function.get-class.html" class="function">get_class()</a></span></h3>

  <p class="para">
   Auparavent, passer <strong><code>NULL</code></strong> à la fonction <span class="function"><a href="function.get-class.html" class="function">get_class()</a></span>
   retournait le nom de la classe en cours. Ce comportement a été supprimé,
   une erreur <strong><code>E_WARNING</code></strong> est affiché à la place.
   Pour retrouver le même comportement qu&#039;avant, l’argument devrait 
   simplement être supprimé.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.warn-on-non-countable-types">
  <h3 class="title">Avertir lors du comptage des types non dénombrables</h3>

  <p class="para">
   Un <strong><code>E_WARNING</code></strong> sera émis lors de la tentative de 
   d&#039;utilisation de la fonction <span class="function"><a href="function.count.html" class="function">count()</a></span> sur un 
   type non dénombrable (cela inclut la fonction alias 
   <span class="function"><a href="function.sizeof.html" class="function">sizeof()</a></span>).
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />var_dump</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">),&nbsp;</span><span style="color: #FF8000">//&nbsp;NULL&nbsp;is&nbsp;not&nbsp;countable<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">),&nbsp;</span><span style="color: #FF8000">//&nbsp;un&nbsp;entier&nbsp;n'est&nbsp;pas&nbsp;dénombrable<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #DD0000">'abc'</span><span style="color: #007700">),&nbsp;</span><span style="color: #FF8000">//&nbsp;une&nbsp;chaîne&nbsp;n'est&nbsp;pas&nbsp;dénombrable<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">stdclass</span><span style="color: #007700">),&nbsp;</span><span style="color: #FF8000">//&nbsp;un&nbsp;objet&nbsp;qui&nbsp;n'implémente&nbsp;pas&nbsp;l'interface&nbsp;Countable&nbsp;n'est&nbsp;pas&nbsp;dénombrable<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">([</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">])&nbsp;</span><span style="color: #FF8000">//&nbsp;un&nbsp;tableau&nbsp;est&nbsp;dénombrable<br /></span><span style="color: #007700">);</span>
</span>
</code></div>
   </div>

   <p class="para">L&#039;exemple ci-dessus va afficher :</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
Warning: count(): Parameter must be an array or an object that implements Countable in %s on line %d

Warning: count(): Parameter must be an array or an object that implements Countable in %s on line %d

Warning: count(): Parameter must be an array or an object that implements Countable in %s on line %d

Warning: count(): Parameter must be an array or an object that implements Countable in %s on line %d
int(0)
int(1)
int(1)
int(1)
int(2)
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect2" id="migration72.incompatible.hash-ext-to-objects">
  <h3 class="title">Remplacement ext/hash de ressources en objets</h3>

  <p class="para">
   Dans le cadre de la migration à long terme de ressources, l’extension 
   <a href="book.hash.html" class="link">Hash</a> a été mise à jour pour utiliser les 
   objets au lieu de ressources. Le changement devrait être transparent pour 
   les développeurs PHP, à l’exception où des vérifications avec 
   <span class="function"><a href="function.is-resource.html" class="function">is_resource()</a></span> 
   ont été faites (il sera nécessaire de remplacer par 
   <span class="function"><a href="function.is-object.html" class="function">is_object()</a></span>).
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.ssl-tls-defaults">
  <h3 class="title">Améliorer les valeurs par défaut SSL/TLS</h3>

  <p class="para">
   Les modifications suivantes concernant les valeurs par défaut ont été apportées :
  </p>

  <ul class="itemizedlist">
   <li class="listitem">
    <span class="simpara">
     <code class="literal">tls://</code> maintenant par défaut TLSv1.0 ou TLSv1.1 ou TLSv1.2
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <code class="literal">ssl://</code> est un alias de <code class="literal">tls://</code>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <code class="literal">STREAM_CRYPTO_METHOD_TLS_*</code> constantes par défaut de 
     TLSv1.0 ou TLSv1.1 + TLSv1.2, à la place de TLSv1.0 uniquement.
    </span>
   </li>
  </ul>
 </div>

 <div class="sect2" id="migration72.incompatible.gettype-on-closed-resource">
  <h3 class="title"><span class="function"><a href="function.gettype.html" class="function">gettype()</a></span> valeur de retour sur les ressources fermées</h3>

  <p class="para">
   Auparavant, l&#039;utilisation de <span class="function"><a href="function.gettype.html" class="function">gettype()</a></span> sur une ressource 
   fermée retournait une chaîne <code class="literal">&quot;unknown type&quot;</code>. Maintenant, 
   la chaîne <code class="literal">&quot;resource (closed)&quot;</code> sera retournée.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.is_object-on-incomplete_class">
  <h3 class="title"><span class="function"><a href="function.is-object.html" class="function">is_object()</a></span> et <strong class="classname">__PHP_Incomplete_Class</strong></h3>

  <p class="para">
   Auparavant, l&#039;utilisation de <span class="function"><a href="function.is-object.html" class="function">is_object()</a></span> sur la classe 
   <strong class="classname">__PHP_Incomplete_Class</strong> retournait <strong><code>FALSE</code></strong>. 
   Maintenant, <strong><code>TRUE</code></strong> sera retourné.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.undefined-constants">
  <h3 class="title">Augmentation du niveau d&#039;erreur des constantes non définies</h3>

  <p class="para">
   Les références non qualifiées aux constantes non définies généreront 
   désormais une <strong><code>E_WARNING</code></strong> (à la place d&#039;une <strong><code>E_NOTICE</code></strong>).
   Dans la prochaine version majeure de PHP, ils généreront une exception 
   <a href="class.error.html" class="classname">Error</a>.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.windows-support">
  <h3 class="title">Prise en charge de Windows</h3>

  <p class="para">
   Les versions minimales officiellement supportées pour Windows sont Windows 7/
   Server 2008 R2.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.trait-properties">
  <h3 class="title">Vérification des valeurs par défaut des propriétés des traits</h3>

  <p class="para">
   Les contrôles de compatibilité sur les valeurs par défaut des propriétés de trait n&#039;effectueront plus la conversion.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.object-reserved-word">
  <h3 class="title"><code class="literal">object</code> pour les noms de classes</h3>

  <p class="para">
   Le nom <code class="literal">object</code> était précédement soft-réservé en PHP 7.0.
   Il est maintenant réservé, interdisant son utilisation comme nom de classe, 
   de trait ou d&#039;interface.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.netware-support">
  <h3 class="title">Prise en charge de NetWare</h3>

  <p class="para">
   La prise en charge de NetWare a maintenant été supprimée.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.array-unique">
  <h3 class="title"><span class="function"><a href="function.array-unique.html" class="function">array_unique()</a></span> avec <strong><code>SORT_STRING</code></strong></h3>

  <p class="para">
   Alors que <span class="function"><a href="function.array-unique.html" class="function">array_unique()</a></span> avec <strong><code>SORT_STRING</code></strong> 
   anciennement copiait le tableau et supprimait des éléments non uniques
   (sans emballer le tableau par la suite), maintenant un nouveau tableau
   est construit en ajoutant les éléments uniques.
   Cela peut entraîner des index numériques différents.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.bcmod-and-floats">
  <h3 class="title"><span class="function"><a href="function.bcmod.html" class="function">bcmod()</a></span> change pour des nombres décimaux</h3>

  <p class="para">
   La fonction <span class="function"><a href="function.bcmod.html" class="function">bcmod()</a></span> ne tronque plus les nombres 
   fractionnaires en entier. En tant que tel, son comportement suit maintenant 
   <span class="function"><a href="function.fmod.html" class="function">fmod()</a></span>, plutôt que l&#039;opérateur <code class="literal">%</code>.
   Par exemple <code class="literal">bcmod(&#039;4&#039;, &#039;3.5&#039;)</code> retourne maintenant 
   <code class="literal">0.5</code> à la place de <code class="literal">1</code>.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.hash-functions">
  <h3 class="title">Fonctions de hachage et hachages non cryptographiques</h3>

  <p class="para">
   Les fonctions <span class="function"><a href="function.hash-hmac.html" class="function">hash_hmac()</a></span>, <span class="function"><a href="function.hash-hmac-file.html" class="function">hash_hmac_file()</a></span>,
   <span class="function"><a href="function.hash-pbkdf2.html" class="function">hash_pbkdf2()</a></span>, et <span class="function"><a href="function.hash-init.html" class="function">hash_init()</a></span> (avec
   <strong><code>HASH_HMAC</code></strong>) n&#039;acceptent plus les hachages non cryptographiques.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.json_decode-changes">
  <h3 class="title">Options de la fonction <span class="function"><a href="function.json-decode.html" class="function">json_decode()</a></span></h3>

  <p class="para">
   L&#039;option <strong><code>JSON_OBJECT_AS_ARRAY</code></strong> de la fonction 
   <span class="function"><a href="function.json-decode.html" class="function">json_decode()</a></span> est maintenant utilisé si le second paramètre 
   (assoc) est <strong><code>NULL</code></strong>. Précédement <strong><code>JSON_OBJECT_AS_ARRAY</code></strong> a 
   toujours été ignoré.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.rand-mt_rand-output">
  <h3 class="title">Sortie de <span class="function"><a href="function.rand.html" class="function">rand()</a></span> et <span class="function"><a href="function.mt-rand.html" class="function">mt_rand()</a></span></h3>

  <p class="para">
   Les séquences générées par <span class="function"><a href="function.rand.html" class="function">rand()</a></span> et
   <span class="function"><a href="function.mt-rand.html" class="function">mt_rand()</a></span> pour des cas spécifiques peuvent différer 
   de PHP 7.1 sur les machines 64 bits (en raison de la correction d&#039;un bug 
   dans l&#039;implémentation de la polarisation du modulo).
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.sqlsafe_mode-ini-setting">
  <h3 class="title">Suppression du paramètre INI <a href="ini.core.html#ini.sql.safe-mode" class="link"><code class="parameter">sql.safe_mode</code></a></h3>

  <p class="para">
   Le paramètre INI <code class="parameter">sql.safe_mode</code> a maintenant été supprimé.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.date_parse_from_format">
  <h3 class="title">Changement dans <span class="function"><a href="function.date-parse.html" class="function">date_parse()</a></span> et <span class="function"><a href="function.date-parse-from-format.html" class="function">date_parse_from_format()</a></span></h3>

  <p class="para">
   L&#039;élément de <code class="literal">zone</code> du tableau retourné par <span class="function"><a href="function.date-parse.html" class="function">date_parse()</a></span> et 
   <span class="function"><a href="function.date-parse-from-format.html" class="function">date_parse_from_format()</a></span> représente des secondes au lieu des 
   minutes, et son signe est inversé. Par exemple <code class="literal">-120</code> est 
   maintenant <code class="literal">7200</code>.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.cookie-decode">
  <h3 class="title">Incoming Cookies</h3>

  <p class="para">
   Depuis PHP 7.2.34, le <em class="emphasis">nom</em> des cookies entrants ne sont plus
   url-décodés pour des raisons de sécurité.
  </p>
 </div>
</div></div></div></body></html>