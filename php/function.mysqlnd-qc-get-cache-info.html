<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Retourne des informations sur le gestionnaire courant</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.mysqlnd-qc-get-available-handlers.html">« mysqlnd_qc_get_available_handlers</a></li>
      <li style="float: right;"><a href="function.mysqlnd-qc-get-core-stats.html">mysqlnd_qc_get_core_stats »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.mysqlnd-qc.html">Fonctions mysqlnd_qc</a></li>
    <li>Retourne des informations sur le gestionnaire courant</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.mysqlnd-qc-get-cache-info" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mysqlnd_qc_get_cache_info</h1>
  <p class="verinfo">(PECL mysqlnd_qc &gt;= 1.0.0)</p><p class="refpurpose"><span class="refname">mysqlnd_qc_get_cache_info</span> &mdash; <span class="dc-title">Retourne des informations sur le gestionnaire courant</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.mysqlnd-qc-get-cache-info-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   
   <span class="methodname"><strong>mysqlnd_qc_get_cache_info</strong></span>
    ( <span class="methodparam">void</span>
   ) : <span class="type">array</span></div>

  <p class="para rdfs-comment">
   
  </p>
  
 </div>

 
 <div class="refsect1 parameters" id="refsect1-function.mysqlnd-qc-get-cache-info-parameters">
  <h3 class="title">Liste de paramètres</h3>
  <p class="para">Cette fonction ne contient aucun paramètre.</p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.mysqlnd-qc-get-cache-info-returnvalues">
  <h3 class="title">Valeurs de retour</h3>
  <p class="para">
   Retourne des informations sur le gestionnaire courant, le nombre
   d&#039;entrées du cache ainsi que les entrées du cache, si disponible.
   Les données retournées depuis les entrées du cache dépendent du
   gestionnaire de stockage actif. Le gestionnaire de stockage
   est libre de retourner n&#039;importe quelle donnée. Les gestionnaires
   de stockage sont invités à retourner au moins les données fournies
   par le gestionnaire par défaut, si c&#039;est techniquement possible.
  </p>
  <p class="para">
   Le scope de l&#039;information est le processus PHP. Suivant le modèle
   de déploiement PHP, un processus peut servir une ou plusieurs
   requêtes web.
  </p>
  <p class="para">
   Les valeurs sont aggrégées pour toutes les activités du cach par gestionnaire
   de stockage. Il n&#039;est pas possible de dire le nombre de requêtes provenant
   de <code class="literal">mysqli</code>, <code class="literal">PDO_MySQL</code> ou <code class="literal">mysql</code>.
   Les appels API ont contribués aux valeurs des données aggrégées. Utilisez
   la fonction <span class="function"><a href="function.mysqlnd-qc-get-core-stats.html" class="function">mysqlnd_qc_get_core_stats()</a></span>
   pour récupérer les données aggrégées pour tous les gestionnaires de stockage.
  </p>
  <p class="para">
   Tableau des informations du cache
  </p>
  <p class="para">
   <dl>

    
     <dt>

      <code class="parameter">handler</code>
      <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
     </dt>

     <dd>

      <p class="para">
       Le gestionnaire de stockage actif.
      </p>
      <p class="para">
       Tout gestionnaire de stockage. Depuis 1.0.0.
      </p>
     </dd>

    
    
     <dt>

      <code class="parameter">handler_version</code>
      <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
     </dt>

     <dd>

      <p class="para">
       La version du gestionnaire de stockage actif.
      </p>
      <p class="para">
       Tout gestionnaire de stockage. Depuis 1.0.0.
      </p>
     </dd>

    
    
     <dt>

      <code class="parameter">num_entries</code>
      <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
     </dt>

     <dd>

      <p class="para">
       Le nombre d&#039;entrées dans le cache. La valeur dépend du gestionnaire
       de stockage utilisé.
      </p>
      <p class="para">
       Par défaut, les gestionnaires de stockage APC et SQLite fournissent
       le nombre actuel d&#039;entrées dans le cache.
      </p>
      <p class="para">
       Le gestionnaire de stockage MEMCACHE retourne toujours <code class="literal">0</code>.
       MEMCACHE ne suppose pas le comptage du nombre d&#039;entrées dans le cache.
      </p>
      <p class="para">
       Si un gestionnaire de stockage défini par l&#039;utilisateur est utilisé,
       le nombre d&#039;entrées de la propriété <code class="literal">data</code> sera retourné.
      </p>
      <p class="para">
       Depuis 1.0.0.
      </p>
     </dd>

    
    
     <dt>

      <code class="parameter">data</code>
      <span class="type"><a href="language.types.array.html" class="type array">array</a></span>
     </dt>

     <dd>

      <p class="para">
       La version du gestionnaire de stockage actif.
      </p>
      <p class="para">
       Certains gestionnaires de stockage dépendant des données
       contenues dans les entrées du cache. Le gestionnaire de
       stockage est sollicité pour fournir des informations similaires
       et comparables. Un gestionnaire de stockage défini par l&#039;utilisateur
       est libre de retourner n&#039;importe quelle donnée.
      </p>
      <p class="para">
       Depuis 1.0.0.
      </p>
      <p class="para">
       Les informations suivantes sont fournies par le gestionnaire
       de stockage par défaut pour la propriété <code class="literal">data</code>.
      </p>
      <p class="para">
       La proriété <code class="literal">data</code> contient un hashage.
       Ce hashage est indexé par l&#039;identifiant de l&#039;entrée du cache interne
       du gestionnaire de stockage. L&#039;identifiant de l&#039;entrée du cache
       est humainement lisible et contient la chaîne de requête correspondante
       à l&#039;entrée du cache. Reportez-vous à l&#039;exemple ci-dessous. Les données
       suivantes sont fournies pour chaque entrée du cache.
      </p>
      <p class="para">
       <dl>

        
         <dt>

          <code class="parameter">statistics</code>
          <span class="type"><a href="language.types.array.html" class="type array">array</a></span>
         </dt>

         <dd>

          <p class="para">
           Statistiques de l&#039;entrée du cache.
          </p>
          <p class="para">
           Depuis 1.0.0.
          </p>
          <table class="doctable informaltable">
           
            <col width="1*" />
            <col width="7*" />
            <col width="2*" />
            <thead>
             <tr>
              <th>Propriété</th>
              <th>Description</th>
              <th>Version</th>
             </tr>

            </thead>

            <tbody class="tbody">
             <tr>
              <td>
               <code class="literal">rows</code>
              </td>
              <td>
               Nombre de lignes contenues dans le jeu de résultats mis en cache.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <code class="literal">stored_size</code>
              </td>
              <td>
               La taille du jeu de résultats mis en cache, en octets.
               C&#039;est la taille occupée en charge. Cette valeur n&#039;est pas
               pertinante pour calculer le nombre total de mémoires
               consommées par toutes les entrées du cache, incluant
               les données administratives des entrées de cache.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <code class="literal">cache_hits</code>
              </td>
              <td>
               Le nombre de fois que l&#039;entrée du cache a été servie.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <code class="literal">run_time</code>
              </td>
              <td>
               Durée d&#039;exécution de la requête pour cette entrée du cache.
               C&#039;est la durée d&#039;exécution de la requête non mise en cache.
               C&#039;est le temps entre l&#039;envoi de la requête MySQL et la réponse
               de MySQL. Le temps gagné en utilisant le plugin de mise en
               cache de requêtes peut être calculé ainsi :
               <code class="literal">cache_hits * ((run_time - avg_run_time) + (store_time - avg_store_time))</code>.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <code class="literal">store_time</code>
              </td>
              <td>
               Durée de stockage du jeu de résultats des requêtes appartenant à
               l&#039;entrée du cache. C&#039;est la durée de récupération et de stockage
               des résultats de requêtes non mises en cache.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <code class="literal">min_run_time</code>
              </td>
              <td>
               Temps minimal d&#039;exécution des requêtes mises en cache.
               C&#039;est le temps de recherche de la requête dans le cache.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <code class="literal">min_store_time</code>
              </td>
              <td>
               Temps minimal de stockage des requêtes mises en cache.
               Le temps prit pour récupérer le jeu de résultats du cache
               depuis le médium de stockage et de le décoder.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <code class="literal">avg_run_time</code>
              </td>
              <td>
               Temps d&#039;exécution moyen de la requête mise en cache.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <code class="literal">avg_store_time</code>
              </td>
              <td>
               Temps de stockage moyen de la requête mise en cache.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <code class="literal">max_run_time</code>
              </td>
              <td>
               Temps d&#039;exécution moyen de la requête mise en cache.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <code class="literal">max_store_time</code>
              </td>
              <td>
               Temps de stockage moyen de la requête mise en cache.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <code class="literal">valid_until</code>
              </td>
              <td>
               Timestamp lorsque l&#039;entrée du cache expire.
              </td>
              <td>Depuis 1.1.0.</td>
             </tr>

            </tbody>
           
          </table>

         </dd>

        
        
         <dt>

          <code class="parameter">metadata</code>
          <span class="type"><a href="language.types.array.html" class="type array">array</a></span>
         </dt>

         <dd>

          <p class="para">
           Les méta-données de l&#039;entrée du cache.
           Ce sont les méta-données fournies par MySQL en plus du jeu
           de résultats de la requête en question. Des versions différentes
           du serveur MySQL peuvent retourner des méta-données différentes.
           Contrairement à d&#039;autres extensions PHP MySQL, aucune tentative
           n&#039;est effectuée pour cacher à l&#039;appelant des informations quant
           à la version du serveur MySQL ainsi qu&#039;à ces détails.
           Reportez-vous à la documentation de l&#039;API C MySQL appartenant
           au serveur MySQL utilisé pour plus de détails.
          </p>
          <p class="para">
           La liste des méta-données contient une entrée pour chaque colonne.
          </p>
          <p class="para">
           Depuis 1.0.0.
          </p>
          <table class="doctable informaltable">
           
            <col width="1*" />
            <col width="7*" />
            <col width="2*" />
            <thead>
             <tr>
              <th>Propriété</th>
              <th>Description</th>
              <th>Version</th>
             </tr>

            </thead>

            <tbody class="tbody">
             <tr>
              <td>
               <code class="literal">name</code>
              </td>
              <td>
               LLe nom du champ. Suivant la version MySQL, ce peut
               être l&#039;alias du nom du champ.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <code class="literal">org_name</code>
              </td>
              <td>
               Le nom du champ.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <code class="literal">table</code>
              </td>
              <td>
               Le nom de la table. Si un alias du nom est utilisé pour la table,
               ce champ contiendra le nom de l&#039;alias.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <code class="literal">org_table</code>
              </td>
              <td>
               Le nom de la table.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <code class="literal">db</code>
              </td>
              <td>
               Le nom de la base de données/du shéma.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <code class="literal">max_length</code>
              </td>
              <td>
               La taille maximale du champ. Les détails peuvent
               varier suivant les versions du serveur MySQL.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <code class="literal">length</code>
              </td>
              <td>
               La taille du champ. Les détails peuvent varier suivant les versions
               du serveur MySQL.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <code class="literal">type</code>
              </td>
              <td>
               Le type de données du champ. Les détails peuvent varier suivant les
               versions du serveur MySQL utilisé. C&#039;est la valeur de la constante
               type de l&#039;API C MySQL. Il est recommandé d&#039;utiliser les variables type
               fournies par l&#039;extension <code class="literal">mysqli</code> aux fins de test
               pour en connaitre la signification. Vous ne devriez pas tester les
               valeurs de certain type en les comparant avec certains nombres.
              </td>
              <td>Depuis 1.0.0.</td>
             </tr>

            </tbody>
           
          </table>

         </dd>

        
       </dl>

      </p>
      <p class="para">
       Le gestionnaire de stockage APC retourne la même information
       pour la propriété <code class="literal">data</code> mais pas pour la
       propriété <code class="literal">metadata</code>.
       Les <code class="literal">metadata</code> d&#039;une entrée du cache est défini à
       <code class="literal">NULL</code>.
      </p>
      <p class="para">
       Le gestionnaire de stockage MEMCACHE ne renseigne pas la propriété
       <code class="literal">data</code>. Les statistiques ne sont pas disponibles
       pour chaque entrée du cache avec ce gestionnaire de stockage.
      </p>
      <p class="para">
       Un gestionnaire de stockage défini par l&#039;utilisateur est libre
       de fournir toute sorte de données.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.mysqlnd-qc-get-cache-info-examples">
  <h3 class="title">Exemples</h3>
  <div class="example" id="example-2279">
   <p><strong>Exemple #1 Exemple avec <span class="function"><strong>mysqlnd_qc_get_cache_info()</strong></span></strong></p>
   <div class="example-contents"><p>
    L&#039;exemple ci-dessous montre l&#039;affiche depuis le gestionnaire
    de stockage interne par défaut. Les autres gestionnaires
    de stockage peuvent retourner des données différentes.
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;Peuple&nbsp;le&nbsp;cache,&nbsp;i.e.&nbsp;en&nbsp;utilisant&nbsp;mysqli&nbsp;*/<br /></span><span style="color: #0000BB">$mysqli&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">"host"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"user"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"password"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"schema"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"/*"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">MYSQLND_QC_ENABLE_SWITCH&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"*/SELECT&nbsp;id&nbsp;FROM&nbsp;test"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;Affiche&nbsp;les&nbsp;informations&nbsp;du&nbsp;cache&nbsp;*/<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">mysqlnd_qc_get_cache_info</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>Les exemples ci-dessus vont afficher :</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
array(4) {
 [&quot;num_entries&quot;]=&gt;
 int(1)
 [&quot;handler&quot;]=&gt;
 string(7) &quot;default&quot;
 [&quot;handler_version&quot;]=&gt;
 string(5) &quot;1.0.0&quot;
 [&quot;data&quot;]=&gt;
 array(1) {
   [&quot;Localhost via UNIX socket 3306 user schema|/*qc=on*/SELECT id FROM test&quot;]=&gt;
   array(2) {
     [&quot;statistics&quot;]=&gt;
     array(11) {
       [&quot;rows&quot;]=&gt;
       int(6)
       [&quot;stored_size&quot;]=&gt;
       int(101)
       [&quot;cache_hits&quot;]=&gt;
       int(0)
       [&quot;run_time&quot;]=&gt;
       int(471)
       [&quot;store_time&quot;]=&gt;
       int(27)
       [&quot;min_run_time&quot;]=&gt;
       int(0)
       [&quot;max_run_time&quot;]=&gt;
       int(0)
       [&quot;min_store_time&quot;]=&gt;
       int(0)
       [&quot;max_store_time&quot;]=&gt;
       int(0)
       [&quot;avg_run_time&quot;]=&gt;
       int(0)
       [&quot;avg_store_time&quot;]=&gt;
       int(0)
     }
     [&quot;metadata&quot;]=&gt;
     array(1) {
       [0]=&gt;
       array(8) {
         [&quot;name&quot;]=&gt;
         string(2) &quot;id&quot;
         [&quot;orig_name&quot;]=&gt;
         string(2) &quot;id&quot;
         [&quot;table&quot;]=&gt;
         string(4) &quot;test&quot;
         [&quot;orig_table&quot;]=&gt;
         string(4) &quot;test&quot;
         [&quot;db&quot;]=&gt;
         string(4) &quot;schema&quot;
         [&quot;max_length&quot;]=&gt;
         int(1)
         [&quot;length&quot;]=&gt;
         int(11)
         [&quot;type&quot;]=&gt;
         int(3)
       }
     }
   }
 }
}

</pre></div>
   </div>
   
  </div>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-function.mysqlnd-qc-get-cache-info-seealso">
  <h3 class="title">Voir aussi</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member">
     <span class="function"><a href="function.mysqlnd-qc-get-core-stats.html" class="function" rel="rdfs-seeAlso">mysqlnd_qc_get_core_stats()</a> - Statistiques collect&eacute;es par le c&oelig;ur du cache des requ&ecirc;tes</span>
    </li>
   </ul>
  </p>
 </div>

 
</div></div></div></body></html>