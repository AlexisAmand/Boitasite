<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Retourne une connexion &agrave; une base de donn&eacute;es</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.db2-conn-errormsg.html">« db2_conn_errormsg</a></li>
      <li style="float: right;"><a href="function.db2-cursor-type.html">db2_cursor_type »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.ibm-db2.html">Fonctions IBM DB2</a></li>
    <li>Retourne une connexion &agrave; une base de donn&eacute;es</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.db2-connect" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">db2_connect</h1>
  <p class="verinfo">(PECL ibm_db2 &gt;= 1.0.0)</p><p class="refpurpose"><span class="refname">db2_connect</span> &mdash; <span class="dc-title">
   Retourne une connexion à une base de données
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.db2-connect-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>db2_connect</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$database</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$username</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$password</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
  ] ) : <span class="type">resource</span></div>


  <p class="para rdfs-comment">
   Crée une nouvelle connexion à une base de données IBM DB2 Universal
   Database, IBM Cloudscape ou Apache Derby.
  </p>

 </div>

 <div class="refsect1 parameters" id="refsect1-function.db2-connect-parameters">
  <h3 class="title">Liste de paramètres</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">database</code></dt>

     <dd>

      <p class="para">
       Pour une connexion cataloguée de la base de données, <code class="parameter">database</code>
       représente l&#039;alias de la base de données dans le catalogue client DB2
      </p>
      <p class="para">
       Pour une connexion non cataloguée de la base de données, <code class="parameter">database</code>
       représente une chaîne complète de connexion qui est dans le format
       suivant :
       <pre class="literallayout">DATABASE=<code class="parameter">database</code>;HOSTNAME=<code class="parameter">hostname</code>;PORT=<code class="parameter">port</code>;PROTOCOL=TCPIP;UID=<code class="parameter">username</code>;PWD=<code class="parameter">password</code>;</pre>
       où les paramètres représentent les valeurs suivantes :
       <dl>

        
         <dt>
<code class="parameter">database</code></dt>

         <dd>

          <p class="para">
           Le nom de la base de données.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">hostname</code></dt>

         <dd>

          <p class="para">
           L&#039;adresse Internet ou IP du serveur de base de données.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">port</code></dt>

         <dd>

          <p class="para">
           Le port TCP/IP sur lequel la base de données écoute les
           connexions.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">username</code></dt>

         <dd>

          <p class="para">
           Le nom d&#039;utilisateur avec lequel vous vous connectez à la base de
           données.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">password</code></dt>

         <dd>

          <p class="para">
           Le mot de passe avec lequel vous vous connectez à la base de
           données.
          </p>
         </dd>

        
       </dl>

      </p>
     </dd>

    
    
     <dt>
<code class="parameter">username</code></dt>

     <dd>

      <p class="para">
       Le nom d&#039;utilisateur avec lequel vous vous connectez à la base de
       données.
      </p>
      <p class="para">
       Pour les connexions non cataloguées, vous devez passer une valeur
       <strong><code>NULL</code></strong> ou une chaîne vide.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">password</code></dt>

     <dd>

      <p class="para">
       Le mot de passe avec lequel vous vous connectez à la base de
       données.
      </p>
      <p class="para">
       Pour les connexions non cataloguées, vous devez passer une valeur
       <strong><code>NULL</code></strong> ou une chaîne vide.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">options</code></dt>

     <dd>

      <p class="para">
       Un tableau associatif des options de connexion qui affecteront le
       comportement de la connexion, où les valeurs des clés incluent :
       <dl>

        
         <dt>
<code class="parameter">autocommit</code></dt>

         <dd>

          <p class="para">
           La valeur <code class="literal">DB2_AUTOCOMMIT_ON</code> active l&#039;autocommit
           sur cette connexion.
          </p>
          <p class="para">
           La valeur <code class="literal">DB2_AUTOCOMMIT_OFF</code> désactive le
           autocommit pour cette connexion.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">DB2_ATTR_CASE</code></dt>

         <dd>

          <p class="para">
           Passer la valeur <code class="literal">DB2_CASE_NATURAL</code> spécifie que les
           noms de colonnes seront retournés dans leurs casses naturelles.
          </p>
          <p class="para">
           Passer la valeur <code class="literal">DB2_CASE_LOWER</code> spécifie que les
           noms de colonnes seront retournés en minuscule.
          </p>
          <p class="para">
           Passer la valeur <code class="literal">DB2_CASE_UPPER</code> spécifie que les
           noms de colonnes seront retournés en majuscule.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">CURSOR</code></dt>

         <dd>

          <p class="para">
           Passer la valeur <code class="literal">DB2_FORWARD_ONLY</code> spécifie un curseur
           uniquement suivant pour une ressource de requête. C&#039;est le type de curseur
           par défaut et est supporté sur tous les serveurs de base de données.
          </p>
          <p class="para">
           Passer la valeur <code class="literal">DB2_SCROLLABLE</code> spécifie un
           curseur scrollable pour une ressource de requête. Ce mode permet
           un accès aléatoire aux lignes dans un jeu de résultats, mais actuellement,
           n&#039;est supporté que par la base de données IBM DB2 Universal.
          </p>
         </dd>

        
       </dl>

      </p>
      <p class="para">
       La nouvelle option suivante est disponible pour les versions ibm_db2 1.7.0 et
       suivantes.
       <dl>

        
         <dt>
<code class="parameter">trustedcontext</code></dt>

         <dd>

          <p class="para">
           Le fait de passer la valeur DB2_TRUSTED_CONTEXT_ENABLE active le contexte
           pour ce gestionnaire de connexion. Ce paramètre ne peut être défini avec
           la fonction <span class="function"><a href="function.db2-set-option.html" class="function">db2_set_option()</a></span>.
          </p>
          <p class="para">
           Cette clé fonctionne uniquement si la base de données est cataloguée
           (même si la base de données est locale), ou si vous spécifiez le DSN complet
           lors de la création de la connexion.
          </p>
          <p class="para">
           Pour catalogue la base de données, utilisez les commandes suivantes :
          </p>
          <p class="para">
           <pre class="literallayout">db2 catalog tcpip node loopback remote &lt;SERVERNAME&gt; server &lt;SERVICENAME&gt;
db2 catalog database &lt;LOCALDBNAME&gt; as &lt;REMOTEDBNAME&gt; at node loopback
db2 &quot;update dbm cfg using svcename &lt;SERVICENAME&gt;&quot;
db2set DB2COMM=TCPIP</pre>
          </p>
         </dd>

        
      </dl>

      </p>
      <p class="para">
       Les nouvelles options i5/OS suivantes sont disponibles dans les versions
       ibm_db2 1.5.1 et suivantes.
       <dl>

        
         <dt>
<code class="parameter">i5_lib</code></dt>

         <dd>

          <p class="para">
           Un caractère qui indique la bibliothèque par défaut qui sera
           utilisée pour résoudre les références aux fichiers non qualifiées.
           Ceci n&#039;est pas valide si la connexion utilise un mode de système de
           nom.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_naming</code></dt>

         <dd>

          <p class="para">
           La valeur <code class="literal">DB2_I5_NAMING_ON</code> active DB2 UDB Cli
           iSeries mode système de nom. Les fichiers sont qualifiés en
           utilisant le délimiteur slash (/). Les fichiers non qualifiés sont
           résolus en utilisant la liste de bibliothèque pour le travail.
          </p>
          <p class="para">
           La valeur <code class="literal">DB2_I5_NAMING_OFF</code> désactive DB2 UDB
           CLI mode de nom par défaut, qui est l&#039;écriture SQL. Les fichiers
           sont qualifiés en utilisant le délimiteur point (.). Les fichiers
           non qualifiés sont résolus en utilisant soit la bibliothèque par
           défaut ou l&#039;ID de l&#039;usager courant.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_commit</code></dt>

         <dd>

          <p class="para">
           L&#039;attribut <code class="parameter">i5_commit</code> devrait être fixé avant
           l&#039;appel à <span class="function"><strong>db2_connect()</strong></span>. Si la valeur est
           changée après que la connexion ait été établie et que la connexion
           est à une source de données distance, le changement ne prendra
           effet qu&#039;au prochain appel de <span class="function"><strong>db2_connect()</strong></span>.
          </p>
          <blockquote class="note"><p><strong class="note">Note</strong>: 
            <p class="para">
            La configuration php.ini <code class="parameter">ibm_db2.i5_allow_commit</code>==0
            ou <code class="literal">DB2_I5_TXN_NO_COMMIT</code> est par défaut, mais
            peut être dérivée avec l&#039;option <code class="parameter">i5_commit</code>.
            </p>
          </p></blockquote>
          <p class="para">
           <code class="literal">DB2_I5_TXN_NO_COMMIT</code> : contrôle d&#039;envoi n&#039;est pas utilisé.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_TXN_READ_UNCOMMITTED</code> : lecture ancienne,
           lecture non répétitive et fictive est possible.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_TXN_READ_COMMITTED</code> : lecture ancienne non
           possible. La lecture répétitive et fictive est possible.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_TXN_REPEATABLE_READ</code> : lecture ancienne et
           non répétitive n&#039;est pas possible. Lecture fictive est possible.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_TXN_SERIALIZABLE</code> : les transactions sont
           linéarisées. Lecture ancienne, non répétitive et fictive n&#039;est
           pas possible.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_query_optimize</code></dt>

         <dd>

          <p class="para">
            <code class="literal">DB2_FIRST_IO</code> Toutes les requêtes sont
            optimisées avec le but de retourner la première page aussi vite
            que possible. Ce but fonctionne bien lorsque l&#039;affichage est
            contrôlé par un utilisateur qui peut annuler une requête après
            avoir vu la première page des données. Les requêtes sont codées
            avec une clause <code class="literal">&quot;OPTIMIZE nnn ROWS&quot;</code> afin de 
            réussir le but spécifié par la clause.
          </p>
          <p class="para">
           <code class="literal">DB2_ALL_IO</code> Toutes les requêtes sont optimisées
           avec le but de retourner l&#039;entière requête dans le plus petit
           intervalle de temps. Ceci est une bonne option lorsque l&#039;affichage
           d&#039;une requête est en train d&#039;être écrit vers un fichier ou un
           rapport ou encore lorsque l&#039;interface met en queue les données. Les
           requêtes sont codées avec une clause <code class="literal">&quot;OPTIMIZE FOR nnn ROWS&quot;</code> afin de
           réussir le but spécifié par la clause. Ceci est l&#039;opération par
           défaut.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_dbcs_alloc</code></dt>

         <dd>

          <p class="para">
           La valeur <code class="literal">DB2_I5_DBCS_ALLOC_ON</code> active le canevas
           d&#039;allocation DB2 6X pour l&#039;accroissement des tailles des colonnes.
          </p>
          <p class="para">
           La valeur <code class="literal">DB2_I5_DBCS_ALLOC_OFF</code> désactive le
           canevas d&#039;allocation DB2 6X pour l&#039;accroissement des tailles des
           colonnes.
          </p>
          <p class="para">
           Note : la configuration <var class="filename">php.ini</var>
           <code class="parameter">ibm_db2.i5_dbcs_alloc</code>==0 ou
           <code class="literal">DB2_I5_DBCS_ALLOC_OFF</code> est par défaut mais peut
           être dérivée avec l&#039;option <code class="parameter">i5_dbcs_alloc</code>.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_date_fmt</code></dt>

         <dd>

          <p class="para">
           <code class="literal">DB2_I5_FMT_ISO</code> : le format de date de l&#039;organisation internationale de
           normalisation (ISO) <code class="literal">&quot;yyyy-mm-dd&quot;</code> est utilisé. Ceci est la valeur par
           défaut.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_FMT_USA</code> : le format de date des
           États-Unis <code class="literal">&quot;mm/dd/yyyy&quot;</code> est utilisé.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_FMT_EUR</code> : le format de date Européen
           <code class="literal">&quot;dd.mm.yyyy&quot;</code> est utilisé.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_FMT_JIS</code> : le format de date de
           l&#039;industrie japonaise des standards <code class="literal">&quot;yyyy-mm-dd&quot;</code> est utilisé.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_FMT_MDY</code> : le format de date <code class="literal">&quot;mm/dd/yyyy&quot;</code>
           est utilisé.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_FMT_DMY</code> : le format de date <code class="literal">&quot;dd/mm/yyyy&quot;</code>
           est utilisé.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_FMT_YMD</code> : le format de date <code class="literal">&quot;yy/mm/dd&quot;</code> est
           utilisé.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_FMT_JUL</code> : le format de date Julien <code class="literal">&quot;yy/ddd&quot;</code>
           est utilisé.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_FMT_JOB</code> : le valeur par défaut est utilisée.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_date_sep</code></dt>

         <dd>

          <p class="para">
           <code class="literal">DB2_I5_SEP_SLASH</code> : un slash ( / ) est utilisé
           en tant que séparateur de date.
           Ceci est la valeur par défaut.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_SEP_DASH</code> : un tiret ( : ) est utilisé en
           tant que séparateur de date.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_SEP_PERIOD</code> : un point ( . ) est utilisé
           en tant que séparateur de date.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_SEP_COMMA</code> : une virgule ( , ) est
           utilisée en tant que séparateur de date.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_SEP_BLANK</code> : un espace blanc est utilisé
           en tant que séparateur de date.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_SEP_JOB</code> : la valeur par défaut est
           utilisée.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_time_fmt</code></dt>

         <dd>

          <p class="para">
           <code class="literal">DB2_I5_FMT_ISO</code> : le format de l&#039;heure de
           l&#039;organisation internationale de normalisation <code class="literal">&quot;hh.mm.ss&quot;</code> est
           utilisé. Ceci est la valeur par défaut.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_FMT_USA</code> : le format de l&#039;heure des
           États-Unis <code class="literal">&quot;hh:mmxx&quot;</code> est utilisé, où <code class="literal">&quot;xx&quot;</code> 
           vaut <code class="literal">&quot;AM&quot;</code> ou <code class="literal">&quot;PM&quot;</code>.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_FMT_EUR</code> : le format de l&#039;heure Européen
           <code class="literal">&quot;hh.mm.ss&quot;</code> est utilisé.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_FMT_JIS</code> : le format de l&#039;heure de
           l&#039;industrie japonaise des standards <code class="literal">&quot;hh:mm:ss&quot;</code> est utilisé.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_FMT_HMS</code> : le format <code class="literal">&quot;hh:mm:ss&quot;</code> est utilisé.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_time_sep</code></dt>

         <dd>

          <p class="para">
           <code class="literal">DB2_I5_SEP_COLON</code> : un deux-points ( : ) est
           utilisé en tant que séparateur de temps. Ceci est la valeur par
           défaut.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_SEP_PERIOD</code> : un point ( . ) est utilisé
           en tant que séparateur de temps.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_SEP_COMMA</code> : une virgule ( , ) est
           utilisée en tant que séparateur de temps.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_SEP_BLANK</code> : un espace blanc est utilisé
           en tant que séparateur de temps.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_SEP_JOB</code> : la valeur par défaut est
           utilisée.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_decimal_sep</code></dt>

         <dd>

          <p class="para">
           <code class="literal">DB2_I5_SEP_PERIOD</code> : un point ( . ) est utilisé
           en tant que séparateur de décimale. Ceci est la valeur par défaut.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_SEP_COMMA</code> : une virgule ( , ) est
           utilisée en tant que séparateur de décimale.
          </p>
          <p class="para">
           <code class="literal">DB2_I5_SEP_JOB</code> : la valeur par défaut est
           utilisée.
          </p>
         </dd>

        
       </dl>

      </p>
      <p class="para">
       La nouvelle option i5/OS suivante est disponible depuis la version ibm_db2
       1.8.0 et suivantes.
       <dl>

        
         <dt>
<code class="parameter">i5_libl</code></dt>

         <dd>

          <p class="para">
           Une chaîne indiquant la liste a utilisé pour résoudre les références
           de fichiers non qualifiés. Spécifiez la liste en séparant les
           valeurs par un espace, comme ceci : &#039;i5_libl&#039;=&gt;&quot;MYLIB YOURLIB ANYLIB&quot;.
          </p>
          <blockquote class="note"><p><strong class="note">Note</strong>: 
           <p class="para">
            <code class="parameter">i5_libl</code> appelle <code class="literal">qsys2/qcmdexc(&#039;cmd&#039;,cmdlen)</code>,
            qui n&#039;est disponible que depuis i5/OS V5R4.
           </p>
          </p></blockquote>
         </dd>

        
       </dl>

      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.db2-connect-returnvalues">
  <h3 class="title">Valeurs de retour</h3>
  <p class="para">
   Retourne la ressource de connexion si la tentative de connexion réussie. Si
   la tentative de connexion échoue, <span class="function"><strong>db2_connect()</strong></span> retourne
   <strong><code>FALSE</code></strong>.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.db2-connect-examples">
  <h3 class="title">Exemples</h3>
  <p class="para">
   <div class="example" id="example-1241">
    <p><strong>Exemple #1 Création d&#039;une connexion cataloguée</strong></p>
    <div class="example-contents"><p>
     Les connexions cataloguées nécessitent que vous ayez préalablement
     catalogué la base de données spécifiée à l&#039;aide du processeur de ligne de
     commandes DB2 (<code class="literal">&quot;Command Line Processor&quot;</code> : cLP) ou avec l&#039;assistant de
     configuration de DB2.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$database&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'EXEMPLE'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$user&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ibmdb2'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$database</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br /><br />if&nbsp;(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Connexion&nbsp;réussie."</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">db2_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br />}<br />else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Connexion&nbsp;échouée."</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher :</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Connexion réussie.
</pre></div>
    </div>
   </div>
   <div class="example" id="example-1242">
    <p><strong>Exemple #2 Création d&#039;une connexion non cataloguée</strong></p>
    <div class="example-contents"><p>
     Une connexion non cataloguées vous permet de vous connecter dynamiquement
     à une base de données.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$database&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'EXEMPLE'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$user&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ibmdb2'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$port&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">50000</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"DRIVER={IBM&nbsp;DB2&nbsp;ODBC&nbsp;DRIVER};DATABASE=</span><span style="color: #0000BB">$database</span><span style="color: #DD0000">;"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;</span><span style="color: #DD0000">"HOSTNAME=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;PORT=</span><span style="color: #0000BB">$port</span><span style="color: #DD0000">;PROTOCOL=TCPIP;UID=</span><span style="color: #0000BB">$user</span><span style="color: #DD0000">;PWD=</span><span style="color: #0000BB">$password</span><span style="color: #DD0000">;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_string</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">);<br /><br />if&nbsp;(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Connexion&nbsp;réussie."</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">db2_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br />}<br />else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Connexion&nbsp;échouée."</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher :</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Connexion réussie.
</pre></div>
    </div>
   </div>
   <div class="example" id="example-1243">
    <p><strong>Exemple #3 Création d&#039;une connexion avec autocommit désactivé par défaut</strong></p>
    <div class="example-contents"><p>
     Le fait de passer un tableau d&#039;option à <span class="function"><strong>db2_connect()</strong></span>
     vous permet de modifier le comportement par défaut de la connexion.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$database&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'EXEMPLE'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$user&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ibmdb2'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'autocommit'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_AUTOCOMMIT_OFF</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$database</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br /><br />if&nbsp;(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Connexion&nbsp;réussie.\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">db2_autocommit</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Autocommit&nbsp;est&nbsp;activé.\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Autocommit&nbsp;est&nbsp;désactivé.\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">db2_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br />}<br />else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Connexion&nbsp;échouée."</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher :</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Connexion réussie.
Autocommit est désactivé.
</pre></div>
    </div>
   </div>

   <div class="example" id="example-1244">
    <p><strong>Exemple #4 Meilleure performance i5/OS</strong></p>
    <div class="example-contents"><p>
     Pour réussir à utiliser les meilleures performance de votre i5/OS ibm_db2
     1.5.1, l&#039;application PHP utilise l&#039;hôte par défaut, le userid et le mot
     de passer pour votre <span class="function"><strong>db2_connect()</strong></span>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$library&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"ADC"</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i5&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"i5_lib"</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"qsys2"</span><span style="color: #007700">));<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_exec</span><span style="color: #007700">(</span><span style="color: #0000BB">$i5</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"select&nbsp;*&nbsp;from&nbsp;systables&nbsp;where&nbsp;table_schema&nbsp;=&nbsp;'</span><span style="color: #0000BB">$library</span><span style="color: #DD0000">'"</span><span style="color: #007700">);<br />&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_fetch_both</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">))&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'TABLE_NAME'</span><span style="color: #007700">].</span><span style="color: #DD0000">"&lt;/br&gt;"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">db2_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$i5</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher :</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
ANIMALS
NAMES
PICTURES
</pre></div>
    </div>
   </div>
   <div class="example" id="example-1245">
    <p><strong>Exemple #5 Utilisation du contexte</strong></p>
    <div class="example-contents"><p>
     L&#039;exemple suivant montre comment activer le contexte, changer d&#039;utilisateur
     et récupérer l&#039;ID de l&#039;utilisateur courant.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$database&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SAMPLE"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$port&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">50000</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$authID&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"db2inst1"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$auth_pass&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"ibmdb2"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$tc_user&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"tcuser"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$tc_pass&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"tcpassword"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$dsn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"DATABASE=</span><span style="color: #0000BB">$database</span><span style="color: #DD0000">;HOSTNAME=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;PORT=</span><span style="color: #0000BB">$port</span><span style="color: #DD0000">;<br />&nbsp;&nbsp;PROTOCOL=TCPIP;UID=</span><span style="color: #0000BB">$authID</span><span style="color: #DD0000">;PWD=</span><span style="color: #0000BB">$auth_pass</span><span style="color: #DD0000">;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;array&nbsp;(</span><span style="color: #DD0000">"trustedcontext"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_TRUSTED_CONTEXT_ENABLE</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$tc_conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$dsn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br />if(</span><span style="color: #0000BB">$tc_conn</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Explicit&nbsp;trusted&nbsp;connection&nbsp;succeeded.\n"</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;if(</span><span style="color: #0000BB">db2_get_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$tc_conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"trustedcontext"</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$userBefore&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_get_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$tc_conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"trusted_user"</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//Code&nbsp;en&nbsp;tant&nbsp;qu'utilisateur&nbsp;1.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//Modification&nbsp;en&nbsp;l'utilisateur&nbsp;de&nbsp;confiance.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$parameters&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"trusted_user"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$tc_user</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"trusted_password"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$tcuser_pass</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_set_option&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$tc_conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$parameters</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$userAfter&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_get_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$tc_conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"trusted_user"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//Code&nbsp;en&nbsp;tant&nbsp;qu'utilisateur&nbsp;de&nbsp;confiance.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">$userBefore&nbsp;</span><span style="color: #007700">!=&nbsp;</span><span style="color: #0000BB">$userAfter</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"L'utilisateur&nbsp;a&nbsp;changé."&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">db2_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$tc_conn</span><span style="color: #007700">);<br />}<br />else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Le&nbsp;changement&nbsp;de&nbsp;contexte&nbsp;de&nbsp;connexion&nbsp;a&nbsp;échoué.\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher :</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Le changement de contexte de connexion a échoué.
L&#039;utilisateur a changé.
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.db2-connect-seealso">
  <h3 class="title">Voir aussi</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.db2-close.html" class="function" rel="rdfs-seeAlso">db2_close()</a> - Ferme une connexion de base de donn&eacute;es</span></li>
    <li class="member"><span class="function"><a href="function.db2-pconnect.html" class="function" rel="rdfs-seeAlso">db2_pconnect()</a> - Retourne une connexion persistante &agrave; une base de donn&eacute;es</span></li>
   </ul>
  </p>
 </div>



</div></div></div></body></html>