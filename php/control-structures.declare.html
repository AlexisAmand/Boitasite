<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>declare</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="control-structures.switch.html">« switch</a></li>
      <li style="float: right;"><a href="function.return.html">return »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.control-structures.html">Les structures de contr&ocirc;le</a></li>
    <li>declare</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="control-structures.declare" class="sect1">
 <h2 class="title"><code class="literal">declare</code></h2>
 <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p>
 <p class="para">
  L&#039;élément de langage <code class="literal">declare</code> sert à ajouter des
  directives d&#039;exécutions dans un bloc de code. La syntaxe de
  <code class="literal">declare</code> est similaire à la syntaxe des autres
  fonctions de contrôle :
  <div class="informalexample">
   <div class="example-contents">
<div class="cdata"><pre>
declare (directive)
    commandes
</pre></div>
   </div>

  </div>
 </p>
 <p class="para">
  L&#039;expression <code class="literal">directive</code> permet de contrôler l&#039;intervention
  du bloc <code class="literal">declare</code>. Actuellement, seulement trois directives
  sont reconnues : la directive <code class="literal">ticks</code> (voir plus bas pour
  plus de détails sur les 
  <a href="control-structures.declare.html#control-structures.declare.ticks" class="link">ticks</a>), la directive
  d&#039;encodage <code class="literal">encoding</code> (Voir plus bas pour plus de détails sur
  la directive
  <a href="control-structures.declare.html#control-structures.declare.encoding" class="link">encoding</a>) et la 
  directive <code class="literal">strict_types</code> (Voir la section 
  <a href="functions.arguments.html#functions.arguments.type-declaration.strict" class="link">Typage strict</a> 
  sur la page arguments de la fonction).
 </p>
 <p class="para">
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>Version</th>
      <th>Description</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>7.0.0</td>
      <td>Ajout de la directive <code class="literal">strict_types</code></td>
     </tr>

     <tr>
      <td>7.0.0</td>
      <td>
       La directive <code class="literal">ticks</code> ne fuit plus dans des unités de
       compilation différentes.
      </td>
     </tr>

     <tr>
      <td>5.3.0</td>
      <td>Ajout de la directive <code class="literal">encoding</code></td>
     </tr>

    </tbody>
   
  </table>

 </p>
<p class="para">
 Comme les directives sont gérées lors de la compilation du fichier, seulement 
 les litéraux peuvent être utilisés comme valeur de ces directives. Les variables 
 et constantes ne peuvent pas être utilisées. Pour illustrer :
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Ceci&nbsp;est&nbsp;correct:<br /></span><span style="color: #007700">declare(</span><span style="color: #0000BB">ticks</span><span style="color: #007700">=</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Ceci&nbsp;est&nbsp;incorrect:<br /></span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">TICK_VALUE&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />declare(</span><span style="color: #0000BB">ticks</span><span style="color: #007700">=</span><span style="color: #0000BB">TICK_VALUE</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 <p class="para">
  L&#039;expression <code class="literal">commandes</code> du bloc de
  <code class="literal">declare</code> sera exécutée. Comment elle sera exécutée,
  et quels effets cela aura, dépend de la directive utilisée dans le bloc
  <code class="literal">directive</code>.
 </p>
 <p class="para">
  La structure <code class="literal">declare</code> peut aussi être utilisée
  dans le contexte global. Elle affecte alors tout le code qui la
  suit (même si le fichier avec <code class="literal">declare</code> a été 
  inclus après, ça n&#039;affecte pas le fichier parent).
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Ces&nbsp;déclarations&nbsp;sont&nbsp;identiques.<br /><br />//&nbsp;Vous&nbsp;pouvez&nbsp;utiliser&nbsp;ceci<br /></span><span style="color: #007700">declare(</span><span style="color: #0000BB">ticks</span><span style="color: #007700">=</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;script&nbsp;entier&nbsp;ici<br /></span><span style="color: #007700">}<br /><br /></span><span style="color: #FF8000">//&nbsp;ou&nbsp;ceci<br /></span><span style="color: #007700">declare(</span><span style="color: #0000BB">ticks</span><span style="color: #007700">=</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;script&nbsp;entier&nbsp;ici<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>

 <div class="sect2" id="control-structures.declare.ticks">
  <h3 class="title">Ticks</h3>
  <p class="para">
   Un tick est un événement qui intervient toutes les <var class="varname">N</var>
   commandes bas niveau tickables, exécutées par l&#039;analyseur dans le bloc de
   <code class="literal">declare</code>. La valeur de <var class="varname">N</var> est spécifiée
   par la syntaxe <code class="code">ticks=<var class="varname">N</var></code> dans le bloc de
   directive <code class="literal">declare</code>.
  </p>
  <p class="para">
   Toutes les commandes ne sont pas tickables. Typiquement,
   les expressions de condition et les expressions d&#039;arguments
   ne sont pas tickables.
  </p>
  <p class="para">
   Un événement qui intervient à chaque tick est spécifié avec la fonction
   <span class="function"><a href="function.register-tick-function.html" class="function">register_tick_function()</a></span>. Reportez-vous à l&#039;exemple
   ci-dessous pour plus de détails. Notez que plus d&#039;un événement peut
   intervenir par tick.
 </p>
 <p class="para">
  <div class="example" id="example-131">
   <p><strong>Exemple #1 Exemple d&#039;utilisation des ticks</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">declare(</span><span style="color: #0000BB">ticks</span><span style="color: #007700">=</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;A&nbsp;function&nbsp;called&nbsp;on&nbsp;each&nbsp;tick&nbsp;event<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">tick_handler</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"tick_handler()&nbsp;called\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">register_tick_function</span><span style="color: #007700">(</span><span style="color: #DD0000">'tick_handler'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /><br />if&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">&gt;&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">+=&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;print(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p> 
 <p class="para"> 
  <div class="example" id="example-132">
   <p><strong>Exemple #2 Exemple d&#039;utilisation des ticks</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">tick_handler</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"tick_handler()&nbsp;called\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">tick_handler</span><span style="color: #007700">();<br /><br />if&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">&gt;&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">+=&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">tick_handler</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;print(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">tick_handler</span><span style="color: #007700">();<br />}<br /></span><span style="color: #0000BB">tick_handler</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 <p class="simpara">
  Voir aussi <span class="function"><a href="function.register-tick-function.html" class="function">register_tick_function()</a></span> et
  <span class="function"><a href="function.unregister-tick-function.html" class="function">unregister_tick_function()</a></span>.
 </p>
 </div>
 <div class="sect2" id="control-structures.declare.encoding">
  <h3 class="title">L&#039;encodage</h3>
  <p class="para">
   L&#039;encodage d&#039;un script peut être spécifié par script en utilisant la
   directive <code class="literal">encoding</code>.
  <div class="example" id="example-133">
   <p><strong>Exemple #3 Déclaration d&#039;un encodage pour un script</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">declare(</span><span style="color: #0000BB">encoding</span><span style="color: #007700">=</span><span style="color: #DD0000">'ISO-8859-1'</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;le&nbsp;code<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>

  <div class="caution"><strong class="caution">Attention</strong>
   <p class="simpara">
    Combinée avec les espaces de nommage, la seule syntaxe valable pour declare
    est <code class="literal">declare(encoding=&#039;...&#039;);</code> où <code class="literal">...</code>
    est la valeur de l&#039;encodage.  <code class="literal">declare(encoding=&#039;...&#039;) {}</code>
    soulèvera une erreur d&#039;interprétation dans le cas des espaces de nommage.
   </p>
  </div>
  <p class="para">
   La valeur d&#039;encodage est ignorée en PHP 5.3 à 
   moins que PHP soit compilé avec <code class="literal">--enable-zend-multibyte</code>.
  </p>
  <p class="para">
   Notez que PHP ne vous renseignera sur l&#039;activation ou non de 
   <code class="literal">--enable-zend-multibyte</code> qu&#039;au moyen de
   <span class="function"><a href="function.phpinfo.html" class="function">phpinfo()</a></span>.
  </p>
  <p class="para">
   Voir aussi
   <a href="ini.core.html#ini.zend.script-encoding" class="link">zend.script_encoding</a>.
  </p>
 </div>
</div></div></div></body></html>