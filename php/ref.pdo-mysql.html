<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Fonctions MySQL (PDO_MYSQL)</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="ref.pdo-informix.connection.html">« PDO_INFORMIX DSN</a></li>
      <li style="float: right;"><a href="ref.pdo-mysql.connection.html">PDO_MYSQL DSN »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="pdo.drivers.html">Pilotes PDO</a></li>
    <li>Fonctions MySQL (PDO_MYSQL)</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="ref.pdo-mysql" class="reference">
  
  <h1 class="title">Fonctions MySQL (PDO_MYSQL)</h1>
  
  <div class="partintro">

   <div class="section" id="pdo-mysql.intro">
   <h2 class="title">Introduction</h2>
    <p class="para">
     PDO_MYSQL est un pilote qui implémente l&#039;<a href="intro.pdo.html" class="link">interface de PHP Data Objects (PDO)</a> pour
     autoriser l&#039;accès de PHP aux bases de données MySQL.
    </p>
    <p class="para">
     À partir de PHP 5.2.1, PDO_MYSQL utilises des requêtes préparées émulées
     par défaut. Auparavant, PDO_MYSQL utilisait les requêtes natives préparées
     présentes dans MySQL 4.1 et supérieur, et les émulaient pour des versions
     plus anciennes des bibliothèques clientes MySQL.
    </p>
  
    <p class="para">
     <em class="emphasis">MySQL 8</em>
    </p>

    <p class="para">
     Si PHP est utilisé dans une version 7.1 antérieure à la version 7.1.16, ou PHP 7.2 antérieure à 7.2.4,
     le plugin de mot de passe doit être défini à
     <em class="emphasis">mysql_native_password</em> pour MySQL 8 Server, car sinon des
     erreurs similaires à <em class="emphasis">The server requested authentication method
     unknown to the client [caching_sha2_password]</em> peuvent apparaitre, 
     même si <em class="emphasis">caching_sha2_password</em> n&#039;est pas utilisé.
    </p>
    <p class="para">
     Ceci est dû au fait que MySQL 8 utilise par défaut caching_sha2_password, 
     un plugin qui n&#039;est pas reconnu par les anciennes versions de PHP (mysqlnd).
     À la place il faut modifier le paramètre 
     <code class="literal">default_authentication_plugin=mysql_native_password</code> dans
     <var class="filename">my.cnf</var>. Le plugin <em class="emphasis">caching_sha2_password</em>
     sera surporté dans une version future de PHP. En attendant, l&#039;extension
     <a href="book.mysql-xdevapi.html" class="link">mysql_xdevapi</a> le supporte.
    </p>
    
    <div class="warning"><strong class="warning">Avertissement</strong>
     <p class="para">
      Prendre garde toutefois : certains types de tables MySQL (moteur d&#039;enregistrement)
      ne supportent pas les transactions. Lorsque vous écrivez du code de base
      de données transactionnel en utilisant un type de table qui ne supporte
      pas les transactions, MySQL prétendra qu&#039;une transaction était initiée
      correctement. De plus, toute requête DLL publiée enverra implicitement
      l&#039;ensemble des transactions en attente.
     </p>
    </div>
   </div>
   




<div class="section" id="ref.pdo-mysql.installation">
 <h2 class="title">Installation</h2>
 <p class="para">
  Les distributions Linux incluent des versions binaires de PHP qui peuvent
  être installées. Même si ces binaires sont construits avec les extensions
  MySQL, les bibliothèques clientes doivent souvent être installées au
  moyen d&#039;un paquet additionnel. Voyez si c&#039;est le cas pour votre distribution.
 </p>

 <p class="para">
  Par exemple, sur Ubuntu le package <code class="literal">php5-mysql</code> installe les
  extensions PHP ext/mysql, ext/mysqli, et pdo_mysql. Sur CentOS, le package 
  <code class="literal">php-mysql</code> installe aussi ces trois extensions PHP.
 </p>

 <p class="para">
  Alternativement, vous pouvez compiler cette extension vous-même. Construire
  PHP depuis les sources permet de préciser les extensions MySQL à embarquer,
  mais aussi les bibliothèques clientes de chaque extension.
 </p>

 <p class="para">
  Lors de la compilation utilisez <strong class="option configure">--with-pdo-mysql[=DIR]</strong>
  pour installer l&#039;extension PDO MySQL, où <code class="literal">[=DIR]</code> est le chemin
  de la bibliothèque de base de MySQL. À partir de PHP 5.4,
  <a href="book.mysqlnd.html" class="link">mysqlnd</a> et la bibliothèque par défault. 
  Pour plus de détails à propos du choix de la bibliothèque, voir
  <a href="mysqlinfo.library.choosing.html" class="link">Choisir une bibliothèque MySQL</a>.
 </p>
 <p class="para">
  Optionnellement, l&#039;option <strong class="option configure">--with-mysql-sock[=DIR]</strong>
  définit le chemin vers le socket Unix MySQL pour toutes les extensions
  MySQL, y compris PDO_MYSQL. Si non spécifié, les chemins par défaut seront utilisés.
 </p>
 <p class="para">
  Optionnellement, l&#039;option <strong class="option configure">--with-zlib-dir[=DIR]</strong>
  sera utilisée pour définir le préfixe d&#039;installation zlib.
 </p>
 <p class="para">
  <div class="example-contents screen">
<div class="cdata"><pre>
$ ./configure --with-pdo-mysql --with-mysql-sock=/var/mysql/mysql.sock
</pre></div>
  </div>
 </p>
 <p class="para">
  Le support SSL est activé en utilisant les <a href="ref.pdo-mysql.html#pdo-mysql.constants" class="link">constantes PDO_MySQL</a>
  appropriées, ce qui revient à appeler la fonction
  <a href="http://dev.mysql.com/doc/mysql/en/mysql-ssl-set.html" class="link external">&raquo;&nbsp;mysql_ssl_set() de l&#039;API C MySQL</a>.
  De plus, SSL ne peut être activé avec <strong class="classname">PDO::setAttribute</strong> car la connexion
  existe déjà. Reportez-vous à la documentation MySQL sur
  <a href="http://dev.mysql.com/doc/mysql/en/configuring-for-ssl.html" class="link external">&raquo;&nbsp;la connexion sur MySQL en utilisant SSL</a>.
 </p>

 <table class="doctable table">
  <caption><strong>Historique</strong></caption>
  
   <thead>
    <tr>
     <th>Version</th>
     <th>Description</th>
    </tr>

   </thead>

   <tbody class="tbody">
    <tr>
     <td>5.4.0</td>
     <td>
      <a href="book.mysqlnd.html" class="link">mysqlnd</a> est devenu la bibliothèque par 
      défaut de MySQL lors de la compilation de PDO_MYSQL. Auparavant, libmysqlclient
      était la bibliothèque par défaut de MySQL.
     </td>
    </tr>

    <tr>
     <td>5.4.0</td>
     <td>
      Les bibliothèques cliente MySQL 4.1 et inférieures ne sont
      plus supportées.
     </td>
    </tr>

    <tr>
     <td>5.3.9</td>
     <td>
      Ajout du support SSL avec mysqlnd et OpenSSL.
     </td>
    </tr>

    <tr>
     <td>5.3.7</td>
     <td>
      Ajout du support SSL avec libmysqlclient et OpenSSL.
     </td>
    </tr>

   </tbody>
  
 </table>

 
</div>



   




<div class="section" id="pdo-mysql.constants">
 <h2 class="title">Constantes pré-définies</h2>
 <p class="simpara">Les constantes ci-dessous sont
définies par ce pilote et seront seulement disponibles lorsque l&#039;extension
aura été compilée dans PHP ou chargée dynamiquement du moteur d&#039;exécution.
De plus, ces constantes spécifiques au pilote devraient être utilisées seulement
si vous utilisez ce pilote. En utilisant les attributs spécifiques à un pilote
avec un autre pilote pourrait causer un comportement inattendu.
<span class="function"><a href="pdo.getattribute.html" class="function">PDO::getAttribute()</a></span> pourrait être utilisé pour obtenir
l&#039;attribut <strong><code>PDO::ATTR_DRIVER_NAME</code></strong> pour vérifier le
pilote, si votre code peut fonctionner sur des pilotes multiples.</p>
 <dl>

  
   <dt id="pdo.constants.mysql-attr-use-buffered-query">
    <strong><code>PDO::MYSQL_ATTR_USE_BUFFERED_QUERY</code></strong>
     (<a href="language.types.integer.html" class="link">entier</a>)
   </dt>

   <dd>

    <span class="simpara">
     Si cet attribut est défini à TRUE sur un objet de classe
     <a href="class.pdostatement.html" class="classname">PDOStatement</a>, le pilote MySQL
     utilisera les versions bufferisées de l&#039;API MySQL.
     Si vous écrivez du code portable, vous devriez utiliser à la place
     <span class="function"><a href="pdostatement.fetchall.html" class="function">PDOStatement::fetchAll()</a></span>.
    </span>
    <p class="para">
     <div class="example" id="example-1066"><p><strong>Exemple #1 Forcer la bufferisation des requêtes avec mysql</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_DRIVER_NAME</span><span style="color: #007700">)&nbsp;==&nbsp;</span><span style="color: #DD0000">'mysql'</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">'select&nbsp;*&nbsp;from&nbsp;foo'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">MYSQL_ATTR_USE_BUFFERED_QUERY&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">));<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"mon&nbsp;application&nbsp;fonctionne&nbsp;seulement&nbsp;avec&nbsp;mysql;&nbsp;Je&nbsp;devrais&nbsp;utiliser&nbsp;\$stmt-&gt;fetchAll()&nbsp;à&nbsp;la&nbsp;place"</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>
   </dd>

  
  
   <dt id="pdo.constants.mysql-attr-local-infile">
    <strong><code>PDO::MYSQL_ATTR_LOCAL_INFILE</code></strong>
    (<a href="language.types.integer.html" class="link">entier</a>)
   </dt>

   <dd>

    <p class="para">
     Active <code class="literal">LOAD LOCAL INFILE</code>.
    </p>
    <p class="para">
     Notez que cette option n&#039;a d&#039;effet que si utilisée dans le tableau d&#039;options
     <code class="parameter">driver_options</code> du constructeur.
    </p>
   </dd>

  
  
   <dt id="pdo.constants.mysql-attr-local-infile-directory">
    <strong><code>PDO::MYSQL_ATTR_LOCAL_INFILE_DIRECTORY</code></strong>
     (<a href="language.types.string.html" class="link">chaîne de caractères</a>)
   </dt>

   <dd>

    <p class="para">
     Permet de restraindre le chargement de LOCAL DATA aux fichiers localisé
     dans le dossier désigné.
    </p>
    <p class="para">
     Note, cette constante peut seulement être utilisé dans le <a href="language.types.array.html" class="link">tableau</a>
     <code class="parameter">driver_options</code> lors de la construction d&#039;un nouvel
     gestionaire de base de donnée.
    </p>
   </dd>

  
  
   <dt id="pdo.constants.mysql-attr-init-command">
    <strong><code>PDO::MYSQL_ATTR_INIT_COMMAND</code></strong>
    (<a href="language.types.integer.html" class="link">entier</a>)
   </dt>

   <dd>

    <p class="para">
     Commande à exécuter lors de la connexion au serveur MySQL. Sera
     automatiquement ré-exécuté lors d&#039;une reconnexion.
    </p>
    <p class="para">
     Notez que cette option n&#039;a d&#039;effet que si utilisée dans le tableau d&#039;options
     <code class="parameter">driver_options</code> du constructeur.
    </p>
   </dd>

  
  
   <dt id="pdo.constants.mysql-attr-read-default-file">
    <strong><code>PDO::MYSQL_ATTR_READ_DEFAULT_FILE</code></strong>
    (<a href="language.types.integer.html" class="link">entier</a>)
   </dt>

   <dd>

    <p class="para">
     Lit les options depuis le fichier nommé optionnel, plutôt que depuis
     <var class="filename">my.cnf</var>. Cette option n&#039;est pas disponible
     lors de l&#039;utilisation de mysqlnd car ce dernier ne lit pas
     les fichiers de configuration de mysql.
    </p>
   </dd>

  
  
   <dt id="pdo.constants.mysql-attr-read-default-group">
    <strong><code>PDO::MYSQL_ATTR_READ_DEFAULT_GROUP</code></strong>
    (<a href="language.types.integer.html" class="link">entier</a>)
   </dt>

   <dd>

    <p class="para">
     Lit les options depuis le groupe nommé du fichier <var class="filename">my.cnf</var>
     ou depuis le fichier spécifié par <strong><code>MYSQL_READ_DEFAULT_FILE</code></strong>.
     Cette option n&#039;est pas disponible lors de l&#039;utilisation de
     mysqlnd car ce dernier ne lit pas les fichiers de configuration de mysql.
    </p>
   </dd>

  
  
   <dt id="pdo.constants.mysql-attr-max-buffer-size">
    <strong><code>PDO::MYSQL_ATTR_MAX_BUFFER_SIZE</code></strong>
    (<a href="language.types.integer.html" class="link">entier</a>)
   </dt>

   <dd>

    <p class="para">
     Taille maximale du tampon. Par défaut, vaut 1 MiB. Cette constante n&#039;est
     pas supportée lorsque mysqlnd est utilisé.
    </p>
   </dd>

  
  
   <dt id="pdo.constants.mysql-attr-direct-query">
    <strong><code>PDO::MYSQL_ATTR_DIRECT_QUERY</code></strong>
    (<a href="language.types.integer.html" class="link">entier</a>)
   </dt>

   <dd>

    <p class="para">
     Effectue des requêtes directes, sans utiliser de requêtes préparées.
    </p>
   </dd>

  
  
   <dt id="pdo.constants.mysql-attr-found-rows">
    <strong><code>PDO::MYSQL_ATTR_FOUND_ROWS</code></strong>
     (<a href="language.types.integer.html" class="link">entier</a>)
   </dt>

   <dd>

    <p class="para">
     Retourne le nombre d&#039;enregistrements trouvés, pas le nombre
     d&#039;enregistrements changés.
    </p>
   </dd>

  
  
   <dt id="pdo.constants.mysql-attr-ignore-space">
    <strong><code>PDO::MYSQL_ATTR_IGNORE_SPACE</code></strong>
     (<a href="language.types.integer.html" class="link">entier</a>)
   </dt>

   <dd>

    <p class="para">
     Autorise les espaces après les noms de fonctions. Fait en sorte
     que les noms de fonctions soient des mots réservés.
    </p>
   </dd>

  
  
   <dt id="pdo.constants.mysql-attr-compress">
    <strong><code>PDO::MYSQL_ATTR_COMPRESS</code></strong>
     (<a href="language.types.integer.html" class="link">entier</a>)
   </dt>

   <dd>

    <p class="para">
     Active la compression de la communication réseau. Supporté
     si mysqlnd est utilisé à partir de PHP 5.3.11.
    </p>
   </dd>

  

  
   <dt id="pdo.constants.mysql-attr-ssl-ca">
    <strong><code>PDO::MYSQL_ATTR_SSL_CA</code></strong>
     (<a href="language.types.integer.html" class="link">entier</a>)
   </dt>

   <dd>

    <p class="para">
     Chemin vers l&#039;authorité certificat SSL.
    </p>
    <p class="para">
     Existe à partir de PHP  5.3.7.
    </p>
   </dd>

  

  
   <dt id="pdo.constants.mysql-attr-ssl-capath">
    <strong><code>PDO::MYSQL_ATTR_SSL_CAPATH</code></strong>
     (<a href="language.types.integer.html" class="link">entier</a>)
   </dt>

   <dd>

    <p class="para">
     Chemin vers le dossier contenant les certificats SSL CA,
     stockés au format PEM.
    </p>
    <p class="para">
     Existe à partir de PHP  5.3.7.
    </p>
   </dd>

  

  
   <dt id="pdo.constants.mysql-attr-ssl-cert">
    <strong><code>PDO::MYSQL_ATTR_SSL_CERT</code></strong>
     (<a href="language.types.integer.html" class="link">entier</a>)
   </dt>

   <dd>

    <p class="para">
     Chemin vers le certificat SSL.
    </p>
    <p class="para">
     Existe à partir de PHP  5.3.7.
    </p>
   </dd>

  

  
   <dt id="pdo.constants.mysql-attr-cipher">
    <strong><code>PDO::MYSQL_ATTR_SSL_CIPHER</code></strong>
     (<a href="language.types.integer.html" class="link">entier</a>)
   </dt>

   <dd>

    <p class="para">
     Liste d&#039;un ou plusieurs ciphers pour utiliser lors du cryptage SSL, dans un format
     reconnu par OpenSSL. Par exemple: <code class="literal">DHE-RSA-AES256-SHA:AES128-SHA</code>
    </p>
    <p class="para">
     Existe à partir de PHP  5.3.7.
    </p>
   </dd>

  

  
   <dt id="pdo.constants.mysql-attr-key">
    <strong><code>PDO::MYSQL_ATTR_SSL_KEY</code></strong>
     (<a href="language.types.integer.html" class="link">entier</a>)
   </dt>

   <dd>

    <p class="para">
     Chemin vers la clé SSL.
    </p>
    <p class="para">
     Existe à partir de PHP  5.3.7.
    </p>
   </dd>

  

  
   <dt id="pdo.constants.mysql-attr-ssl-verify-server-cert">
    <strong><code>PDO::MYSQL_ATTR_SSL_VERIFY_SERVER_CERT</code></strong>
     (<a href="language.types.integer.html" class="link">entier</a>)
   </dt>

   <dd>

    <p class="para">
     Fournit un moyen de désactiver la vérification du certificat SSL du serveur.
    </p>
    <p class="para">
     Existe à partir de PHP  7.0.18 et PHP 7.1.4.
    </p>
   </dd>

  

  
   <dt id="pdo.constants.mysql-attr-multi-statements">
    <strong><code>PDO::MYSQL_ATTR_MULTI_STATEMENTS</code></strong>
     (<a href="language.types.integer.html" class="link">entier</a>)
   </dt>

   <dd>

    <p class="para">
     Désactive la requête d&#039;exécution multiple à la fois dans <span class="function"><a href="pdo.prepare.html" class="function">PDO::prepare()</a></span>
     et <span class="function"><a href="pdo.query.html" class="function">PDO::query()</a></span> quand définie à <strong><code>FALSE</code></strong>.
    </p>
    <p class="para">
     Il est à noter que cette constante peut seulement être utilisée dans le <a href="language.types.array.html" class="link">tableau</a> 
     <code class="parameter">driver_options</code> lors de la construction d&#039;un nouveau
     gestionnaire de base de données.
    </p>
    <p class="para">
     Existe à partir de PHP  5.5.21 et PHP 5.6.5.
    </p>
   </dd>

  

 </dl>

</div>



   




<div class="section" id="pdo-mysql.configuration">
 <h2 class="title">Configuration à l&#039;exécution</h2>
 <p class="simpara">Le comportement de ces fonctions est
affecté par la configuration dans le fichier <var class="filename">php.ini</var>.</p>
 <p class="para">
  <table class="doctable table">
   <caption><strong>Options de configuration du driver PDO_MYSQL</strong></caption>
   
    <thead>
     <tr>
      <th>Nom</th>
      <th>Défaut</th>
      <th>Modifiable</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td><a href="ref.pdo-mysql.html#ini.pdo-mysql.default-socket" class="link">pdo_mysql.default_socket</a></td>
      <td>&quot;/tmp/mysql.sock&quot;</td>
      <td>PHP_INI_SYSTEM</td>
     </tr>

     <tr>
      <td><a href="ref.pdo-mysql.html#ini.pdo-mysql.debug" class="link">pdo_mysql.debug</a></td>
      <td>NULL</td>
      <td>PHP_INI_SYSTEM</td>
     </tr>

    </tbody>
   
  </table>

  Pour plus de détails sur les modes PHP_INI_*,
        reportez-vous à <a href="configuration.changes.modes.html" class="xref">O&ugrave; une directive de configuration peut &ecirc;tre modifi&eacute;e</a>.
 </p>

 <p class="para">Voici un éclaircissement sur
l&#039;utilisation des directives de configuration.</p>

 <p class="para">
  <dl>

   
    <dt id="ini.pdo-mysql.default-socket">
     <code class="parameter">pdo_mysql.default_socket</code>
     <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
    </dt>

    <dd>

     <p class="para">
      Définit un socket de domaine Unix. La valeur peut aussi être définie au
      moment de la compilation si un socket de domaine Unix est trouvé lors
      de la configuration. Cette configuration INI n&#039;est disponible que
      sous Unix.
     </p>
    </dd>

   
   
    <dt id="ini.pdo-mysql.debug">
     <code class="parameter">pdo_mysql.debug</code>
     <span class="type"><a href="language.types.boolean.html" class="type boolean">boolean</a></span>
    </dt>

    <dd>

     <p class="para">
      Active le débogage pour le driver PDO_MYSQL. Cette configuration n&#039;est
      disponible que lorsque le driver PDO_MYSQL est compilé avec
      mysqlnd et en mode de débogage PDO.
     </p>
    </dd>

   
  </dl>

 </p>
</div>



  </div>

  

 <h2>Sommaire</h2><ul class="chunklist chunklist_reference"><li><a href="ref.pdo-mysql.connection.html">PDO_MYSQL DSN</a> — Connexion aux bases de donn&eacute;es MySQL</li></ul>
</div>
</div></div></body></html>