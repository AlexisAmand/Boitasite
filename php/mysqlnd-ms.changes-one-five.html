<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>S&eacute;ries 1.5 PECL/mysqlnd_ms</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="mysqlnd-ms.changes-one-six.html">« S&eacute;ries 1.6 PECL/mysqlnd_ms</a></li>
      <li style="float: right;"><a href="mysqlnd-ms.changes-one-four.html">S&eacute;ries 1.4 PECL/mysqlnd_ms »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="mysqlnd-ms.changes.html">Change History</a></li>
    <li>S&eacute;ries 1.5 PECL/mysqlnd_ms</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mysqlnd-ms.changes-one-five" class="section">
  <h2 class="title">Séries 1.5 PECL/mysqlnd_ms</h2>
  <p class="para">
   1.5.0-stable
   <ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">
      Date de sortie : 06/2013
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      Motto/thème : Support de la fragmentation, amélioration du support des transactions
     </span>
    </li>
   </ul>
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    C&#039;est la série actuellement stable. Veuillez l&#039;utiliser en environnement de production.
   </p>
   <p class="para">
    La documentation est complète.
   </p>
  </p></blockquote>
  <p class="para">
   1.5.0-alpha
   <ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">
      Date de sortie : 03/2013
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      Motto/thème : Support de la fragmentation, amélioration du support des transactions
     </span>
    </li>
   </ul>
  </p>
  <p class="para">
   Correction de bogues
   <ul class="itemizedlist">
    <li class="listitem">
     <p class="para">
      Correction du bogue #60605 relatif à une erreur de segmentation
      lorsque mysqlnd_ms est activé.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Le fait des définir les transactions gluantes désactive toutes les
      balances de charge, incluant le failover automatique, pour la durée
      d&#039;une transaction. Jusqu&#039;alors, les switches de connexion peuvaient
      survenir au milieu d&#039;une transaction en configuration multi-maîtres
      ainsi que durant le failover automatique bien que la surveillance
      des transactions avait détectée correctement les limites de la
      transaction.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Compatibilité ascendante rompue, et corrections de bogues.
      Les astuces SQL permettant de forcer l&#039;utilisation d&#039;une sorte
      de serveur (<strong><code>MYSQLND_MS_MASTER_SWITCH</code></strong>,
      <strong><code>MYSQLND_MS_SLAVE_SWITCH</code></strong>,
      <strong><code>MYSQLND_MS_LAST_USED_SWITCH</code></strong>) étaient ignorées
      pour la durée d&#039;une transaction (gluante) alors que les limites
      de la transaction avait été détectée correctement.
     </p>
     <p class="para">
      Ceci est une modification dans le comportement. Cependant, c&#039;est également
      une correction de bogue, et une étape nécessaire pour rendre cohérent
      le comportement. Si, dans les précédentes versions, dans un contexte
      de transaction gluante, une de ces astuces SQL ainsi qu&#039;une qualité de service
      se basant sur le filtrage étaient combinées, il pouvait arriver que les
      astuces SQL étaient ignorées. Dans quelques cas, les astuces SQL fonctionnaient
      normalement, dans d&#039;autres, elles ne fonctionnaient pas. Ce nouveau
      comportement est plus cohérent. Les astuces SQL seront toujours ignorées
      pour la durée de la transaction, si
      <a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.trx-stickiness" class="link">les transactions
       gluantes</a> sont actives.
     </p>
     <p class="para">
      Notez que la détection des limites des transactions continue d&#039;être
      basée sur des appels de l&#039;API de surveillance. Les commandes SQL
      contrôlant les transactions ne sont pas surveillées.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Compatibilité ascendante rompue, et corrections de bogues. Les appels
      à la fonction <span class="function"><a href="function.mysqlnd-ms-set-qos.html" class="function">mysqlnd_ms_set_qos()</a></span> échoueront
      lorsqu&#039;effectués au milieu d&#039;une transaction si
      <a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.trx-stickiness" class="link">les transactions
       gluantes</a> sont actives. Les swtiches de connexion ne sont pas
      autorisées pour la durée d&#039;une transaction. Le changement de qualité
      de service revient à qualifier un jeu de serveurs différent pour l&#039;exécution
      de la requête, et donc, il se peut qu&#039;il soit nécessaire de changer
      de connexions. Aussi, l&#039;appel n&#039;est pas autorisé durant une transaction.
      La qualité de service peut, cependant, être changée entre les transactions.
     </p>
    </li>
   </ul>
  </p>
  <p class="para">
   Modification de fonctionalités
   <ul class="itemizedlist">
    <li class="listitem">
     <p class="para">
      Introduction du filtre <code class="literal">node_group</code>.
      Le filtre vous permet d&#039;organiser les serveurs (maîtres et esclaves)
      dans des groupes. Les requêtes peuvent être dirigées vers un
      certain groupe de serveurs en préfixant la requête avec une
      astuce/commentaire SQL qui contient le nom de configuration
      du groupe. Les groupes peuvent être utilisés pour le partionnement
      et le partage, mais aussi pour optimiser localement le cache.
      Dans le cas du partage, le nom du groupe sera la clé du partage.
      Toutes les requêtes pour une clé de partage donnée seront exécutées
      sur le partage configuré. Notez qu&#039;il est nécessaire qu&#039;à la fois le
      client et le serveur supportent le partage pour être utilisé avec mysqlnd_ms.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Validation étendue du fichier de configuration lors du démarrage de PHP
      (RINIT). Une erreur de niveau <strong><code>E_WARNING</code></strong> sera émise si le
      fichier de configuration ne peut pas être lu (en raison d&#039;un problème de
      permissions par exemple), s&#039;il est vide, ou si le fichier (JSON) ne peut être
      analysé. Ces alertes peuvent apparaître dans les fichiers de log, suivant
      la configuration de PHP.
     </p>
     <p class="para">
      Les distributions qui fournissent une installation pré-configurée, incluant
      un exemple de fichier de configuration, doivent placer des <code class="literal">{}</code>
      dans le fichier de configuration pour éviter ces alertes à propos d&#039;un fichier
      de configuration invalide.
     </p>
     <p class="para">
      Les prochaines validations du fichier de configuration seront effectuées
      lors de l&#039;analyse des sections sur l&#039;ouverture d&#039;une connexion. Notez qu&#039;il
      peut y avoir des situations où un fichier invalide de configuration d&#039;un plugin
      n&#039;émette pas la bonne alerte mais résulte en une erreur de connexion.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Depuis PHP 5.5.0, amélioration de la détection des limites d&#039;une transaction
      pour <code class="literal">mysqli</code>. L&#039;extension <code class="literal">mysqli</code>
      a été modifiée pour utiliser les nouveaux appels C API de la bibliothèque
      <code class="literal">mysqlnd</code> pour commencer, valider ou annuler une transaction
      ou un point de sauvegarde. Si le paramètre
      <a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.trx-stickiness" class="link">trx_stickiness</a>
      est utilisé pour activer la balance de charge des transactions, les appels
      aux fonctions <span class="function"><strong>mysqli_begin()</strong></span>, <span class="function"><a href="mysqli.commit.html" class="function">mysqli_commit()</a></span>
      et <span class="function"><a href="mysqli.rollback.html" class="function">mysqli_rollback()</a></span> seront maintenant surveillés par le plugin,
      en plus de la fonction <span class="function"><a href="mysqli.autocommit.html" class="function">mysqli_autocommit()</a></span> qui l&#039;était déjà.
      Toutes les fonctionalités SQL pour contrôler les transactions sont aussi disponibles
      via les fonctions de contrôles des transactions <code class="literal">mysqli</code> associées.
      Cela signifie qu&#039;il n&#039;est pas nécessaire d&#039;utiliser des requêtes SQL à la place d&#039;appels API.
      Les applications utilisant uniquement des appels API appropriés peuvent faire de la
      balance de charge avec PECL/mysqlnd_ms d&#039;une façon totalement sécurisée pour les
      transactions.
     </p>
     <p class="para">
      Notez que <code class="literal">PDO_MySQL</code> n&#039;a pas été mis à jour pour utiliser
      les nouveaux appels API de mysqlnd. Aussi, la détection des limites d&#039;une
      transaction avec <code class="literal">PDO_MySQL</code> continue d&#039;être limitée à la
      surveillance en utilisant la constante <strong><code>PDO::ATTR_AUTOCOMMIT</code></strong>
      à la méthode <span class="methodname"><a href="pdo.setattribute.html" class="methodname">PDO::setAttribute()</a></span>.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Introduction de <code class="literal">trx_stickiness=on</code>. Cette option
      <a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.trx-stickiness" class="link">trx_stickiness</a>
      diffère de <code class="literal">trx_stickiness=master</code> car elle tente d&#039;exécuter une transaction
      uniquement en lecture sur un esclave, si la qualité de service (niveau de
      consistence) autorise d&#039;utiliser un esclave. Les transactions uniquement
      en lecture ont été introduites en MySQL 5.6, offrant un gain important
      en terme de performance.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Le support du cache des requêtes est considéré comme béta si vous
      l&#039;utilisez avec l&#039;API <code class="literal">mysqli</code>. Il devrait fonctionner
      parfaitement avec des clusters basés sur une copie primaire.
      Pour toutes les autres APIs, cette fonctionalité est toujours expérimentale.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Les exemples de code dans les sources de mysqlnd_ms ont été mis à jour.
     </p>
    </li>
    
   </ul>
  </p>
 </div></div></div></body></html>