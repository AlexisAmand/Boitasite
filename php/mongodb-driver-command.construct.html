<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Cr&eacute;e une nouvelle commande</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="class.mongodb-driver-command.html">« MongoDB\Driver\Command</a></li>
      <li style="float: right;"><a href="class.mongodb-driver-query.html">MongoDB\Driver\Query »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.mongodb-driver-command.html">MongoDB\Driver\Command</a></li>
    <li>Cr&eacute;e une nouvelle commande</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mongodb-driver-command.construct" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">MongoDB\Driver\Command::__construct</h1>
  <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Command::__construct</span> &mdash; <span class="dc-title">Crée une nouvelle commande</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-mongodb-driver-command.construct-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Command::__construct</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.array-object" class="type array|object">array|object</a></span> <code class="parameter">$document</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$commandOptions</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   Construit un nouveau <a href="class.mongodb-driver-command.html" class="classname">MongoDB\Driver\Command</a>, qui est 
   un objet valeur immuable qui représente une commande de base de données. 
   La commande peut alors être exécutée avec
   <span class="methodname"><a href="mongodb-driver-manager.executecommand.html" class="methodname">MongoDB\Driver\Manager::executeCommand()</a></span>.
  </p>
  <p class="para">
   Le document de commande complet, qui inclut le nom de la commande et ses 
   options, doit être exprimé dans le paramètre <code class="parameter">document</code>. 
   Le paramètre <code class="parameter">commandOptions</code> est utilisé uniquement 
   pour spécifier les options liées à l&#039;exécution de la commande et le résultat
   <a href="class.mongodb-driver-cursor.html" class="classname">MongoDB\Driver\Cursor</a>.
  </p>

 </div>


 <div class="refsect1 parameters" id="refsect1-mongodb-driver-command.construct-parameters">
  <h3 class="title">Liste de paramètres</h3>
  <dl>

   
    <dt>
<code class="parameter">document</code></dt>

    <dd>

     <p class="para">
      Le document de commande complet, qui sera envoyé au serveur.
     </p>
    </dd>

   
   
   
    <dt>
<code class="parameter">commandOptions</code></dt>

    <dd>

     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <span class="simpara">
       N&#039;utilisez pas ce paramètre pour spécifier les options décrites dans la 
       référence de la commande dans le manuel MongoDB. Ce paramètre ne doit 
       être utilisé que pour les options explicitement énumérées ci-dessous.
      </span>
     </p></blockquote>
     <p class="para">
      <table class="doctable table">
       <caption><strong>commandOptions</strong></caption>
       
        <thead>
         <tr>
          <th>Option</th>
          <th>Type</th>
          <th>Description</th>
         </tr>

        </thead>

        <tbody class="tbody">
         <tr>
          <td>maxAwaitTimeMS</td>
          <td><span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span></td>
          <td>
           <p class="para">
            Entier positif indiquant la limite de temps en millisecondes pour 
            que le serveur bloque une opération getMore si aucune donnée n&#039;est 
            disponible. Cette option ne doit être utilisée qu&#039;en conjonction 
            avec les commandes qui retournent un curseur à queue (par exemple 
            <a href="https://docs.mongodb.com/manual/changeStreams/" class="link external">&raquo;&nbsp;Change Streams</a>).
           </p>
          </td>
         </tr>

        </tbody>
       
      </table>

     </p>
    </dd>

   
  </dl>

 </div>


 <div class="refsect1 errors" id="refsect1-mongodb-driver-command.construct-errors">
  <h3 class="title">Erreurs / Exceptions</h3>
  <ul class="simplelist">
   <li class="member">Lance une exception <strong class="classname">MongoDB\Driver\InvalidArgumentException</strong> lors d&#039;une erreur survenue pendant l&#039;analyse d&#039;un argument.</li>
  </ul>
 </div>

 
 <div class="refsect1 changelog" id="refsect1-mongodb-driver-command.construct-changelog">
  <h3 class="title">Historique</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>1.4.0</td>
       <td>
        <p class="para">
         Ajout d&#039;un deuxième argument <code class="parameter">commandOptions</code>, qui 
         prend en charge l&#039;option <code class="literal">&quot;maxAwaitTimeMS&quot;</code>.
        </p>
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>



 <div class="refsect1 examples" id="refsect1-mongodb-driver-command.construct-examples">
  <h3 class="title">Exemples</h3>
  <div class="example" id="mongoduplicatekeyexception.example.catch">
   <p><strong>Exemple #1 Exemple avec <span class="function"><strong>MongoDB\Driver\Command::__construct()</strong></span></strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$command&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Command</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"buildinfo"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeCommand</span><span style="color: #007700">(</span><span style="color: #DD0000">"admin"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$command</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">toArray</span><span style="color: #007700">()[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br />}&nbsp;catch(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$response</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher quelque chose de similaire à :</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>

array(13) {
  [&quot;version&quot;]=&gt;
  string(14) &quot;2.8.0-rc2-pre-&quot;
  [&quot;gitVersion&quot;]=&gt;
  string(62) &quot;b743d7158f7642f4da6b7eac8320374b3b88dc2e modules: subscription&quot;
  [&quot;OpenSSLVersion&quot;]=&gt;
  string(25) &quot;OpenSSL 1.0.1f 6 Jan 2014&quot;
  [&quot;sysInfo&quot;]=&gt;
  string(104) &quot;Linux infant 3.16.0-24-generic #32-Ubuntu SMP Tue Oct 28 13:07:32 UTC 2014 x86_64 BOOST_LIB_VERSION=1_49&quot;
  [&quot;loaderFlags&quot;]=&gt;
  string(91) &quot;-fPIC -pthread -Wl,-z,now -rdynamic -Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-z,now -Wl,-E&quot;
  [&quot;compilerFlags&quot;]=&gt;
  string(301) &quot;-Wnon-virtual-dtor -Woverloaded-virtual -std=c++11 -fPIC -fno-strict-aliasing -ggdb -pthread -Wall -Wsign-compare -Wno-unknown-pragmas -Winvalid-pch -pipe -Werror -O3 -Wno-unused-local-typedefs -Wno-unused-function -Wno-deprecated-declarations -Wno-unused-but-set-variable -fno-builtin-memcmp -std=c99&quot;
  [&quot;allocator&quot;]=&gt;
  string(8) &quot;tcmalloc&quot;
  [&quot;versionArray&quot;]=&gt;
  array(4) {
    [0]=&gt;
    int(2)
    [1]=&gt;
    int(8)
    [2]=&gt;
    int(0)
    [3]=&gt;
    int(-8)
  }
  [&quot;javascriptEngine&quot;]=&gt;
  string(2) &quot;V8&quot;
  [&quot;bits&quot;]=&gt;
  int(64)
  [&quot;debug&quot;]=&gt;
  bool(false)
  [&quot;maxBsonObjectSize&quot;]=&gt;
  int(16777216)
  [&quot;ok&quot;]=&gt;
  float(1)
}

</pre></div>
   </div>
  </div>
  
  <div class="example" id="mongoprotocolexception.example.catch">
   <p><strong>Exemple #2 Exemple avec <span class="function"><strong>MongoDB\Driver\Command::__construct()</strong></span></strong></p>
   <div class="example-contents"><p>
    Les commandes peuvent également accepter des options, dans le cadre de la 
    structure normale que vous créez pour envoyer au serveur. Par exemple, 
    l&#039;option <code class="literal">maxTimeMS</code> peut être passée avec la plupart des 
    commandes pour restreindre la durée pendant laquelle une commande spécifique 
    peut s&#039;exécuter sur le serveur.
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$manager&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Manager</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost:27017"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$command&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Command</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"distinct"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"beer"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"key"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"beer_name"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"maxTimeMS"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">10</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;)<br />);<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeCommand</span><span style="color: #007700">(</span><span style="color: #DD0000">"beerdb"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$command</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">toArray</span><span style="color: #007700">()[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br />}&nbsp;catch(</span><span style="color: #0000BB">MongoDB</span><span style="color: #007700">\</span><span style="color: #0000BB">Driver</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception</span><span style="color: #007700">\</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$response</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher quelque chose de similaire à :</p></div>
   <div class="example-contents screen"><br />
    operation exceeded time limit<br />
   </div>
  </div>
 </div>



 <div class="refsect1 seealso" id="refsect1-mongodb-driver-command.construct-seealso">
  <h3 class="title">Voir aussi</h3>
  <ul class="simplelist">
   <li class="member"><span class="methodname"><a href="mongodb-driver-manager.executecommand.html" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeCommand()</a> - Execute a database command</span></li>
   <li class="member"><a href="class.mongodb-driver-cursor.html" class="classname">MongoDB\Driver\Cursor</a></li>
  </ul>
 </div>


</div></div></div></body></html>