<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Lit les en-t&ecirc;tes EXIF dans les images</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.exif-imagetype.html">« exif_imagetype</a></li>
      <li style="float: right;"><a href="function.exif-tagname.html">exif_tagname »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.exif.html">Fonctions Exif</a></li>
    <li>Lit les en-t&ecirc;tes EXIF dans les images</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.exif-read-data" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">exif_read_data</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.2.0, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">exif_read_data</span> &mdash; <span class="dc-title">Lit les en-têtes <acronym title="Exchangeable Image File ">EXIF</acronym> dans les images</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.exif-read-data-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>exif_read_data</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$stream</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$sections</code><span class="initializer"> = <strong><code>NULL</code></strong></span></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$arrays</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$thumbnail</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
  ]]] ) : <span class="type">array</span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>exif_read_data()</strong></span> lit les en-têtes <acronym title="Exchangeable Image File ">EXIF</acronym>
   des images.
   Avec cette fonction, vous pouvez lire les données méta générées par les appareils photos
   numériques.
  </p>
  <p class="para">
   Les en-têtes <acronym title="Exchangeable Image File ">EXIF</acronym> tendent à être présents dans les images
   JPEG/TIFF générées par les appareils photos numériques, mais malheureusement,
   chaque appareil photo numérique a une idée différente de la façon dont
   leurs images doivent être marquées, donc, vous ne pouvez pas toujours compter
   sur un en-tête EXIF spécifique, bien que présent.
  </p>
  <p class="para">
   Les paramètres <code class="literal">Height</code> et <code class="literal">Width</code>
   sont calculés de la même façon que pour la fonction <span class="function"><a href="function.getimagesize.html" class="function">getimagesize()</a></span>,
   donc leurs valeurs ne feront parties d&#039;aucun en-tête retourné. De même, l&#039;index
   <code class="literal">html</code> est la représentation textuelle de la hauteur/largeur
   utilisée dans une balise image <acronym title="Hyper Text Markup Language">HTML</acronym> classique.
  </p>
  <p class="para">
   Lorsqu&#039;un en-tête EXIF contient une note de Copyright, cet en-tête
   peut alors contenir lui-même deux valeurs. Comme cette solution est
   incohérente avec les standards EXIF 2.10, la section <code class="literal">COMPUTED</code>
   retournera les deux en-têtes, <code class="literal">Copyright.Photographer</code>
   et <code class="literal">Copyright.Editor</code>, tandis que les sections <code class="literal">IFD0</code>
   contiennent le tableau d&#039;octets avec des caractères NULL pour séparer les deux entrées ;
   ou bien, juste la première entrée si le type de données était erroné
   (comportement par défaut de EXIF). La section <code class="literal">COMPUTED</code> va aussi
   contenir une entrée <code class="literal">Copyright</code>, qui sera soit la chaîne originale
   de copyright, soit une liste de valeurs séparées par des virgules de
   photos et de copyright de l&#039;auteur.
  </p>
  <p class="para">
   La balise <code class="literal">UserComment</code> présente le même problème que la balise Copyright.
   Elle peut stocker deux valeurs : en premier, le jeu de caractères utilisé, puis
   la valeur elle-même. Si c&#039;est le cas, la section <code class="literal">IFD</code> contiendra uniquement
   le jeu de caractères, ou bien un tableau d&#039;octets. La section <code class="literal">COMPUTED</code>
   va stocker les deux entrées <code class="literal">UserCommentEncoding</code> et
  <code class="literal">UserComment</code>. L&#039;index <code class="literal">UserComment</code>
  est disponible dans les deux cas, et il est préférable de l&#039;utiliser, plutôt
   que la valeur de la section <code class="literal">IFD0</code>.
  </p>
  <p class="para">
   <span class="function"><strong>exif_read_data()</strong></span> valide les données des balises EXIF en accord
   avec la spécification EXIF (<a href="http://exif.org/Exif2-2.PDF" class="link external">&raquo;&nbsp;http://exif.org/Exif2-2.PDF</a>, page 20).
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    Windows Me/XP peuvent endommager les en-têtes EXIF lors de la connexion à la
    caméra.
   </p>
  </p></blockquote>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.exif-read-data-parameters">
  <h3 class="title">Liste de paramètres</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">stream</code></dt>

     <dd>

      <p class="para">
       L&#039;emplacement du fichier image. Il peut s&#039;agir soit d&#039;un chemin d&#039;accès 
       au fichier (les wrappers de flux sont également pris en charge comme 
       d&#039;habitude), soit d&#039;un flux <span class="type"><a href="language.types.resource.html" class="type resource">resource</a></span>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">sections</code></dt>

     <dd>

      <p class="para">
       Liste de valeur séparées par des virgules
       des sections qui devront être présentées dans le tableau de résultat.
       Si aucune des sections demandées n&#039;est trouvée, la valeur retournée
       est <strong><code>FALSE</code></strong>.
       <table class="doctable informaltable">
        
         <tbody class="tbody">
          <tr>
           <td>FILE</td>
           <td>FileName (nom du ficher), FileSize (taille du fichier),
           FileDateTime (date de modification du fichier), SectionsFound (sections trouvées)</td>
          </tr>

          <tr>
           <td>COMPUTED</td>
           <td>
            Attribut Html, largeur, hauteur, couleur ou noir et blanc et plus si disponible.
            La largeur et la hauteur sont calculées de la même façon que la fonction
            <span class="function"><a href="function.getimagesize.html" class="function">getimagesize()</a></span>, donc, leurs valeurs ne
            devraient jamais différer. De même, l&#039;index
           <code class="literal">html</code> est la représentation textuelle de la hauteur/largeur
           utilisée dans une balise image <acronym title="Hyper Text Markup Language">HTML</acronym> classique.
           </td>
          </tr>

          <tr>
           <td>ANY_TAG</td>
           <td>
            Toutes les informations concernant cette balise, comme
            <code class="literal">IFD0</code>, <code class="literal">EXIF</code>, ...
           </td>
          </tr>

          <tr>
           <td>IFD0</td>
           <td>
            Toutes les balises <code class="literal">IFD0</code>.
            Dans les images normales, ils contiennent les
            dimensions de l&#039;image, etc.
           </td>
          </tr>

          <tr>
           <td>THUMBNAIL</td>
           <td>
            Un fichier qui contient une miniature, s&#039;il y a un second <code class="literal">IFD</code>.
            Toutes les informations mises en balises à propos de cette miniature
            seront stockées dans cette section.
           </td>
          </tr>

          <tr>
           <td>COMMENT</td>
           <td>En-tête de commentaire des images JPEG.</td>
          </tr>

          <tr>
           <td>EXIF</td>
           <td>
            La section EXIF est une sous section de la section <code class="literal">IFD0</code>. Elle
            contient des informations plus détaillées sur les images. La plupart
            de ces index sont reliés aux appareils numériques.
           </td>
          </tr>

         </tbody>
        
       </table>

      </p>
     </dd>

    
    
     <dt>
<code class="parameter">arrays</code></dt>

      <dd>

      <p class="para">
       Spécifie si chaque section doit être
       un tableau ou non. Les sections <code class="literal">COMPUTED</code>,
       <code class="literal">THUMBNAIL</code> et <code class="literal">COMMENT</code> seront
       toujours transformées en tableau, car elle contiennent des noms qui
       risquent d&#039;être en conflit.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">thumbnail</code></dt>

     <dd>

      <p class="para">
       Lorsque défini à <strong><code>TRUE</code></strong>, la miniature elle-même est lue. Sinon,
       seules les données contenues dans le taf seront lues.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.exif-read-data-returnvalues">
  <h3 class="title">Valeurs de retour</h3>
  <p class="para">
   Retourne un tableau associatif où les indexes sont les noms des en-têtes et les valeurs
   sont les valeurs associées à ces en-têtes. Si aucune donnée ne peut être retournée,
   <span class="function"><strong>exif_read_data()</strong></span> retournera <strong><code>FALSE</code></strong>.
  </p>
 </div>

 <div class="refsect1 changelog" id="refsect1-function.exif-read-data-changelog">
  <h3 class="title">Historique</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>7.2.0</td>
       <td>
        Le paramètre <code class="parameter">filename</code> a été renommé
        <code class="parameter">stream</code> et prend désormais en charge les fichier 
        locaux ou les ressources de flux.
       </td>
      </tr>

      <tr>
       <td>7.2.0</td>
       <td>
        La prise en charge des formats EXIF suivants a été ajoutée :
       <ul class="itemizedlist">
        <li class="listitem">
         <span class="simpara">
          Samsung
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          DJI
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          Panasonic
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          Sony
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          Pentax
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          Minolta
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          Sigma/Foveon
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          AGFA
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          Kyocera
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          Ricoh
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          Epson
         </span>
        </li>
       </ul>
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.exif-read-data-examples">
  <h3 class="title">Exemples</h3>
  <p class="para">
   <div class="example" id="example-3237">
    <p><strong>Exemple #1 Exemple avec <span class="function"><strong>exif_read_data()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"test1.jpg:&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$exif&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">exif_read_data</span><span style="color: #007700">(</span><span style="color: #DD0000">'tests/test1.jpg'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'IFD0'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$exif</span><span style="color: #007700">===</span><span style="color: #0000BB">false&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #DD0000">"Aucun&nbsp;en-tête&nbsp;de&nbsp;donnés&nbsp;n'a&nbsp;été&nbsp;trouvé.&lt;br&nbsp;/&gt;\n"&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"L'image&nbsp;contient&nbsp;des&nbsp;en-têtes&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$exif&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">exif_read_data</span><span style="color: #007700">(</span><span style="color: #DD0000">'tests/test2.jpg'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"test2.jpg:&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />foreach&nbsp;(</span><span style="color: #0000BB">$exif&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$section</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$section&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$key</span><span style="color: #DD0000">.</span><span style="color: #0000BB">$name</span><span style="color: #DD0000">:&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     Le premier appel échoue car l&#039;image n&#039;a pas d&#039;en-tête d&#039;information.
    </p></div>
    <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher quelque chose de similaire à :</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
test1.jpg:
Aucun en-tête de donnés n&#039;a été trouvé.
test2.jpg:
FILE.FileName: test2.jpg
FILE.FileDateTime: 1017666176
FILE.FileSize: 1240
FILE.FileType: 2
FILE.SectionsFound: ANY_TAG, IFD0, THUMBNAIL, COMMENT
COMPUTED.html: width=&quot;1&quot; height=&quot;1&quot;
COMPUTED.Height: 1
COMPUTED.Width: 1
COMPUTED.IsColor: 1
COMPUTED.ByteOrderMotorola: 1
COMPUTED.UserComment: Exif test image.
COMPUTED.UserCommentEncoding: ASCII
COMPUTED.Copyright: Photo (c) M.Boerger, Edited by M.Boerger.
COMPUTED.Copyright.Photographer: Photo (c) M.Boerger
COMPUTED.Copyright.Editor: Edited by M.Boerger.
IFD0.Copyright: Photo (c) M.Boerger
IFD0.UserComment: ASCII
THUMBNAIL.JPEGInterchangeFormat: 134
THUMBNAIL.JPEGInterchangeFormatLength: 523
COMMENT.0: Comment #1.
COMMENT.1: Comment #2.
COMMENT.2: Comment #3end
THUMBNAIL.JPEGInterchangeFormat: 134
THUMBNAIL.Thumbnail.Height: 1
THUMBNAIL.Thumbnail.Height: 1
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-3238">
    <p><strong>Exemple #2 <span class="function"><strong>exif_read_data()</strong></span> avec les flux disponible depuis PHP 7.2.0</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Ouvrir&nbsp;le&nbsp;fichier,&nbsp;cela&nbsp;devrait&nbsp;être&nbsp;en&nbsp;mode&nbsp;binaire<br /></span><span style="color: #0000BB">$fp&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">'/path/to/image.jpg'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'rb'</span><span style="color: #007700">);<br /><br />if&nbsp;(!</span><span style="color: #0000BB">$fp</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Error:&nbsp;Unable&nbsp;to&nbsp;open&nbsp;image&nbsp;for&nbsp;reading'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;Essayez&nbsp;de&nbsp;lire&nbsp;les&nbsp;en-têtes&nbsp;EXIF<br /></span><span style="color: #0000BB">$headers&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">exif_read_data</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">);<br /><br />if&nbsp;(!</span><span style="color: #0000BB">$headers</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Error:&nbsp;Unable&nbsp;to&nbsp;read&nbsp;exif&nbsp;headers'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;Afficher&nbsp;les&nbsp;entêtes&nbsp;'COMPUTED'<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'EXIF&nbsp;Headers:'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$headers</span><span style="color: #007700">[</span><span style="color: #DD0000">'COMPUTED'</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$header&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">'&nbsp;%s&nbsp;=&gt;&nbsp;%s%s'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$header</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher quelque chose de similaire à :</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
EXIF Headers:
 Height =&gt; 576
 Width =&gt; 1024
 IsColor =&gt; 1
 ByteOrderMotorola =&gt; 0
 ApertureFNumber =&gt; f/5.6
 UserComment =&gt;
 UserCommentEncoding =&gt; UNDEFINED
 Copyright =&gt; Denis
 Thumbnail.FileType =&gt; 2
 Thumbnail.MimeType =&gt; image/jpeg
</pre></div>
    </div>
   </div>
  </p>
 </div>

 
 <div class="refsect1 notes" id="refsect1-function.exif-read-data-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    Si <a href="ref.mbstring.html" class="link">mbstring</a> est activé, EXIF va tenter 
    de traiter l&#039;Unicode et de choisir un jeu de caractères comme spécifié par
    <a href="exif.configuration.html#ini.exif.decode-unicode-motorola" class="link">exif.decode_unicode_motorola</a> et 
    <a href="exif.configuration.html#ini.exif.decode-unicode-intel" class="link">exif.decode_unicode_intel</a>. 
    L&#039;extension EXIF ne tentera pas de déterminer l&#039;encodage de lui même, et il 
    appartient à l&#039;utilisateur de spécifier correctement l&#039;encodage à utiliser 
    pour le décodage en définissant l&#039;une des deux directives INI avant 
    d&#039;appeler <span class="function"><strong>exif_read_data()</strong></span>. 
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    Si le paramètre <code class="parameter">stream</code> est utilisé pour passer un 
    flux à la fonction, alors le flux doit être repositionnable. Notez que la 
    position du pointeur d&#039;un fichier n&#039;est pas modifié après le retour de 
    cette fonction.
   </p>
  </p></blockquote>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-function.exif-read-data-seealso">
  <h3 class="title">Voir aussi</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.exif-thumbnail.html" class="function" rel="rdfs-seeAlso">exif_thumbnail()</a> - R&eacute;cup&egrave;re la miniature d'une image</span></li>
    <li class="member"><span class="function"><a href="function.getimagesize.html" class="function" rel="rdfs-seeAlso">getimagesize()</a> - Retourne la taille d'une image</span></li>
    <li class="member"><a href="wrappers.html" class="xref">Liste des protocoles et des gestionnaires support&eacute;s</a></li>
   </ul>
  </p>
 </div>

</div></div></div></body></html>