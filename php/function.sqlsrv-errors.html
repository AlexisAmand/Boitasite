<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Retourne une erreur ainsi que certaines informations sur la derni&egrave;re op&eacute;ration SQLSRV effectu&eacute;e</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.sqlsrv-connect.html">« sqlsrv_connect</a></li>
      <li style="float: right;"><a href="function.sqlsrv-execute.html">sqlsrv_execute »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.sqlsrv.html">Fonctions SQLSRV</a></li>
    <li>Retourne une erreur ainsi que certaines informations sur la derni&egrave;re op&eacute;ration SQLSRV effectu&eacute;e</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.sqlsrv-errors" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">sqlsrv_errors</h1>
  <p class="verinfo">(No version information available, might only be in Git)</p><p class="refpurpose"><span class="refname">sqlsrv_errors</span> &mdash; <span class="dc-title">Retourne une erreur ainsi que certaines informations sur la dernière opération SQLSRV effectuée</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.sqlsrv-errors-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   
   <span class="methodname"><strong>sqlsrv_errors</strong></span>
    ([ <span class="methodparam"><span class="type">int</span> <code class="parameter">$errorsOrWarnings</code></span>
  ] ) : <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span></div>

  <p class="para rdfs-comment">
   Retourne une erreur ainsi que certaines informations sur la dernière opération
   SQLSRV effectuée.
  </p>
 </div>

 
 <div class="refsect1 parameters" id="refsect1-function.sqlsrv-errors-parameters">
  <h3 class="title">Liste de paramètres</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">errorsOrWarnings</code></dt>

     <dd>

      <p class="para">
       Détermine si l&#039;on doit retourner des informations sur l&#039;erreur,
       des informations sur l&#039;alerte, ou les deux. Si ce paramètre n&#039;est
       pas fourni, les deux informations seront retournées. Voici la
       liste des valeurs supportées par ce paramètre : SQLSRV_ERR_ALL,
       SQLSRV_ERR_ERRORS, SQLSRV_ERR_WARNINGS.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.sqlsrv-errors-returnvalues">
  <h3 class="title">Valeurs de retour</h3>
  <p class="para">
   Si une erreur et/ou une alerte survient lors de la dernière opération SQLSRV,
   un tableau de tableaux contenant les informations de l&#039;erreur sera retourné.
   Si aucune erreur ni alerte ne survient, <strong><code>NULL</code></strong> sera retourné. Le tableau
   suivant décrit la structure du tableau retourné :
   <table class="doctable table">
   <caption><strong>Tableau retourné par sqlsrv_errors</strong></caption>
   
    <thead>
     <tr>
      <th>Clé</th>
      <th>Description</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>SQLSTATE</td>
      <td>
       Pour les erreurs originaires du driver ODBC, ce sera le SQLSTATE retourné
       par ODBC. Pour les erreurs originaires du Microsoft Drivers pour PHP
       pour le serveur SQL, un SQLSTATE de IMSSP. Pour les alertes originaires
       du Microsoft Drivers pour PHP pour le serveur SQL, un SQLSTATE de 01SSP.
      </td>
     </tr>

     <tr>
      <td>code</td>
      <td>
       Pour les erreurs originaires du serveur SQL, le code erreur natif du serveur
       SQL. Pour les erreurs originaires du ODBC driver, le code erreur retourné
       par ODBC. Pour les erreurs originaires du Microsoft Drivers pour PHP pour le
       serveur SQL, le code erreur Microsoft Drivers pour PHP pour le serveur SQL.
      </td>
     </tr>

     <tr>
      <td>message</td>
      <td>Une description de l&#039;erreur.</td>
     </tr>

    </tbody>
   
  </table>

  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.sqlsrv-errors-examples">
  <h3 class="title">Exemples</h3>
  <p class="para">
   <div class="example" id="example-2598">
    <p><strong>Exemple #1 Exemple avec <span class="function"><strong>functionname()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$serverName&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"serverName/sqlexpress"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$connectionInfo&nbsp;</span><span style="color: #007700">=&nbsp;array(&nbsp;</span><span style="color: #DD0000">"Database"</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"dbName"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"UID"</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"username"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"PWD"</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"password"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sqlsrv_connect</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$serverName</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$connectionInfo</span><span style="color: #007700">);<br />if(&nbsp;</span><span style="color: #0000BB">$conn&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">false&nbsp;</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(&nbsp;</span><span style="color: #0000BB">print_r</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">sqlsrv_errors</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;Requête&nbsp;pour&nbsp;sélectionner&nbsp;un&nbsp;nom&nbsp;de&nbsp;colonne&nbsp;invalide.&nbsp;*/<br /></span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;BadColumnName&nbsp;FROM&nbsp;Table_1"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;L'exécution&nbsp;de&nbsp;la&nbsp;requête&nbsp;va&nbsp;échouer&nbsp;car&nbsp;le&nbsp;nom&nbsp;de&nbsp;la&nbsp;colonne&nbsp;n'existe&nbsp;pas.&nbsp;*/<br /></span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sqlsrv_query</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">);<br />if(&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">false&nbsp;</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if(&nbsp;(</span><span style="color: #0000BB">$errors&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sqlsrv_errors</span><span style="color: #007700">()&nbsp;)&nbsp;!=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(&nbsp;</span><span style="color: #0000BB">$errors&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"SQLSTATE:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$error</span><span style="color: #007700">[&nbsp;</span><span style="color: #DD0000">'SQLSTATE'</span><span style="color: #007700">].</span><span style="color: #DD0000">"&lt;br&nbsp;/&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"code:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$error</span><span style="color: #007700">[&nbsp;</span><span style="color: #DD0000">'code'</span><span style="color: #007700">].</span><span style="color: #DD0000">"&lt;br&nbsp;/&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"message:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$error</span><span style="color: #007700">[&nbsp;</span><span style="color: #DD0000">'message'</span><span style="color: #007700">].</span><span style="color: #DD0000">"&lt;br&nbsp;/&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.sqlsrv-errors-notes">
  <h3 class="title">Notes</h3>
  <p class="para">
   Par défaut, les alertes générées lors d&#039;un appel à une fonction SQLSRV
   sont traitées comme des erreurs. Cela signifie que si une alerte survient
   lors d&#039;un appel à une fonction SQLSRV, la fonction retournera <strong><code>FALSE</code></strong>.
   Cependant, les alertes qui correspondent aux SQLSTATE de valeurs
   01000, 01001, 01003, et 01S02 ne seront jamais traitées comme des erreurs.
   Pour plus d&#039;informations sur la façon de modifier ce comportement, reportez-vous
   à la documentation sur la fonction <span class="function"><a href="function.sqlsrv-configure.html" class="function">sqlsrv_configure()</a></span>
   ainsi que sur la configuration de WarningsReturnAsErrors.
  </p>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-function.sqlsrv-errors-seealso">
  <h3 class="title">Voir aussi</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.sqlsrv-configure.html" class="function" rel="rdfs-seeAlso">sqlsrv_configure()</a> - Modifie la configuration du gestionnaire d'erreurs et d'historisations du driver</span></li>
   </ul>
  </p>
 </div>

</div></div></div></body></html>