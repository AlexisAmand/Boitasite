<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Trucs pratiques</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="tutorial.firstpage.html">« Votre premi&egrave;re page PHP</a></li>
      <li style="float: right;"><a href="tutorial.forms.html">Utiliser un formulaire »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="tutorial.html">Une introduction &agrave; PHP</a></li>
    <li>Trucs pratiques</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="tutorial.useful" class="section">
   <h2 class="title">Trucs pratiques</h2>
   <p class="para">
    Réalisons maintenant quelque chose de plus puissant. Nous allons
    vérifier le type de navigateur que le visiteur de notre site utilise.
    Pour cela, nous allons accéder aux informations que le navigateur
    du visiteur nous envoie, lors de sa requête HTTP. Cette information
    est stockée dans une <a href="language.variables.html" class="link">variable</a>.
    Les variables sont faciles à repérer, car elles commencent toutes par
    un signe dollar. La variable qui nous intéresse ici est
    <var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER['HTTP_USER_AGENT']</a></var>.
   </p>
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <p class="para">
     <var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER</a></var> est une
     variable spéciale de PHP, qui contient toutes les informations
     relatives au serveur web. C&#039;est une variable réservée de PHP,
     et une superglobale. Reportez-vous aux pages du manuel traitant des
     <a href="language.variables.superglobals.html" class="link">Auto-globales</a>
     (aussi connues sous le nom de super-globales). Ces
     variables spéciales ont été introduites en
     <a href="https://www.php.net/releases/4_1_0.php" class="link external">&raquo;&nbsp;PHP 4.1.0</a>. Auparavant,
     il fallait utiliser les variables <var class="varname">$HTTP_*_VARS</var>, comme
     <var class="varname">$HTTP_SERVER_VARS</var>. Depuis PHP 5.4.0, ces anciennes 
     variables ont été retirées. (Voir aussi la note sur
     <a href="tutorial.oldcode.html" class="link">l&#039;ancien code</a>.)
    </p>
   </p></blockquote>
   <p class="para">
    Pour afficher cette variable, nous pouvons simplement faire :
   </p>
   <p class="para">
    <div class="example" id="example-4">
    <p><strong>Exemple #1 Afficher le contenu d&#039;une variable (élément de tableau)</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'HTTP_USER_AGENT'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     Un résultat possible du script pourra alors être :
    </p></div>
    <div class="example-contents screen"><br />
Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)<br />
    </div>
   </div>
   </p>
   <p class="para">
    Il y a de nombreux <a href="language.types.html" class="link">types</a> de
    variables disponibles en PHP. Dans l&#039;exemple ci-dessus, nous avons affiché
    un élément de <a href="language.types.array.html" class="link">Tableau (Array)</a>.
    Les tableaux peuvent être très utiles.
   </p>
   <p class="para">
    <var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER</a></var> est juste une variable qui est automatiquement
    disponible dans votre script. Une liste de toutes les variables qui sont
    rendues disponibles est fournie dans la section
    <a href="reserved.variables.html" class="link">Variables réservées</a> ou vous
    pouvez aussi en obtenir une liste complète en lisant l&#039;affichage de la fonction
    <span class="function"><a href="function.phpinfo.html" class="function">phpinfo()</a></span> utilisée dans l&#039;exemple de la section précédente.
   </p>
   <p class="para">
    Vous pouvez ajouter plusieurs commandes PHP dans une balise PHP, et créer
    de petits blocs de code qui réalisent des opérations plus complexes
    qu&#039;un simple affichage. Par exemple, si nous voulons vérifier que le
    navigateur est bien de la famille des Internet Explorer, nous pouvons
    faire cela :
   </p>
   <p class="para">
    <div class="example" id="example-5">
     <p><strong>Exemple #2 Exemple utilisant les
     <a href="language.control-structures.html" class="link">structures de contrôle</a> et
     les <a href="language.functions.html" class="link">fonctions</a></strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'HTTP_USER_AGENT'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'MSIE'</span><span style="color: #007700">)&nbsp;!==&nbsp;</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Vous&nbsp;utilisez&nbsp;Internet&nbsp;Explorer&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     <div class="example-contents"><p>
      Le résultat de ce script, si vous utilisez Internet Explorer, sera :
     </p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
Vous utilisez Internet Explorer&lt;br /&gt;
</pre></div>
     </div>
    </div>
   </p>
   <p class="para">
    Ici, nous introduisons plusieurs nouveaux concepts. Nous avons une
    structure <a href="control-structures.if.html" class="link">if</a>.
    Si vous êtes familier avec les syntaxes de base du langage C, cela
    ne vous surprendra pas. Si vous ne connaissez pas assez le langage C ou
    un autre langage dont la syntaxe est similaire à celle ci-dessus, il
    vaudrait mieux que vous lisiez une introduction à PHP, et assimiliez
    les premiers chapitres, ou bien lisez le chapitre consacré à
    <a href="langref.html" class="link">la référence du langage</a>.
   </p>
   <p class="para">
    Le second concept que nous avons introduit est la fonction <span class="function"><a href="function.strpos.html" class="function">strpos()</a></span>.
    <span class="function"><a href="function.strpos.html" class="function">strpos()</a></span> est une fonction intégrée à PHP, qui recherche
    la présence d&#039;une chaîne dans une autre. Dans notre cas, nous
    avons recherché la chaîne <code class="literal">&quot;MSIE&quot;</code> dans la chaîne
    <var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER['HTTP_USER_AGENT']</a></var>. Si cette
    chaîne est trouvée, la fonction retourne sa position dans la chaîne et, sinon, <strong><code>FALSE</code></strong>.
    Si elle ne retourne pas <strong><code>FALSE</code></strong>, la structure <a href="control-structures.if.html" class="link">if</a>
    reçoit <strong><code>TRUE</code></strong> et le code entre accolades {} est exécuté. Sinon, le code n&#039;est pas
    exécuté. N&#039;hésitez pas à
    expérimenter d&#039;autres exemples, à l&#039;aide de
    <a href="control-structures.if.html" class="link">if</a>,
    <a href="control-structures.else.html" class="link">else</a>, et d&#039;autres
    fonctions comme <span class="function"><a href="function.strtoupper.html" class="function">strtoupper()</a></span> et
    <span class="function"><a href="function.strlen.html" class="function">strlen()</a></span>. Chaque page de la documentation contient aussi
    des exemples. Si vous n&#039;êtes pas sûr de l&#039;utilisation de ces fonctions, vous devez lire
    la page du manuel
    &quot;<a href="about.prototypes.html" class="link">comment lire une définition de fonction</a>&quot;
    ainsi que la <a href="language.functions.html" class="link">section sur les fonctions PHP</a>.
   </p>
   <p class="para">
    Nous pouvons maintenant progresser et vous montrer comment utiliser le mode PHP,
    au milieu du code HTML :
   </p>
   <p class="para">
    <div class="example" id="example-6">
     <p><strong>Exemple #3 Passer du mode PHP au mode HTML et vice-versa</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'HTTP_USER_AGENT'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'MSIE'</span><span style="color: #007700">)&nbsp;!==&nbsp;</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">)&nbsp;{<br /></span><span style="color: #0000BB">?&gt;<br /></span>&lt;h3&gt;strpos()&nbsp;n'a&nbsp;pas&nbsp;retourné&nbsp;FALSE&lt;/h3&gt;<br />&lt;p&gt;Vous&nbsp;utilisez&nbsp;Internet&nbsp;Explorer&lt;/p&gt;<br /><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">}&nbsp;else&nbsp;{<br /></span><span style="color: #0000BB">?&gt;<br /></span>&lt;h3&gt;strpos()&nbsp;a&nbsp;retourné&nbsp;FALSE&lt;/h3&gt;<br />&lt;p&gt;Vous&nbsp;n'utilisez&nbsp;pas&nbsp;Internet&nbsp;Explorer&lt;/p&gt;<br /><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     <div class="example-contents"><p>
      Un exemple de résultat obtenu dans ce script est :
     </p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
&lt;h3&gt;strpos() n&#039;a pas retourné FALSE&lt;/h3&gt;
&lt;p&gt;Vous utilisez Internet Explorer&lt;/p&gt;
</pre></div>
     </div>
    </div>
   </p>
   <p class="para">
    Au lieu d&#039;utiliser une commande <span class="function"><a href="function.echo.html" class="function">echo</a></span>, pour afficher
    du texte, vous pouvez utiliser du code HTML pur. Le point important à noter
    ici et que la logique de programmation est conservée. Seul un des deux
    blocs HTML sera affiché, suivant le résultat de la fonction <span class="function"><a href="function.strpos.html" class="function">strpos()</a></span>.
    En d&#039;autres termes, cela dépend si la chaîne <code class="literal">MSIE</code>
    a été trouvée ou non.
   </p>
  </div></div></div></body></html>