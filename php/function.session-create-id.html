<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Cr&eacute;er un nouvel ID de session</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.session-commit.html">« session_commit</a></li>
      <li style="float: right;"><a href="function.session-decode.html">session_decode »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.session.html">Fonctions Session</a></li>
    <li>Cr&eacute;er un nouvel ID de session</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.session-create-id" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">session_create_id</h1>
  <p class="verinfo">(PHP 7 &gt;= 7.1.0)</p><p class="refpurpose"><span class="refname">session_create_id</span> &mdash; <span class="dc-title">Créer un nouvel ID de session</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.session-create-id-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>session_create_id</strong></span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$prefix</code></span>
  ] ) : <span class="type">string</span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>session_create_id()</strong></span> est utilisé pour créer un nouvel
   ID de session pour la session courante. Ceci retourne un ID de
   session sans colision.
  </p>
  <p class="para">
   Si la session n&#039;est pas active, la vérification de colision est omise.
  </p>
  <p class="para">
   L&#039;ID de session est créé en accord avec les paramètres php.ini.
  </p>
  <p class="para">
   Il est important d&#039;utiliser le même ID utilisateur de votre serveur web
   pour le script de tâche de Ramasse-miettes (Garbage Collection).
   Sans quoi, vous risquez d&#039;avoir des problèmes de permissions particulièrement
   avec les gestionnaires de sauvegarde des fichiers.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.session-create-id-parameters">
  <h3 class="title">Liste de paramètres</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">prefix</code></dt>

      <dd>

       <p class="para">
        Si <code class="parameter">prefix</code> est spécifié, le nouvel ID de session
        est préfixé par <code class="parameter">prefix</code>. Pas tous
        les caractères sont autorisés dans l&#039;ID de session. Les caractères
        parmis <code class="literal">a-z A-Z 0-9 , (virgule) et -
        (moins)</code> sont autorisés..
       </p> 
      </dd>

     
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.session-create-id-returnvalues">
  <h3 class="title">Valeurs de retour</h3>
  <p class="para">
   <span class="function"><strong>session_create_id()</strong></span> retourne un nouvel ID de session
   sans colision pour la session courante. Si c&#039;est utilisé sans une session
   active, la vérification de colision est omise.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.session-create-id-examples">
  <h3 class="title">Exemples</h3>
  <p class="para">
   <div class="example" id="example-5379">
    <p><strong>Exemple #1 Exemple de <span class="function"><strong>session_create_id()</strong></span> avec <span class="function"><a href="function.session-regenerate-id.html" class="function">session_regenerate_id()</a></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Ma&nbsp;fonction&nbsp;de&nbsp;session&nbsp;start&nbsp;support&nbsp;la&nbsp;gestion&nbsp;d'horodatage<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">my_session_start</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">session_start</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;N'autorise&nbsp;pas&nbsp;l'utilisation&nbsp;des&nbsp;anciens&nbsp;ID&nbsp;de&nbsp;session<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(!empty(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'deleted_time'</span><span style="color: #007700">])&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'deleted_time'</span><span style="color: #007700">]&nbsp;&lt;&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()&nbsp;-&nbsp;</span><span style="color: #0000BB">180</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">session_destroy</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">session_start</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;Ma&nbsp;fonction&nbsp;de&nbsp;regénération&nbsp;d'ID<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">my_session_regenerate_id</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Appel&nbsp;à&nbsp;session_create_id()&nbsp;quand&nbsp;la&nbsp;session&nbsp;est&nbsp;active<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;pour&nbsp;être&nbsp;sûr&nbsp;qu'il&nbsp;n'y&nbsp;a&nbsp;pas&nbsp;de&nbsp;colision.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">session_status</span><span style="color: #007700">()&nbsp;!=&nbsp;</span><span style="color: #0000BB">PHP_SESSION_ACTIVE</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">session_start</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;AVERTISSEMENT:&nbsp;N'utiliser&nbsp;jamais&nbsp;des&nbsp;chaînes&nbsp;confidentielle&nbsp;comme&nbsp;préfix&nbsp;!<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$newid&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">session_create_id</span><span style="color: #007700">(</span><span style="color: #DD0000">'myprefix-'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Définit&nbsp;l'horodatage&nbsp;de&nbsp;suppression.<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Les&nbsp;données&nbsp;de&nbsp;session&nbsp;ne&nbsp;doivent&nbsp;pas&nbsp;être&nbsp;supprimer&nbsp;immédiatement&nbsp;pour&nbsp;certaines&nbsp;raisons.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'deleted_time'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Termine&nbsp;la&nbsp;session<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">session_commit</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Assurez&nbsp;vous&nbsp;d'accepter&nbsp;les&nbsp;ID&nbsp;de&nbsp;session&nbsp;définit&nbsp;par&nbsp;l'utilisateur<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;NOTE:&nbsp;Vous&nbsp;devez&nbsp;activer&nbsp;use_strict_mode&nbsp;pour&nbsp;les&nbsp;opérations&nbsp;normales.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">ini_set</span><span style="color: #007700">(</span><span style="color: #DD0000">'session.use_strict_mode'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Définir&nbsp;un&nbsp;nouvel&nbsp;ID&nbsp;de&nbsp;session&nbsp;personalisé<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">session_id</span><span style="color: #007700">(</span><span style="color: #0000BB">$newid</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Démarrage&nbsp;avec&nbsp;un&nbsp;ID&nbsp;de&nbsp;session&nbsp;personalisé<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">session_start</span><span style="color: #007700">();<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;Assurez&nbsp;vous&nbsp;que&nbsp;use_strict_mode&nbsp;est&nbsp;activé.<br />//&nbsp;use_strict_mode&nbsp;est&nbsp;obligatoire&nbsp;pour&nbsp;des&nbsp;raisons&nbsp;de&nbsp;sécurités.<br /></span><span style="color: #0000BB">ini_set</span><span style="color: #007700">(</span><span style="color: #DD0000">'session.use_strict_mode'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">my_session_start</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;L'ID&nbsp;de&nbsp;session&nbsp;doit&nbsp;être&nbsp;regénéré&nbsp;quand<br />//&nbsp;&nbsp;-&nbsp;Un&nbsp;utilisateur&nbsp;se&nbsp;connecte<br />//&nbsp;&nbsp;-&nbsp;Un&nbsp;utilisateur&nbsp;se&nbsp;déconnecte<br />//&nbsp;&nbsp;-&nbsp;Une&nbsp;certaine&nbsp;période&nbsp;s'est&nbsp;écoulé<br /></span><span style="color: #0000BB">my_session_regenerate_id</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;Logique&nbsp;d'application<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.session-create-id-seealso">
  <h3 class="title">Voir aussi</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.session-regenerate-id.html" class="function" rel="rdfs-seeAlso">session_regenerate_id()</a> - Remplace l'identifiant de session courant par un nouveau</span></li>
    <li class="member"><span class="function"><a href="function.session-start.html" class="function" rel="rdfs-seeAlso">session_start()</a> - D&eacute;marre une nouvelle session ou reprend une session existante</span></li>
    <li class="member"><a href="session.configuration.html#ini.session.use-strict-mode" class="link">session.use_strict_mode</a></li>
    <li class="member"><span class="methodname"><a href="sessionhandler.create-sid.html" class="methodname" rel="rdfs-seeAlso">SessionHandler::create_sid()</a> - Retourne un nouvel ID de session</span></li>
   </ul>
  </p>
 </div>

</div></div></div></body></html>