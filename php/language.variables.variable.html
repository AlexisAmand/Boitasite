<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Les variables dynamiques</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="language.variables.scope.html">« Port&eacute;e des variables</a></li>
      <li style="float: right;"><a href="language.variables.external.html">Variables externes &agrave; PHP »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.variables.html">Les variables</a></li>
    <li>Les variables dynamiques</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.variables.variable" class="sect1">
  <h2 class="title">Les variables dynamiques</h2>
  
  <p class="simpara">
   Il est pratique d&#039;avoir parfois des noms de variables qui sont variables.
   C&#039;est-à-dire un nom de variable qui est affecté et utilisé
   dynamiquement. Une variable classique est affectée avec
   l&#039;instruction suivante :
  </p>
  
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'bonjour'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  
  <p class="simpara">
   Une variable dynamique prend la valeur d&#039;une variable et l&#039;utilise
   comme nom d&#039;une autre variable. Dans l&#039;exemple ci-dessous,
   <em class="emphasis">bonjour</em> peut être utilisé comme le nom d&#039;une
   variable en utilisant le &quot;$$&quot; précédent la variable.
   C&#039;est-à-dire :
  </p>
  
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">$</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'monde'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  
  <p class="simpara">
   À ce niveau, deux variables ont été définies et
   stockées dans l&#039;arbre des symboles PHP : <var class="varname">$a</var> avec comme valeur
   &quot;bonjour&quot; et <var class="varname">$bonjour</var> avec comme valeur &quot;monde&quot;. Alors, l&#039;instruction :
  </p>
  
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$a</span><span style="color: #DD0000">&nbsp;</span><span style="color: #007700">${</span><span style="color: #0000BB">$a</span><span style="color: #007700">}</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  
  <p class="simpara">
   produira le même affichage que :
  </p>
  
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$a</span><span style="color: #DD0000">&nbsp;</span><span style="color: #0000BB">$bonjour</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  
  <p class="simpara">
   c&#039;est-à-dire : <span class="computeroutput">bonjour monde</span>.
  </p>
  
  <p class="simpara">
   Afin de pouvoir utiliser les variables dynamiques avec les tableaux,
   vous avez à résoudre un problème ambigu. Si vous
   écrivez <var class="varname">$$a[1]</var>, l&#039;analyseur a besoin de savoir si vous
   parler de la variable qui a pour nom <var class="varname">$a[1]</var> ou bien si vous
   voulez l&#039;index [1] de la variable <var class="varname">$$a</var>. La syntaxe pour résoudre
   cette ambiguïté est la suivante : <var class="varname">${$a[1]}</var> pour le premier
   cas et <var class="varname">${$a}[1]</var> pour le deuxième.
  </p>
  
  <p class="simpara">
   On peut également accéder aux propriétés d&#039;une classe
   en utilisant les noms des variables. Le nom de la variable
   sera résolu en utilisant le scope depuis lequel l&#039;appel
   s&#039;effectue. Par exemple, si vous avez une expression de la forme
   <var class="varname">$foo->$bar</var>, alors le scope local sera
   examiné pour <var class="varname">$bar</var> et sa valeur sera utilisée
   comme nom pour la propriété de <var class="varname">$foo</var>.
   Ce comportement reste valide si <var class="varname">$bar</var>
   est un tableau.
  </p>
  
   <div class="caution"><strong class="caution">Attention</strong>
    <p class="simpara">
     Déréférencer une propriété de variable qui est un tableau a différente 
     sémantique entre PHP 5 et PHP 7. 
     <a href="migration70.incompatible.html#migration70.incompatible.variable-handling.indirect" class="link">Le Guide de migration PHP 7.0</a> 
     inclut d&#039;autres détails sur les types d&#039;expressions qui ont changé, et 
     comment placer des accolades pour éviter toute ambiguïté.
    </p>
   </div>

  <p class="simpara">
   Les accolades peuvent aussi être utilisées, pour clairement délimiter
   le nom de la propriété. Ceci est utile lors de l&#039;accès à des valeurs
   d&#039;une propriété qui contient un tableau, lorsque le nom de la propriété
   est composé de plusieurs parties, ou lorsque le nom de la propriété
   contient des caractères non valides (i.e. depuis la fonction
   <span class="function"><a href="function.json-decode.html" class="function">json_decode()</a></span> ou <a href="book.simplexml.html" class="link">SimpleXML</a>).
  </p>
  
  <p class="para">
   <div class="example" id="example-94">
    <p><strong>Exemple #1 Exemple de propriété variable</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">foo&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$bar&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'I&nbsp;am&nbsp;bar.'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'I&nbsp;am&nbsp;A.'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'I&nbsp;am&nbsp;B.'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'I&nbsp;am&nbsp;C.'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$r&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'I&nbsp;am&nbsp;r.'</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">foo</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$bar&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'bar'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$baz&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'bar'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'baz'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'quux'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$bar&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;{</span><span style="color: #0000BB">$baz</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]}&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$start&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'b'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$end&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ar'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;{</span><span style="color: #0000BB">$start&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$end</span><span style="color: #007700">}&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'arr'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;{</span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]}&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher :</p></div>
    <div class="example-contents screen"><br />
     I am bar.<br />
     I am bar.<br />
     I am bar.<br />
     I am r.<br />
    </div>
   </div>
  </p>
  
  <div class="warning"><strong class="warning">Avertissement</strong>
   <p class="simpara">
    Notez que les variables dynamiques ne peuvent pas être utilisées
    avec les
    <a href="language.variables.superglobals.html" class="link">tableaux Superglobaux</a> dans
    une fonction ou une classe. La variable <code class="literal">$this</code> est aussi
    une variable spéciale qui ne peut être référencée dynamiquement.
   </p>
  </div>
  
 </div></div></div></body></html>