<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Installation sous Netscape et iPlanet Enterprise Serveur sur un syst&egrave;me Sun Solaris</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="install.unix.lighttpd-14.html">« Lighttpd 1.4 sur les syst&egrave;mes Unix</a></li>
      <li style="float: right;"><a href="install.unix.litespeed.html">LiteSpeed Web Server/OpenLiteSpeed Web Server on Unix systems »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="install.unix.html">Installation sur les syst&egrave;mes UNIX</a></li>
    <li>Installation sous Netscape et iPlanet Enterprise Serveur sur un syst&egrave;me Sun Solaris</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="install.unix.sun" class="sect1">
    <h2 class="title">Installation sous Netscape et iPlanet Enterprise Serveur sur un système Sun Solaris</h2>
    <p class="para">
     Cette section contient les notes et détails spécifiques à l&#039;installation de PHP sur
     les serveurs Web Sun Java System Web Server,
     Sun ONE Web Server, iPlanet et Netscape server sur les systèmes Sun Solaris.
    </p>
    <p class="para">
     Depuis PHP 4.3.3, vous pouvez utiliser les scripts PHP avec
     le <a href="ref.nsapi.html" class="link">module NSAPI</a> pour
     <a href="install.unix.sun.html#install.unix.sun.specialpages" class="link">gérer des listes de dossiers
     et des pages d&#039;erreurs personnalisées</a>. Des fonctions supplémentaires
     sont disponibles pour assurer la compatibilité avec Apache.
     Pour du support sur les serverus courants, voyez la
     <a href="install.unix.sun.html#install.unix.sun.notes" class="link">note sur les sous-requêtes</a>.
    </p>
    <p class="para">
     Vous pouvez trouver plus d&#039;informations sur la configuration de
     PHP avec Netscape Enterprise Server :
     <a href="http://benoit.noss.free.fr/php/install-php4.html" class="link external">&raquo;&nbsp;http://benoit.noss.free.fr/php/install-php4.html</a>
    </p>
    
    <p class="para">
     Pour construire PHP avec les serveurs Web Sun JSWS/Sun ONE WS/iPlanet/Netscape, entrez
     le répertoire valide d&#039;installation pour l&#039;option
     <a href="configure.about.html#configure.with-nsapi" class="link">--with-nsapi=[DIR]</a>.
     Le répertoire par défaut est habituellement
     <var class="filename">/opt/netscape/suitespot/</var>.
     Lisez également le fichier <var class="filename">/php-xxx-version/sapi/nsapi/nsapi-readme.txt</var>.
    </p>
    <p class="para">
     <ol type="1">
      <li class="listitem">
       <p class="para">
        Installez les packages suivants depuis le serveur
        <a href="http://www.sunfreeware.com/" class="link external">&raquo;&nbsp;http://www.sunfreeware.com/</a>
        ou un miroir ad hoc :
        <ul class="simplelist">
         <li class="member"><var class="filename">autoconf-2.13</var></li>
         <li class="member"><var class="filename">automake-1.4</var></li>
         <li class="member"><var class="filename">bison-1_25-sol26-sparc-local</var></li>
         <li class="member"><var class="filename">flex-2_5_4a-sol26-sparc-local</var></li>
         <li class="member"><var class="filename">gcc-2_95_2-sol26-sparc-local</var></li>
         <li class="member"><var class="filename">gzip-1.2.4-sol26-sparc-local</var></li>
         <li class="member"><var class="filename">m4-1_4-sol26-sparc-local</var></li>
         <li class="member"><var class="filename">make-3_76_1-sol26-sparc-local</var></li>
         <li class="member">
          <var class="filename">mysql-3.23.24-beta</var> (si vous voulez le support MySQL)
         </li>
         <li class="member"><var class="filename">perl-5_005_03-sol26-sparc-local</var></li>
         <li class="member"><var class="filename">tar-1.13</var> (GNU tar)</li>
        </ul>
       </p>
      </li>
      <li class="listitem">
       <span class="simpara">
        Assurez-vous que le path inclut bien les dossiers nécessaires :
        <code class="literal">PATH=.:/usr/local/bin:/usr/sbin:/usr/bin:/usr/ccs/bin</code>
        et rendez-le accessible à votre système avec <strong class="userinput"><code>export PATH</code></strong>.
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <strong class="userinput"><code>gunzip php-x.x.x.tar.gz</code></strong>
        (si vous avez une distribution <var class="filename">.gz</var>, ou bien allez en 4).
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <strong class="userinput"><code>tar xvf php-x.x.x.tar</code></strong>
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        Passez dans votre dossier d&#039;extraction PHP :
        <strong class="userinput"><code>cd ../php-x.x.x</code></strong>
       </span>
      </li>
      <li class="listitem">
       <p class="para">
        Pour les étapes suivantes, assurez-vous que
        <var class="filename">/opt/netscape/suitespot/</var>
        correspond bien à votre installation du serveur netscape. Sinon, indiquez le chemin
        correct :
        <div class="example-contents">
<div class="shellcode"><pre class="shellcode">./configure --with-mysql=/usr/local/mysql \
--with-nsapi=/opt/netscape/suitespot/ \
--enable-libgcc</pre>
</div>
        </div>

       </p>
      </li>
      <li class="listitem">
       <span class="simpara">
        Faites un <strong class="command">make</strong> puis un <strong class="command">make install</strong>.
       </span>
      </li>
     </ol>
    </p>
    <p class="para">
     Après avoir fait l&#039;installation de base et lu les fichiers
     readme.txt, vous pouvez avoir besoin de faire des configurations
     supplémentaires.
    </p>
    <p class="formalpara">
     <h5 class="title">Instructions de configuration pour Sun/iPlanet/Netscape</h5>
     <p class="para">
      Tout d&#039;abord, vous aurez besoin d&#039;ajouter des chemins dans la variable
      <var class="varname">LD_LIBRARY_PATH</var> pour que Netscape trouve son bonheur.
      Il est préférable de le faire dans le script de démarrage du serveur
      Netscape. Les utilisateurs Windows peuvent ignorer cette étape. Le script
      de démarrage est souvent situé dans :
      <var class="filename">/path/to/server/https-servername/start</var>.
      Vous aurez peut être à éditer le fichier de configuration situé dans
      <var class="filename">/path/to/server/https-servername/config/</var>.
      <ol type="1">
       <li class="listitem">
        <p class="para">
         Ajoutez les lignes suivantes dans <var class="filename">mime.types</var> en tant qu&#039;administrateur :
         <div class="example-contents screen">
<div class="cdata"><pre>
type=magnus-internal/x-httpd-php exts=php
</pre></div>
         </div>
        </p>
       </li>
       <li class="listitem">
        <p class="para">
         Éditez le fichier <var class="filename">magnus.conf</var> (pour les serveurs &gt;= 6) ou
         le fichier <var class="filename">obj.conf</var> (pour les serveurs &lt; 6) et
         ajoutez-y les lignes suivantes.
         shlib peut varier en fonction de votre OS. Pour Unix, c&#039;est
         quelque chose comme <var class="filename">/opt/netscape/suitespot/bin/libphp4.so</var>.
         Il est conseillé de placer les lignes suivantes après les
         lignes de <code class="literal">mime types init</code>.
         <div class="example-contents">
<div class="cdata"><pre>
Init fn=&quot;load-modules&quot; funcs=&quot;php4_init,php4_execute,php4_auth_trans&quot; shlib=&quot;/opt/netscape/suitespot/bin/libphp4.so&quot;
Init fn=&quot;php4_init&quot; LateInit=&quot;yes&quot; errorString=&quot;Failed to initialize PHP!&quot; [php_ini=&quot;/path/to/php.ini&quot;]
</pre></div>
         </div>

         (PHP &gt;= 4.3.3) Le paramètre <code class="literal">php_ini</code> est optionnel
         mais, avec lui, vous pouvez placer votre <var class="filename">php.ini</var> dans le dossier
         de configuration de votre serveur web.
        </p>
       </li>
       <li class="listitem">
        <p class="para">
         Configurez l&#039;objet par défaut dans le fichier <var class="filename">obj.conf</var>
         (pour les classes de serveur virtuel [version 6.0+] dans leur fichier
         <var class="filename">vserver.obj.conf</var>) :
         <div class="example-contents">
<div class="cdata"><pre>
&lt;Object name=&quot;default&quot;&gt;
.
.
.
.#NOTE this next line should happen after all &#039;ObjectType&#039; and before all &#039;AddLog&#039; lines
Service fn=&quot;php4_execute&quot; type=&quot;magnus-internal/x-httpd-php&quot; [inikey=value inikey=value ...]
.
.
&lt;/Object&gt;
</pre></div>
         </div>

         (PHP &gt;= 4.3.3) Comme paramètres additionnels, vous pouvez ajouter
         quelques valeurs spéciales dans le <var class="filename">php.ini</var>. Par exemple, vous pouvez définir
         un spécifique <code class="literal">docroot=&quot;/path/to/docroot&quot;</code> où
         le contexte <code class="literal">php4_execute</code> est appelé. Pour les init-keys booléens,
         utilisez les valeurs 0/1, et non pas <code class="literal">&quot;On&quot;,&quot;Off&quot;,...</code>
         (cela ne fonctionnera pas correctement), e.g.
         <code class="literal">zlib.output_compression=1</code> au lieu de
         <code class="literal">zlib.output_compression=&quot;On&quot;</code>
        </p>
       </li>
       <li class="listitem">
        <p class="para">
         Cela est nécessaire uniquement si vous voulez configurer un répertoire
         pour accueillir des scripts PHP tout comme un répertoire
         <var class="filename">cgi-bin</var> :
         <div class="example-contents">
<div class="cdata"><pre>
&lt;Object name=&quot;x-httpd-php&quot;&gt;
ObjectType fn=&quot;force-type&quot; type=&quot;magnus-internal/x-httpd-php&quot;
Service fn=php4_execute [inikey=value inikey=value ...]
&lt;/Object&gt;
</pre></div>
         </div>

         Après cela, vous pouvez configurer un répertoire dans le serveur d&#039;administration
         et y assigner le style <code class="literal">x-httpd-php</code>. Tous les fichiers dans ce répertoire
         seront exécutés comme étant du PHP. C&#039;est pratique pour cacher l&#039;usage de PHP
         en renommant les fichiers en <var class="filename">.html</var>.
        </p>
       </li>
       <li class="listitem">
        <p class="para">
         Configuration de l&#039;identification : les identifications PHP ne peuvent être
         utilisées avec aucune autre identification.
         TOUTES LES IDENTIFICATIONS SONT PASSEES À VOS SCRIPTS PHP.
         Pour configurer l&#039;identification PHP pour tout le serveur web, ajoutez
         la ligne suivante à votre objet par défaut :
         <div class="example-contents">
<div class="cdata"><pre>
&lt;Object name=&quot;default&quot;&gt;
AuthTrans fn=php4_auth_trans
.
.
.
&lt;/Object&gt;
</pre></div>
         </div>

        </p>
       </li>
       <li class="listitem">
        <p class="para">
         Pour utiliser l&#039;identification PHP dans un seul répertoire, ajoutez ce qui suit :
         <div class="example-contents">
<div class="cdata"><pre>
&lt;Object ppath=&quot;d:\path\to\authenticated\dir\*&quot;&gt;
AuthTrans fn=php4_auth_trans
&lt;/Object&gt;
</pre></div>
         </div>

        </p>
       </li>
      </ol>
     </p>
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      La taille de la pile que PHP utilise dépend de la
      configuration du serveur Web. Si vous rencontrez des crashs avec
      les grands scripts PHP, il est recommandé d&#039;augmenter la taille de
      la pile avec la console d&#039;administration : dans la section
      &quot;MAGNUS EDITOR&quot;.
     </p>
    </p></blockquote>

   <div class="sect2" id="install.unix.sun.phpini">
    <h3 class="title">Environnement CGI et modifications recommandées du <var class="filename">php.ini</var></h3>
    <p class="para">
     Il est important de garder en tête que iPlanet/SunONE/Netscape est un serveur Web
     multi-threadé. Comme toutes les requêtes se situent dans le même contexte
     (c&#039;est le contexte sur serveur Web), et que ce contexte est unique, si vous voulez
     accéder à des variables comme <code class="literal">PATH_INFO</code>,
     <code class="literal">HTTP_HOST</code> etc., il n&#039;est pas recommandé d&#039;y accéder
     à l&#039;ancienne manière de PHP, avec la fonction <span class="function"><a href="function.getenv.html" class="function">getenv()</a></span> ou une
     autre méthode (register globals, <var class="varname"><a href="reserved.variables.environment.html" class="classname">$_ENV</a></var>).
     De cette manière, vous n&#039;aurez que des valeurs d&#039;environnement du serveur,
     et non pas des valeurs correctes pour le CGI.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      Pourquoi est-ce que les variables CGI sont invalides ?
     </p>
     <p class="para">
      C&#039;est lié au fait que le processus du serveur Web est lancé par l&#039;administrateur
      du serveur, qui utilise le script de lancement au démarrage. En fait, il aurait fallu
      que vous lanciez vous-même le processus. C&#039;est pour cela que l&#039;environnement
      du serveur Web contient des variables d&#039;environnement CGI. Vous pouvez vérifier
      cela en lançant le serveur Web depuis un autre endroit que l&#039;administrateur
      du serveur : utilisez la ligne de commande Unix en tant que root :
      vous verrez alors qu&#039;il n&#039;y a pas de variables d&#039;environnement.
     </p>
    </p></blockquote>
    <p class="para">
     Changez simplement vos scripts pour lire les variables CGI, en utilisant
     le tableau superglobal <var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER</a></var>. Si vous avez d&#039;autres scripts qui
     utilisent encore <var class="varname">$HTTP_HOST</var> et compagnie,
     il est recommandé d&#039;activer l&#039;option <code class="literal">register_globals</code>
     dans le <var class="filename">php.ini</var> et de changer l&#039;ordre des variables.
     IMPORTANT : supprimez le <code class="literal">&quot;E&quot;</code> dans cette option, car
     vous n&#039;en avez pas besoin pour cet environnement.
     <div class="example-contents">
<div class="cdata"><pre>
variables_order = &quot;GPCS&quot;
register_globals = On
</pre></div>
     </div>

    </p>
   </div>
   
   <div class="sect2" id="install.unix.sun.specialpages">
    <h3 class="title">Utilisation particulière pour les pages d&#039;erreurs ou les
     listages spécifiques de dossier (PHP &gt;= 4.3.3)</h3>
    <p class="para">
     Vous pouvez utiliser PHP pour générer des pages d&#039;erreurs de type
     <code class="literal">&quot;404 Not Found&quot;</code> ou apparentée. Ajoutez la ligne
     suivante dans le fichier <var class="filename">obj.conf</var> pour chaque
     page d&#039;erreur que vous souhaitez remplacer :
     <div class="example-contents">
<div class="cdata"><pre>
Error fn=&quot;php4_execute&quot; code=XXX script=&quot;/chemin/vers/script.php&quot; [inikey=value inikey=value...]
</pre></div>
     </div>

     où <code class="literal">XXX</code> est le code d&#039;erreur HTTP. Effacez toute autre
     directive <code class="literal">Error</code> qui pourrait interférer avec la vôtre.
     Si vous voulez utiliser une page pour toutes les erreurs qui existent,
     laissez le paramètre <code class="literal">code</code> vide. Votre script peut
     obtenir le code de statut HTTP dans la variable
     <var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER['ERROR_TYPE']</a></var>.
    </p>
    <p class="para">
     Une autre possibilité est de générer une liste de dossiers personnalisée.
     Créez simplement un script PHP qui affiche le contenu du dossier, et
     remplacez la ligne <code class="literal">Service</code> par défaut par
     <code class="literal">type=&quot;magnus-internal/directory&quot;</code>
     dans <var class="filename">obj.conf</var> avec ceci :
     <div class="example-contents">
<div class="cdata"><pre>
Service fn=&quot;php4_execute&quot; type=&quot;magnus-internal/directory&quot; script=&quot;/chemin/vers/script.php&quot; [inikey=value inikey=value...]
</pre></div>
     </div>

     Pour ces deux points, l&#039;URI originale et l&#039;URI traduite sont
     dans les variables <var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER['PATH_INFO']</a></var> et
     <var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER['PATH_TRANSLATED']</a></var>.
    </p>
   </div>
   
   <div class="sect2" id="install.unix.sun.notes">
    <h3 class="title">Note au sujet de <span class="function"><a href="function.nsapi-virtual.html" class="function">nsapi_virtual()</a></span> et des requêtes (PHP &gt;= 4.3.3)</h3>
    <p class="para">
     Le module NSAPI supporte désormais la fonction <span class="function"><a href="function.nsapi-virtual.html" class="function">nsapi_virtual()</a></span>
     (alias : <span class="function"><a href="function.virtual.html" class="function">virtual()</a></span>), pour réaliser des sous requêtes au serveur
     Web, et inclure le résultat dans une page. Le problème est que cette fonction
     utilise une fonctionnalité non documentée de la bibliothèque
     NSAPI.
     Sous Unix, ce n&#039;est pas un problème, car le module va automatiquement
     rechercher les fonctions nécessaires, et les utiliser si elles sont
     disponibles. Sinon, <span class="function"><a href="function.nsapi-virtual.html" class="function">nsapi_virtual()</a></span> sera désactivée.
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      Soyez prévenu : le support de <span class="function"><a href="function.nsapi-virtual.html" class="function">nsapi_virtual()</a></span> est EXPERIMENTAL !
     </p>
    </p></blockquote>
   </div>   
  </div></div></div></body></html>