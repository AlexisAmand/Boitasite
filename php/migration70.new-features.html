<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Nouvelles fonctionnalit&eacute;s</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="migration70.incompatible.html">« Modifications entrainant une incompatibilit&eacute; ascendante</a></li>
      <li style="float: right;"><a href="migration70.deprecated.html">Les fonctionnalit&eacute;s d&eacute;pr&eacute;ci&eacute;es dans PHP 7.0.x »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="migration70.html">Migration de PHP 5.6.x vers PHP 7.0.x</a></li>
    <li>Nouvelles fonctionnalit&eacute;s</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="migration70.new-features" class="sect1">
 <h2 class="title">Nouvelles fonctionnalités</h2>

 <div class="sect2" id="migration70.new-features.scalar-type-declarations">
  <h3 class="title">Déclarations du type scalaire</h3>

  <p class="para">
   Les <a href="functions.arguments.html#functions.arguments.type-declaration" class="link">déclarations de type</a>
   scalaire viennent en deux modes : coercitive (par défaut) ou stricte. Les types de paramètres
   suivants peuvent être renforcés (soit coercitif soit strict) : les chaînes de caractères
   (<span class="type"><a href="language.types.string.html" class="type string">string</a></span>), les entiers (<code class="literal">int</code>),
   les décimaux (<span class="type"><a href="language.types.float.html" class="type float">float</a></span>) et les valeurs booléennes (<code class="literal">bool</code>).
   Ils complémentent les autres types introduits dans PHP 5 : les noms des classes, les interfaces,
   les tableaux (<span class="type"><a href="language.types.array.html" class="type array">array</a></span>) et les fonctions appelables (<span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span>).
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Mode&nbsp;coercitive<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">sommeEntiers</span><span style="color: #007700">(</span><span style="color: #0000BB">int&nbsp;</span><span style="color: #007700">...</span><span style="color: #0000BB">$entiers</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">array_sum</span><span style="color: #007700">(</span><span style="color: #0000BB">$entiers</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">sommeEntiers</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'3'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4.1</span><span style="color: #007700">));</span>
</span>
</code></div>
   </div>

   <p class="para">L&#039;exemple ci-dessus va afficher :</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
int(9)
</pre></div>
   </div>
  </div>

  <p class="para">
   Pour activer le mode strict, une seule directive <a href="control-structures.declare.html" class="link"><code class="literal">declare</code></a> doit être placée en haut du fichier. 
   Ceci signifie que le mode strict de déclaration du type scalaire est configurée par fichier.
   La directive n&#039;affecte pas seulement la déclaration des paramètres mais aussi
   le type de retour de la fonction (voir
   <a href="functions.returning-values.html#functions.returning-values.type-declaration" class="link">les déclarations du type de retour</a>
   dans les fonctions PHP et celles issues des extensions).
  </p>

  <p class="para">
   Une documentation complète et des exemples de déclarations du type scalaire
   peuvent être trouvés dans la référence : <a href="functions.arguments.html#functions.arguments.type-declaration" class="link">Déclarations de type</a>.
  </p>
 </div>

 <div class="sect2" id="migration70.new-features.return-type-declarations">
  <h3 class="title">Déclarations du type de retour</h3>

  <p class="para">
   PHP 7 ajoute un support pour  les
   <a href="functions.returning-values.html#functions.returning-values.type-declaration" class="link">déclarations du type de retour</a>.
   Similaires aux 
   <a href="functions.arguments.html#functions.arguments.type-declaration" class="link">déclarations du type d&#039;argument</a>,
   les déclarations du type de retour spécifient le type de la valeur qui sera retournée par la fonction.
   Les mêmes 
   <a href="functions.arguments.html#functions.arguments.type-declaration.types" class="link">types</a>
   qui sont disponibles pour les déclarations du type de retour sont disponibles pour les déclarations
   du type d&#039;argument.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">sommeTableaux</span><span style="color: #007700">(array&nbsp;...</span><span style="color: #0000BB">$tableaux</span><span style="color: #007700">):&nbsp;array<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(function(array&nbsp;</span><span style="color: #0000BB">$tableaux</span><span style="color: #007700">):&nbsp;</span><span style="color: #0000BB">int&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">array_sum</span><span style="color: #007700">(</span><span style="color: #0000BB">$tableaux</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;</span><span style="color: #0000BB">$tableaux</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">sommeTableaux</span><span style="color: #007700">([</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">3</span><span style="color: #007700">],&nbsp;[</span><span style="color: #0000BB">4</span><span style="color: #007700">,</span><span style="color: #0000BB">5</span><span style="color: #007700">,</span><span style="color: #0000BB">6</span><span style="color: #007700">],&nbsp;[</span><span style="color: #0000BB">7</span><span style="color: #007700">,</span><span style="color: #0000BB">8</span><span style="color: #007700">,</span><span style="color: #0000BB">9</span><span style="color: #007700">]));</span>
</span>
</code></div>
   </div>

   <p class="para">L&#039;exemple ci-dessus va afficher :</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; 6
    [1] =&gt; 15
    [2] =&gt; 24
)
</pre></div>
   </div>
  </div>

  <p class="para">
   Une documentation complète et des exemples de déclarations du type de retour
   peuvent être trouvés dans la référence : <a href="functions.returning-values.html#functions.returning-values.type-declaration" class="link">Déclarations du type de retour</a>.
  </p>
 </div>

 <div class="sect2" id="migration70.new-features.null-coalesce-op">
  <h3 class="title">L&#039;opérateur Null coalescent</h3>

  <p class="para">
   L&#039;opérateur Null coalescent (<code class="literal">??</code>) a été ajouté comme un sucre 
   syntaxique pour les cas de besoin le plus commun d&#039;utiliser une troisième conjonction 
   avec la fonction <span class="function"><a href="function.isset.html" class="function">isset()</a></span>. Il retourne le premier opérande s&#039;il existe 
   et n&#039;a pas une valeur <strong><code>NULL</code></strong>; et retourne le second opérande sinon.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Récupére&nbsp;la&nbsp;valeur&nbsp;de&nbsp;$_GET['utilisateur']&nbsp;retourne&nbsp;'aucun'<br />//&nbsp;s'il&nbsp;n'existe&nbsp;pas.<br /></span><span style="color: #0000BB">$identifiant&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'utilisateur'</span><span style="color: #007700">]&nbsp;??&nbsp;</span><span style="color: #DD0000">'aucun'</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//&nbsp;Ceci&nbsp;est&nbsp;équivalent&nbsp;à&nbsp;:<br /></span><span style="color: #0000BB">$identifiant&nbsp;</span><span style="color: #007700">=&nbsp;isset(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'utilisateur'</span><span style="color: #007700">])&nbsp;?&nbsp;</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'utilisateur'</span><span style="color: #007700">]&nbsp;:&nbsp;</span><span style="color: #DD0000">'aucun'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;L'opérateur&nbsp;permet&nbsp;de&nbsp;faire&nbsp;du&nbsp;chaînage&nbsp;:&nbsp;Ceci&nbsp;va&nbsp;retourner&nbsp;la&nbsp;première<br />//&nbsp;valeur&nbsp;définie&nbsp;respectivement&nbsp;dans&nbsp;$_GET['utilisateur'],&nbsp;$_POST['utilisateur']<br />//&nbsp;et&nbsp;'aucun'.<br /></span><span style="color: #0000BB">$identifiant&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'utilisateur'</span><span style="color: #007700">]&nbsp;??&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'utilisateur'</span><span style="color: #007700">]&nbsp;??&nbsp;</span><span style="color: #DD0000">'aucun'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>

  
 </div>

 <div class="sect2" id="migration70.new-features.spaceship-op">
  <h3 class="title">L&#039;opérateur Spaceship</h3>
  <p class="para">
   L&#039;opérateur Spaceship est utilisé pour comparer deux expressions. 
   Il retourne -1, 0 ou 1 quand <var class="varname">$a</var> est respectivement inférieur, 
   égal ou supérieur à <var class="varname">$b</var>. Les comparaisons sont effectuées 
   selon 
   <a href="types.comparisons.html" class="link">les règles de comparaison de types</a> 
   habituelles de PHP.
  </p>
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Entiers<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">&lt;=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;0<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">&lt;=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;-1<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">&lt;=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;1<br /><br />//&nbsp;Nombres&nbsp;à&nbsp;virgule&nbsp;flottante<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">1.5&nbsp;</span><span style="color: #007700">&lt;=&gt;&nbsp;</span><span style="color: #0000BB">1.5</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;0<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">1.5&nbsp;</span><span style="color: #007700">&lt;=&gt;&nbsp;</span><span style="color: #0000BB">2.5</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;-1<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">2.5&nbsp;</span><span style="color: #007700">&lt;=&gt;&nbsp;</span><span style="color: #0000BB">1.5</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;1<br />&nbsp;<br />//&nbsp;Chaînes&nbsp;de&nbsp;caractères<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">&lt;=&gt;&nbsp;</span><span style="color: #DD0000">"a"</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;0<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">&lt;=&gt;&nbsp;</span><span style="color: #DD0000">"b"</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;-1<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"b"&nbsp;</span><span style="color: #007700">&lt;=&gt;&nbsp;</span><span style="color: #DD0000">"a"</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;1<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>

  
 </div>

 <div class="sect2" id="migration70.new-features.define-array">
  <h3 class="title">Les tableaux constants à l&#039;aide de <span class="function"><a href="function.define.html" class="function">define()</a></span></h3>

  <p class="para">
   Les tableaux (<span class="type"><a href="language.types.array.html" class="type Array">Array</a></span>) constants peuvent maintenant être définis 
   avec la fonction <span class="function"><a href="function.define.html" class="function">define()</a></span>. Dans PHP 5.6, ils pouvaient 
   être défini seulement avec <a href="language.constants.syntax.html" class="link"><code class="literal">const</code></a>.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />define</span><span style="color: #007700">(</span><span style="color: #DD0000">'ANIMAUX'</span><span style="color: #007700">,&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'chien'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'chat'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'oiseau'<br /></span><span style="color: #007700">]);<br /><br />echo&nbsp;</span><span style="color: #0000BB">ANIMAUX</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">];&nbsp;</span><span style="color: #FF8000">//&nbsp;affiche&nbsp;"chat"<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </div>

 <div class="sect2" id="migration70.new-features.anonymous-classes">
  <h3 class="title">Les classes anonymes</h3>

  <p class="para">
   La prise en charge des classes anonymes a été ajouté à travers 
   l&#039;instanciation <code class="literal">new class</code>. Celle-ci peut être utilisée 
   au lieu de définir toute une classe pour des objets jetables :
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">interface&nbsp;</span><span style="color: #0000BB">Logger&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">log</span><span style="color: #007700">(</span><span style="color: #0000BB">string&nbsp;$msg</span><span style="color: #007700">);<br />}<br /><br />class&nbsp;</span><span style="color: #0000BB">Application&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;</span><span style="color: #0000BB">$logger</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">getLogger</span><span style="color: #007700">():&nbsp;</span><span style="color: #0000BB">Logger&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">logger</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">setLogger</span><span style="color: #007700">(</span><span style="color: #0000BB">Logger&nbsp;$logger</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">logger&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$logger</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$app&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Application</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setLogger</span><span style="color: #007700">(new&nbsp;class&nbsp;implements&nbsp;</span><span style="color: #0000BB">Logger&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">log</span><span style="color: #007700">(</span><span style="color: #0000BB">string&nbsp;$msg</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$msg</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />});<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getLogger</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <p class="para">L&#039;exemple ci-dessus va afficher :</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
object(class@anonymous)#2 (0) {
}
</pre></div>
   </div>
  </div>

  <p class="para">
   La documentation complète peut être trouvée dans 
   <a href="language.oop5.anonymous.html" class="link">la référence des classes anonymes</a>.
  </p>
 </div>

 <div class="sect2" id="migration70.new-features.unicode-codepoint-escape-syntax">
  <h3 class="title">Syntaxe d’échappement du point de code Unicode</h3>

  <p class="para">
   Cela prend un point de code Unicode sous forme hexadécimale, dans une chaîne 
   entre doubles guillemets ou une syntaxe heredoc, pour le convertir 
   en UTF-8. N’importe quel point de code valide est accepté, 
   les zéros en début de chaîne étant facultatifs.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
echo&nbsp;"\u{aa}";<br />echo&nbsp;"\u{0000aa}";<br />echo&nbsp;"\u{9999}";</span>
</code></div>
   </div>

   <p class="para">L&#039;exemple ci-dessus va afficher :</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
ª
ª (même affichage que la ligne précédente mais avec des zéros en début de chaîne)
香
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect2" id="migration70.new-features.closure-call-method">
  <h3 class="title"><span class="methodname"><a href="closure.call.html" class="methodname">Closure::call()</a></span></h3>

  <p class="para">
   La méthode <span class="methodname"><a href="closure.call.html" class="methodname">Closure::call()</a></span> est devenue plus performante. 
   Une façon plus courte de lier temporairement une fermeture à la portée d&#039;un 
   objet et l&#039;invoquer.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">A&nbsp;</span><span style="color: #007700">{private&nbsp;</span><span style="color: #0000BB">$x&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;}<br /><br /></span><span style="color: #FF8000">//&nbsp;Code&nbsp;avant&nbsp;PHP&nbsp;7<br /></span><span style="color: #0000BB">$getX&nbsp;</span><span style="color: #007700">=&nbsp;function()&nbsp;{return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">x</span><span style="color: #007700">;};<br /></span><span style="color: #0000BB">$getXCB&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$getX</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindTo</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">A</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'A'</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;fermeture&nbsp;intermédiaire<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$getXCB</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;Code&nbsp;PHP&nbsp;7+<br /></span><span style="color: #0000BB">$getX&nbsp;</span><span style="color: #007700">=&nbsp;function()&nbsp;{return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">x</span><span style="color: #007700">;};<br />echo&nbsp;</span><span style="color: #0000BB">$getX</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">call</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">A</span><span style="color: #007700">);</span>
</span>
</code></div>
   </div>

   <p class="para">L&#039;exemple ci-dessus va afficher :</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
1
1
</pre></div>
   </div>
  </div>
 </div>
 <div class="sect2" id="migration70.new-features.filtered-unserialize">
  <h3 class="title"><span class="function"><a href="function.unserialize.html" class="function">unserialize()</a></span> est filtrée</h3>

  <p class="para">
   Cette fonctionnalité vise à garantir une meilleure sécurité lorsque 
   la désérialisation d’objets est effectuée avec des données non fiables. 
   Elle empêche les injections de code possible en permettant au développeur 
   de whitelister les classes qui peuvent être désérialisées.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;Convertit&nbsp;tous&nbsp;les&nbsp;objets&nbsp;vers&nbsp;un&nbsp;objet&nbsp;__PHP_Incomplete_Class<br /></span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">unserialize</span><span style="color: #007700">(</span><span style="color: #0000BB">$foo</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">"allowed_classes"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">]);<br /><br /></span><span style="color: #FF8000">//&nbsp;Convertit&nbsp;tous&nbsp;les&nbsp;objets&nbsp;vers&nbsp;un&nbsp;objet&nbsp;__PHP_Incomplete_Class&nbsp;<br />//&nbsp;excepté&nbsp;ceux&nbsp;de&nbsp;MyClass&nbsp;et&nbsp;MyClass2<br /></span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">unserialize</span><span style="color: #007700">(</span><span style="color: #0000BB">$foo</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">"allowed_classes"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">"MyClass"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"MyClass2"</span><span style="color: #007700">]]);<br /><br /></span><span style="color: #FF8000">//&nbsp;Comportement&nbsp;par&nbsp;défaut&nbsp;(le&nbsp;même&nbsp;que&nbsp;lorsqu'on&nbsp;omet&nbsp;le&nbsp;deuxième&nbsp;argument)&nbsp;<br />//&nbsp;qui&nbsp;accepte&nbsp;toutes&nbsp;les&nbsp;classes<br /></span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">unserialize</span><span style="color: #007700">(</span><span style="color: #0000BB">$foo</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">"allowed_classes"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">]);</span>
</span>
</code></div>
   </div>

  </div>
 </div>

 <div class="sect2" id="migration70.new-features.intlchar">
  <h3 class="title"><a href="class.intlchar.html" class="classname">IntlChar</a></h3>

  <p class="para">
   La nouvelle classe <a href="class.intlchar.html" class="classname">IntlChar</a> cherche à exposer 
   la fonctionnalité ICU en plus. La classe elle-même définit un nombre de méthodes 
   statiques et de constantes qui peuvent être utilisées pour manipuler les 
   caractères unicode.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />printf</span><span style="color: #007700">(</span><span style="color: #DD0000">'%x'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">IntlChar</span><span style="color: #007700">::</span><span style="color: #0000BB">CODEPOINT_MAX</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">IntlChar</span><span style="color: #007700">::</span><span style="color: #0000BB">charName</span><span style="color: #007700">(</span><span style="color: #DD0000">'@'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">IntlChar</span><span style="color: #007700">::</span><span style="color: #0000BB">ispunct</span><span style="color: #007700">(</span><span style="color: #DD0000">'!'</span><span style="color: #007700">));</span>
</span>
</code></div>
   </div>

   <p class="para">L&#039;exemple ci-dessus va afficher :</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
10ffff
COMMERCIAL AT
bool(true)
</pre></div>
   </div>
  </div>

  <p class="para">
   Pour utiliser cette classe, vous devez installer l&#039;extension 
   <a href="book.intl.html" class="link">Intl</a>.
  </p>
 </div>

 <div class="sect2" id="migration70.new-features.expectations">
  <h3 class="title">Les attentes</h3>

  <p class="para">
   <a href="function.assert.html#function.assert.expectations" class="link">Les attentes</a> sont 
   une amélioration rétro-compatible apportée à l&#039;ancienne fonction
   <span class="function"><a href="function.assert.html" class="function">assert()</a></span>. Ils offrent des assertions à très faible
   coût dans le code de production et permettent de lever des exceptions 
   personnalisées lorsque l’assertion échoue.
  </p>

  <p class="para">
   Alors que l&#039;ancienne API continue à être maintenue pour des raisons de
   compatibilité, la fonction <span class="function"><a href="function.assert.html" class="function">assert()</a></span> est maintenant 
   une construction de language, permettant au premier paramètre d&#039;être 
   une expression plutôt qu&#039;un <span class="type"><a href="language.types.string.html" class="type string">string</a></span> à évaluer ou un 
   <span class="type"><a href="language.types.boolean.html" class="type boolean">boolean</a></span> à tester.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />ini_set</span><span style="color: #007700">(</span><span style="color: #DD0000">'assert.exception'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br />class&nbsp;</span><span style="color: #0000BB">CustomError&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">AssertionError&nbsp;</span><span style="color: #007700">{}<br /><br /></span><span style="color: #0000BB">assert</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;new&nbsp;</span><span style="color: #0000BB">CustomError</span><span style="color: #007700">(</span><span style="color: #DD0000">'Un&nbsp;message&nbsp;d\'erreur'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <p class="para">L&#039;exemple ci-dessus va afficher :</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
Fatal error: Uncaught CustomError: Un message d\&#039;erreur
</pre></div>
   </div>
  </div>

  <p class="para">
   On trouvera plus de détails sur cette fonctionnalité, y compris la façon de le configurer
   dans les environnements de développement et de production, dans 
   <a href="function.assert.html#function.assert.expectations" class="link">la section attentes</a> 
   dans la référence de la fonction <span class="function"><a href="function.assert.html" class="function">assert()</a></span>.
  </p>
 </div>

 <div class="sect2" id="migration70.new-features.group-use-declarations">
  <h3 class="title">Grouper les déclarations <code class="literal">use</code></h3>

  <p class="para">
   Les classes, les fonctions and les constantes importées à partir du même <a href="language.namespaces.definition.html" class="link"><code class="literal">namespace</code></a>
   peuvent être groupées maintenant dans une seule instruction <a href="language.namespaces.importing.html" class="link"><code class="literal">use</code></a>.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Code&nbsp;avant&nbsp;PHP&nbsp;7<br /></span><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">some</span><span style="color: #007700">\namespace\</span><span style="color: #0000BB">ClassA</span><span style="color: #007700">;<br />use&nbsp;</span><span style="color: #0000BB">some</span><span style="color: #007700">\namespace\</span><span style="color: #0000BB">ClassB</span><span style="color: #007700">;<br />use&nbsp;</span><span style="color: #0000BB">some</span><span style="color: #007700">\namespace\</span><span style="color: #0000BB">ClassC&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">C</span><span style="color: #007700">;<br /><br />use&nbsp;function&nbsp;</span><span style="color: #0000BB">some</span><span style="color: #007700">\namespace\</span><span style="color: #0000BB">fn_a</span><span style="color: #007700">;<br />use&nbsp;function&nbsp;</span><span style="color: #0000BB">some</span><span style="color: #007700">\namespace\</span><span style="color: #0000BB">fn_b</span><span style="color: #007700">;<br />use&nbsp;function&nbsp;</span><span style="color: #0000BB">some</span><span style="color: #007700">\namespace\</span><span style="color: #0000BB">fn_c</span><span style="color: #007700">;<br /><br />use&nbsp;const&nbsp;</span><span style="color: #0000BB">some</span><span style="color: #007700">\namespace\</span><span style="color: #0000BB">ConstA</span><span style="color: #007700">;<br />use&nbsp;const&nbsp;</span><span style="color: #0000BB">some</span><span style="color: #007700">\namespace\</span><span style="color: #0000BB">ConstB</span><span style="color: #007700">;<br />use&nbsp;const&nbsp;</span><span style="color: #0000BB">some</span><span style="color: #007700">\namespace\</span><span style="color: #0000BB">ConstC</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Code&nbsp;PHP&nbsp;7+<br /></span><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">some</span><span style="color: #007700">\namespace\{</span><span style="color: #0000BB">ClassA</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">ClassB</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">ClassC&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">C</span><span style="color: #007700">};<br />use&nbsp;function&nbsp;</span><span style="color: #0000BB">some</span><span style="color: #007700">\namespace\{</span><span style="color: #0000BB">fn_a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">fn_b</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">fn_c</span><span style="color: #007700">};<br />use&nbsp;const&nbsp;</span><span style="color: #0000BB">some</span><span style="color: #007700">\namespace\{</span><span style="color: #0000BB">ConstA</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">ConstB</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">ConstC</span><span style="color: #007700">};<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </div>

 <div class="sect2" id="migration70.new-features.generator-return-expressions">
  <h3 class="title">Expressions de retour générateur</h3>

  <p class="para">
   Cette fonction se base sur la fonctionnalité de générateur introduite dans PHP 5.5. 
   Il permet d&#039;utiliser une instruction <code class="literal">return</code> dans un générateur 
   pour retourner une expression finale (le retour par référence n&#039;est pas autorisé). 
   Cette valeur peut être extraite en utilisant la nouvelle méthode  
   <code class="literal">Generator::getReturn()</code>, qui ne peut être utilisé que lorsque 
   le générateur a fini de rendre les valeurs.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$gen&nbsp;</span><span style="color: #007700">=&nbsp;(function()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;yield&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;yield&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">;<br />})();<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$gen&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />}<br /><br />echo&nbsp;</span><span style="color: #0000BB">$gen</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getReturn</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;</span>
</span>
</code></div>
   </div>

   <p class="para">L&#039;exemple ci-dessus va afficher :</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
1
2
3
</pre></div>
   </div>
  </div>

  <p class="para">
   C&#039;est très pratique d&#039;être capable de renvoyer explicitement une valeur finale 
   d&#039;un générateur. Car cela permet à une valeur finale, susceptible d&#039;être gérée 
   spécialement par le code client exécutant le générateur, d&#039;être retourné par le générateur 
   (peut-être à partir d&#039;une forme de calcul coroutine). C&#039;est de loin plus simple 
   que de forcer le code client à vérifier d&#039;abord si la valeur finale a été rendue,
   puis de gérer spécifiquement la valeur quand c&#039;est le cas.
  </p>
 </div>
 <div class="sect2" id="migration70.new-features.generator-delegation">
  <h3 class="title">Délégation de générateur</h3>

  <p class="para">
   Les générateurs peuvent maintenant être délégués automatiquement à un autre générateur, 
   un objet <a href="class.traversable.html" class="classname">Traversable</a> ou un <span class="type"><a href="language.types.array.html" class="type array">array</a></span>, 
   en utilisant <a href="language.generators.syntax.html#control-structures.yield.from" class="link"><code class="literal">yield from</code></a>, sans avoir recours à un boilerplate.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">gen</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;yield&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;yield&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;yield&nbsp;from&nbsp;</span><span style="color: #0000BB">gen2</span><span style="color: #007700">();<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">gen2</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;yield&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;yield&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">;<br />}<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">gen</span><span style="color: #007700">()&nbsp;as&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <p class="para">L&#039;exemple ci-dessus va afficher :</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
1
2
3
4
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect2" id="migration70.new-features.intdiv">
  <h3 class="title">La division d’entiers avec <span class="function"><a href="function.intdiv.html" class="function">intdiv()</a></span></h3>

  <p class="para">
   La nouvelle fonction <span class="function"><a href="function.intdiv.html" class="function">intdiv()</a></span> retourne le résultat de la division 
   d&#039;entiers effectuée sur ses opérandes.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">intdiv</span><span style="color: #007700">(</span><span style="color: #0000BB">10</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <p class="para">L&#039;exemple ci-dessus va afficher :</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
int(3)
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect2" id="migration70.new-features.session-options">
  <h3 class="title">Les options de session</h3>

  <p class="para">
   La fonction <span class="function"><a href="function.session-start.html" class="function">session_start()</a></span> accepte maintenant un <span class="type"><a href="language.types.array.html" class="type array">array</a></span> 
   d&#039;options qui surcharge 
   <a href="session.configuration.html" class="link">les directives de configuration de session</a> 
   manuellement configurées dans le fichier php.ini.
  </p>

  <p class="para">
   Ces options ont aussi étendu le support pour l&#039;option
   <a href="session.configuration.html#ini.session.lazy-write" class="link">session.lazy_write</a>, 
   qui est activé par défaut et pousse PHP à surcharger les fichiers de session 
   seulement si les données de session ont été mis à jour, et l&#039;option 
   <code class="literal">read_and_close</code>, ne pouvant être passé à la fonction 
   <span class="function"><a href="function.session-start.html" class="function">session_start()</a></span> que pour indiquer si les données de session 
   doivent être lu avant que la session soit terminée sans changements.
  </p>

  <p class="para">
   Par exemple, pour mettre <a href="session.configuration.html#ini.session.cache-limiter" class="link">session.cache_limiter</a> 
   à <code class="literal">private</code> et fermer immédiatement la session après l&#039;avoir lu :
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />session_start</span><span style="color: #007700">([<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'cache_limiter'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'private'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'read_and_close'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,<br />]);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </div>

 <div class="sect2" id="migration70.new-features.preg-repace-callback-array-function">
  <h3 class="title"><span class="function"><a href="function.preg-replace-callback-array.html" class="function">preg_replace_callback_array()</a></span></h3>

  <p class="para">
   La nouvelle fonction <span class="function"><a href="function.preg-replace-callback-array.html" class="function">preg_replace_callback_array()</a></span> 
   permet au code d&#039;être écrit de façon plus propre en utilisant la fonction 
   <span class="function"><a href="function.preg-replace-callback.html" class="function">preg_replace_callback()</a></span>. Avant PHP 7, les fonctions de rappel (callback) 
   devaient être exécutées par expression régulière ce qui demande à la fonction de rappel 
   d&#039;être sali avec beaucoup de ramifications.
  </p>

  <p class="para">
   Maintenant, les fonctions de rappel peuvent être enregistrés pour chaque expression 
   régulière en utilisant un tableau associatif, là où la clé est une expression régulière 
   ayant la fonction de rappel comme valeur.
  </p>
 </div>

 <div class="sect2" id="migration70.new-features.csprng-functions">
  <h3 class="title">Les fonctions <a href="book.csprng.html" class="link">CSPRNG</a></h3>

  <p class="para">
   Deux nouvelles fonctions ont été ajoutée pour générer cryptographiquement des entiers 
   et des chaînes de caractères sécurisés de façon multi-plateforme :
   <span class="function"><a href="function.random-bytes.html" class="function">random_bytes()</a></span> et <span class="function"><a href="function.random-int.html" class="function">random_int()</a></span>.
  </p>
 </div>

 <div class="sect2" id="migration70.new-features.list-arrayaccess">
  <h3 class="title">
   La fonction <span class="function"><a href="function.list.html" class="function">list()</a></span> peut toujours déballer les objets qui implémentent
   <a href="class.arrayaccess.html" class="classname">ArrayAccess</a>
  </h3>

  <p class="para">
   Auparavant, la fonction <span class="function"><a href="function.list.html" class="function">list()</a></span> ne pouvait pas opérer à 100% sur des objets 
   qui implémentent <a href="class.arrayaccess.html" class="classname">ArrayAccess</a>. Maintenant, ça a été corrigé.
  </p>
 </div>
 
 <div class="sect2" id="migration70.new-features.others">
  <h3 class="title">Autres fonctionnalités</h3>
  <ul class="itemizedlist">
   <li class="listitem">
    <span class="simpara">
     L&#039;accès aux membres de la classe (attributs et méthodes) lors du clonage a été ajouté.
     Exemple, <code class="literal">(clone $foo)-&gt;bar()</code>.
    </span>
   </li>
  </ul>
 </div>
</div></div></div></body></html>