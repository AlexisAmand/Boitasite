<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Cr&eacute;e une collection</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="mongodb.construct.html">« MongoDB::__construct</a></li>
      <li style="float: right;"><a href="mongodb.createdbref.html">MongoDB::createDBRef »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.mongodb.html">MongoDB</a></li>
    <li>Cr&eacute;e une collection</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mongodb.createcollection" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">MongoDB::createCollection</h1>
  <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoDB::createCollection</span> &mdash; <span class="dc-title">Crée une collection</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-mongodb.createcollection-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::createCollection</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
  ] ) : <span class="type"><a href="class.mongocollection.html" class="type MongoCollection">MongoCollection</a></span></div>

  
  <p class="para rdfs-comment">
   Cette méthode est utilisée pour créer des collections limitées
   ainsi que des collections nécessitant des options spéciales.
   Cette méthode revient à exécuter :
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$collection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"create"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"capped"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">"capped"</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"size"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">"size"</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"max"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">"max"</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"autoIndexId"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">"autoIndexId"</span><span style="color: #007700">],<br />));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   Voir la méthode <span class="function"><a href="mongodb.command.html" class="function">MongoDB::command()</a></span>
   pour plus d&#039;informations sur les commandes de base de données.
  </p>
 </div>

 
 <div class="refsect1 parameters" id="refsect1-mongodb.createcollection-parameters">
  <h3 class="title">Liste de paramètres</h3>    
  <p class="para">
   <dl>

    
     <dt>

      <code class="parameter">name</code>
     </dt>

     <dd>

      <p class="para">
       Le nom de la collection.
      </p>
     </dd>

    
    
     <dt>

      <code class="parameter">options</code>
     </dt>

     <dd>

      <p class="para">
       Un tableau contenant les options pour les collections. Chaque option
       est son propre élément dans le tableau des options, dont le nom de l&#039;option
       listée ci-dessous est la clé de l&#039;élément. Les options supportées dépendent
       de la version du serveur MongoDB et du moteur de stockage, et le driver passe
       toutes les options que vous fournissez directement au serveur. Voici une liste
       de quelques options, mais vous pouvez trouver une liste complète dans
       la documentation coeur de MongoDB pour <a href="https://docs.mongodb.com/manual/method/db.createCollection/" class="link external">&raquo;&nbsp;createCollection</a> :
      </p>
      <p class="para">
       <dl>

        
         <dt>

          <code class="parameter">capped</code>
         </dt>

         <dd>

          <p class="para">
           Si la collection doit avoir une taille fixe.
          </p>
         </dd>

           
        
         <dt>

          <code class="parameter">size</code>
         </dt>

         <dd>

          <p class="para">
           Si la collection a une taille fixe, la taille en octets.
          </p>
         </dd>

           
        
         <dt>

          <code class="parameter">max</code>
         </dt>

         <dd>

          <p class="para">
           Si la collection a une taille fixe, le nombre maximum d&#039;éléments
           à stoquer dans la collection.
          </p>
         </dd>

           
        
         <dt>

          <code class="parameter">autoIndexId</code>
         </dt>

         <dd>

          <p class="para">
           Si l&#039;option capped vaut <strong><code>TRUE</code></strong>, vous pouvez spécifier <strong><code>FALSE</code></strong>
           ici pour désactiver la création d&#039;index automatique sur le champ
           <code class="literal">_id</code>. Avant MongoDB 2.2, la valeur par défaut pour
           <code class="literal">autoIndexId</code> était <strong><code>FALSE</code></strong>.
          </p>
         </dd>

           
       </dl>

      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-mongodb.createcollection-returnvalues">
  <h3 class="title">Valeurs de retour</h3>
  <p class="para">
   Retourne un objet <a href="class.mongocollection.html" class="classname">MongoCollection</a>,
   qui représente la nouvelle collection.
  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-mongodb.createcollection-examples">
  <h3 class="title">Exemples</h3>
  <div class="example" id="example-1515">
   <p><strong>Exemple #1 Exemple avec <span class="function"><strong>MongoDB::createCollection()</strong></span></strong></p>
   <div class="example-contents"><p>
    Une collection plafonnée est un type spécial de collection qui a soit
    des éléments fixes, soit un nombre d&#039;éléments fixes. Une fois que la collection
    est pleine, les éléments les plus anciens seront effacés lors de l&#039;ajout de
    nouveaux éléments. Les collections plafonnées sont vraiment utiles pour
    les applications qui historisent et que vous souhaitez réserver une certaine
    quantitié d&#039;espaces à l&#039;historisation sans vous soucier de leurs évolutions.
   </p></div>
   <div class="example-contents"><p>
    Cet exemple crée une petite collection qui conserve un maximum de 10 documents.
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$log&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCollection</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"logger"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'capped'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'size'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">10</span><span style="color: #007700">*</span><span style="color: #0000BB">1024</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'max'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">10<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">)<br />);<br /><br />for&nbsp;(</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$log</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"level"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">WARN</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"msg"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Message&nbsp;simple&nbsp;d'historisation&nbsp;#</span><span style="color: #0000BB">$i</span><span style="color: #DD0000">"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"ts"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoDate</span><span style="color: #007700">()));<br />}<br /><br /></span><span style="color: #0000BB">$msgs&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$log</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$msgs&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$msg</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$msg</span><span style="color: #007700">[</span><span style="color: #DD0000">'msg'</span><span style="color: #007700">].</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher quelque chose de similaire à :</p></div>
   <div class="example-contents screen"><br />
Message simple d&#039;historisation #90<br />
Message simple d&#039;historisation #91<br />
Message simple d&#039;historisation #92<br />
Message simple d&#039;historisation #93<br />
Message simple d&#039;historisation #94<br />
Message simple d&#039;historisation #95<br />
Message simple d&#039;historisation #96<br />
Message simple d&#039;historisation #97<br />
Message simple d&#039;historisation #98<br />
Message simple d&#039;historisation #99<br />
   </div>
  </div>
 </div>


 <div class="refsect1 changelog" id="refsect1-mongodb.createcollection-changelog">
  <h3 class="title">Historique</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>1.4.0</td>
       <td>
        <p class="para">
         Dans les versions antérieures à 1.4.0, les options étaient toutes des arguments
         de la méthode. La signature de la fonction dans ces anciennes versions était :
        </p>
        <p class="para">
         <div class="methodsynopsis dc-description">
          <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::createCollection</strong></span>
           ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
          [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$capped</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
          [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$size</code><span class="initializer"> = 0</span></span>
          [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$max</code><span class="initializer"> = 0</span></span>
         ]]] ) : <span class="type"><a href="class.mongocollection.html" class="type MongoCollection">MongoCollection</a></span></div>

        </p>
        <p class="para">
         La signification de ces options est la même que celle décrite ci-dessus,
         dans l&#039;argument <code class="parameter">options</code>.
        </p>
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>

</div></div></div></body></html>