<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Transactions distribu&eacute;es / XA</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="mysqlnd-ms.quickstart.transactions.html">« Transactions locales</a></li>
      <li style="float: right;"><a href="mysqlnd-ms.quickstart.qos-consistency.html">Niveau de service et consistence »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="mysqlnd-ms.quickstart.html">Exemples et d&eacute;marrage rapide</a></li>
    <li>Transactions distribu&eacute;es / XA</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mysqlnd-ms.quickstart.xa_transactions" class="section">
  <h2 class="title">Transactions distribuées / XA</h2>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <strong>Requis pour la version</strong><br />
   <p class="para">
    Les fonctions relatives à XA ont été introduites en
    PECL mysqlnd_ms version 1.6.0-alpha.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <strong>Béta-testeur</strong><br />
   <p class="para">
    Cette fonctionnalité est actuellement en cours de développement.
    Il peut y avoir des bogues ou des limitations dans les fonctionnalités.
    Ne pas utiliser en environnement de production, malgré tout,
    les premiers tests indiquent une qualité raisonnable.
   </p>
   <p class="para">
    Veuillez contacter le groupe de développement si vous êtes intéressé
    par cette fonctionnalité. Nous sommes à la recherche de retour de
    véritables environnements pour compléter cette fonctionnalité.
   </p>
  </p></blockquote>
  <p class="para">
   Les transactions XA sont des méthodes standardisées pour l&#039;exécution
   de transactions via plusieurs ressources. Ces ressources peuvent êre
   des bases de données ou tout autre système transactionnel. Le serveur
   MySQL supporte les requêtes SQL XA qui permettent aux utilisateurs
   de mener à bien une transaction distribuée SQL qui touchent plusieurs
   serveurs de base de données ou tout autre système supportant les requêtes
   SQL. Dans un tel cas, il en est de la responsabilité de l&#039;utilisateur de
   coordonner les serveurs participants.
  </p>
  <p class="para">
   <code class="literal">PECL/mysqlnd_ms</code> peut agir comme un coordinateur de transaction
   pour une transaction global (distribuée, XA) menée sur des serveurs MySQL
   seulement. Comme coordinateur de transaction, le plugin surveille tous les serveurs
   participants à la transaction globale, et envoie les requêtes SQL appropriées
   en toute transparence aux participants. Les transactions globales sont contrôlées
   avec <span class="function"><a href="function.mysqlnd-ms-xa-begin.html" class="function">mysqlnd_ms_xa_begin()</a></span>, <span class="function"><a href="function.mysqlnd-ms-xa-commit.html" class="function">mysqlnd_ms_xa_commit()</a></span>
   et <span class="function"><a href="function.mysqlnd-ms-xa-rollback.html" class="function">mysqlnd_ms_xa_rollback()</a></span>. Les détails SQL sont cachées de
   l&#039;application ainsi que la nécessité de suivre et coordonner les participants.
  </p>
  <p class="para">
   <div class="example" id="example-2173">
    <p><strong>Exemple #1 Masque général pour les transactions XA</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$mysqli&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">"myapp"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"username"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"password"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"database"</span><span style="color: #007700">);<br />if&nbsp;(!</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Bien&nbsp;évidemment,&nbsp;votre&nbsp;gestionnaire&nbsp;d'erreurs&nbsp;est&nbsp;bien&nbsp;meilleur...&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">die(</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"[%d]&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mysqli_connect_errno</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">mysqli_connect_error</span><span style="color: #007700">()));<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;Démarre&nbsp;une&nbsp;transaction&nbsp;globale&nbsp;*/<br /></span><span style="color: #0000BB">$gtrid_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"12345"</span><span style="color: #007700">;<br />if&nbsp;(!</span><span style="color: #0000BB">mysqlnd_ms_xa_begin</span><span style="color: #007700">(</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$gtrid_id</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"[%d]&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">errno</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">error</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;Exécute&nbsp;les&nbsp;requêtes&nbsp;comme&nbsp;d'habitude&nbsp;:&nbsp;XA&nbsp;BEGIN&nbsp;sera&nbsp;injecté&nbsp;lors&nbsp;de&nbsp;l'exécution&nbsp;de&nbsp;la&nbsp;requête&nbsp;*/<br /></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;orders(order_id,&nbsp;item)&nbsp;VALUES&nbsp;(1,&nbsp;'christmas&nbsp;tree,&nbsp;1.8m')"</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Soit&nbsp;l'INSERT&nbsp;échoue,&nbsp;soit&nbsp;l'injection&nbsp;de&nbsp;XA&nbsp;BEGIN&nbsp;échoue&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #DD0000">'XA'&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sqlstate</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Global&nbsp;transaction/XA&nbsp;related&nbsp;failure,&nbsp;[%d]&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">errno</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">error</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;failed,&nbsp;[%d]&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">errno</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">error</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Annulation&nbsp;de&nbsp;la&nbsp;transaction&nbsp;globale&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">mysqlnd_ms_xa_rollback</span><span style="color: #007700">(</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$xid</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Stopping."</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;Continue&nbsp;de&nbsp;mener&nbsp;à&nbsp;bien&nbsp;les&nbsp;requêtes&nbsp;sur&nbsp;les&nbsp;autres&nbsp;serveurs,&nbsp;i.e.&nbsp;les&nbsp;autres&nbsp;serveurs&nbsp;partagés&nbsp;*/<br /><br />/*&nbsp;commit&nbsp;the&nbsp;global&nbsp;transaction&nbsp;*/<br /></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">mysqlnd_ms_xa_commit</span><span style="color: #007700">(</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$xa_id</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"[%d]&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">errno</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">error</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   Contrairement aux transactions locales, qui sont envoyées à un seul serveur,
   les transactions XA ont un identifiant (xid) associé.
   L&#039;identifiant de transaction XA est composé d&#039;un identifiant de transaction
   globale (gtrid), un qualificatif de branche (bqual), ainsi qu&#039;un identifiant
   de format (formatID). Seul l&#039;identifiant de transaction globale peut et doit
   être fourni lors de l&#039;appel à n&#039;importe laquelle des fonctions XA du plugin.
  </p>
  <p class="para">
   Une fois qu&#039;une transaction globale a commencé, le plugin commence à surveiller
   les serveurs tant que la transaction globale n&#039;est pas terminée. Lorsqu&#039;un
   serveur est sélectionné pour l&#039;exécution de la requête, le plugin injecte
   la requête SQL <code class="literal">XA BEGIN</code> avant d&#039;exécuter la requête
   SQL sur le serveur. <code class="literal">XA BEGIN</code> rend le serveur participant
   à la transaction globale. Si la requête SQL injectée échoue, le plugin
   va rapporter l&#039;erreur dans la réponse à la fonction utilisée pour l&#039;exécution
   de la requête. Dans l&#039;exemple ci-dessus,
   <code class="literal">$mysqli-&gt;query(&quot;INSERT INTO orders(order_id, item) VALUES (1, &#039;christmas tree, 1.8m&#039;)&quot;)</code>
   va indiquer une telle erreur. Vous pouvez vouloir vérifier le code statut
   des erreurs SQL pour déterminer si la requête actuelle a échoué (ici : <code class="literal">INSERT</code>)
   ou si l&#039;erreur est en relation avec la transaction globale. Il vous appartient
   de choisir d&#039;ignorer l&#039;erreur pour commencer la transaction globale sur un
   serveur et continuer l&#039;exécution sans que le serveur ne participe à la
   transaction globale.
  </p>
  <p class="para">
   <div class="example" id="example-2174">
    <p><strong>Exemple #2 Les transactions locales et globales sont mutuellement exclusives</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$mysqli&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">"myapp"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"username"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"password"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"database"</span><span style="color: #007700">);<br />if&nbsp;(!</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Bien&nbsp;évidemment,&nbsp;votre&nbsp;gestionnaire&nbsp;d'erreurs&nbsp;est&nbsp;bien&nbsp;mieux...&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">die(</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"[%d]&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mysqli_connect_errno</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">mysqli_connect_error</span><span style="color: #007700">()));<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;Démarre&nbsp;une&nbsp;transaction&nbsp;locale&nbsp;*/<br /></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">begin_transaction</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"[%d/%s]&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">errno</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sqlstate</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">error</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;Impossible&nbsp;de&nbsp;commencer&nbsp;la&nbsp;transaction&nbsp;globale&nbsp;maintenant&nbsp;-&nbsp;on&nbsp;doit&nbsp;terminer&nbsp;la&nbsp;transaction&nbsp;locale&nbsp;d'abord&nbsp;*/<br /></span><span style="color: #0000BB">$gtrid_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"12345"</span><span style="color: #007700">;<br />if&nbsp;(!</span><span style="color: #0000BB">mysqlnd_ms_xa_begin</span><span style="color: #007700">(</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$gtrid_id</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"[%d/%s]&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">errno</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sqlstate</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">error</span><span style="color: #007700">));<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher :</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>

Warning: mysqlnd_ms_xa_begin(): (mysqlnd_ms) Some work is done outside global transaction. You must end the active local transaction first in ... on line ...
[1400/XAE09] (mysqlnd_ms) Some work is done outside global transaction. You must end the active local transaction first
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   Une transaction globale ne peut être démarrée lorsqu&#039;une transaction locale
   est active. Le plugin tente de détecter cette situation au plus tôt, i.e.
   lors de l&#039;appel à la fonction <span class="function"><a href="function.mysqlnd-ms-xa-begin.html" class="function">mysqlnd_ms_xa_begin()</a></span>.
   Si vous utilisez uniquement des appels API pour contrôler les transactions, le
   plugin va savoir qu&#039;une transaction locale est ouverte, et va retourner une
   erreur pour <span class="function"><a href="function.mysqlnd-ms-xa-begin.html" class="function">mysqlnd_ms_xa_begin()</a></span>. Cependant, notez
   les <a href="mysqlnd-ms.transaction.html" class="link">limitations sur les limites des
   transactions</a>. Dans le pire des cas, si vous utilisez des requêtes SQL
   directes pour les transactions locales (<code class="literal">BEGIN</code>,
   <code class="literal">COMMIT</code>, ...), il se peut qu&#039;une erreur ne soit relayée
   pendant que des requêtes SQL soient exécutées sur un serveur.
  </p>
  <p class="para">
   Pour terminer une transaction globale, appelez la fonction
   <span class="function"><a href="function.mysqlnd-ms-xa-commit.html" class="function">mysqlnd_ms_xa_commit()</a></span> ou <span class="function"><a href="function.mysqlnd-ms-xa-rollback.html" class="function">mysqlnd_ms_xa_rollback()</a></span>.
   Lorsqu&#039;une transaction globale se termine, tous les participants doivent
   être informés de cette fin. Toutefois, PECL/mysqlnd_ms va envoyer les requêtes
   SQL XA appropriées sur une partie ou la totalité des participants. Toute
   erreur pendant cette phase va engendrer une annulation implicite. L&#039;API relative
   à XA est intentionnellement simple ici. Une API plus complexe, qui donne plus de
   contrôle, aurait peu d&#039;avantage par rapport à une implémentation utilisateur
   qui se charge lui même des requêtes SQL XA bas niveaux.
  </p>
  <p class="para">
   Les transactions XA utilisent un protocole de validation en deux phases.
   Le protocole de validation en deux phases est un protocole bloquant.
   Il y a des cas où aucune progression ne peut avoir lieu, y compris en utilisant
   des délais maximals d&#039;attente. Les coordinateurs de transaction doivent survivre
   à leur propre échec, être capable de détecter les blocages et de rompre des liens.
   <code class="literal">PECL/mysqlnd_ms</code> prend le rôle de coordinateur de transaction
   et peut être configuré pour survivre à son propre échec pour éviter des soucis
   avec les serveurs MySQL bloqués. Toutefois, le plugin peut et doit être configuré
   pour utiliser un statut persistent et résistant au crash pour permettre la collection
   des données incorrectes, et stopper les transactions globales. Une transaction globale
   peut être stoppée dans un statut ouvert si, soit le plugin échoue (crash),
   soit une connexion depuis le plugin vers un participant de la transaction globale
   échoue.
  </p>
  <p class="para">
   <div class="example" id="example-2175">
    <p><strong>Exemple #3 Stockage du statut du coordinateur de transaction</strong></p>
    <div class="example-contents">
<div class="inicode"><pre class="inicode">{
    &quot;myapp&quot;: {
        &quot;xa&quot;: {
            &quot;state_store&quot;: {
                &quot;participant_localhost_ip&quot;: &quot;192.168.2.12&quot;,
                &quot;mysql&quot;: {
                    &quot;host&quot;: &quot;192.168.2.13&quot;,
                    &quot;user&quot;: &quot;root&quot;,
                    &quot;password&quot;: &quot;&quot;,
                    &quot;db&quot;: &quot;test&quot;,
                    &quot;port&quot;: &quot;3312&quot;,
                    &quot;socket&quot;: null
                }
            }
        },
        &quot;master&quot;: {
            &quot;master_0&quot;: {
                &quot;host&quot;: &quot;localhost&quot;,
                &quot;socket&quot;: &quot;\/tmp\/mysql.sock&quot;
            }
        },
        &quot;slave&quot;: {
            &quot;slave_0&quot;: {
                &quot;host&quot;: &quot;192.168.2.14&quot;,
                &quot;port&quot;: &quot;3306&quot;
            }
        }
    }
}</pre>
</div>
    </div>

   </div>
  </p>
  <p class="para">
   Actuellement, <code class="literal">PECL/mysqlnd_ms</code> supporte uniquement les tables
   de base de données MySQL comme espace de stockage de statut. Les définitions
   des tables SQL sont fournies dans la
   <a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.xa" class="link">section de configuration du plugin</a>.
   Assurez-vous d&#039;utiliser un moteur transactionel et résistant au crash pour les
   tables, comme InnoDB. InnoDB est le moteur de table par défaut dans les versions
   récentes du serveur MySQL. Assurez-vous également que le serveur de base de données
   lui-même a une haute disponibilité.
  </p>
  <p class="para">
   Si un stockage de statut a été configuré, le plugin peut effectuer une collection
   des données incorrectes. Pendant la collection de données incorrectes, il peut
   être nécessaire de se connecter à un participant à une transaction globale qui
   a échouée. Aussi, le stockage de staut accueille une liste des
   participants et, entre autres, leurs noms d&#039;hôte. Si la collection de données
   incorrectes est exécutée sur un autre hôte que celui qui a été noté comme participant
   avec le nom d&#039;hôte <code class="literal">localhost</code>, alors <code class="literal">localhost</code>
   va résoudre différentes machines. Il y a deux solutions à ce problème.
   Soit vous ne configurez aucun serveur avec le nom d&#039;hôte <code class="literal">localhost</code> 
   mais configurez une adresse IP (et un port), ou, vous utilisez la collection
   de données incorrectes. Dans l&#039;exemple ci-dessus, <code class="literal">localhost</code>
   est utilisé pour <code class="literal">master_0</code>, et va résourdre le mauvais hôte
   durant la collection des données incorrectes. Cependant, <code class="literal">participant_localhost_ip</code>
   est également défini pour utiliser la collection de données incorrectes où
   <code class="literal">localhost</code> correspond à l&#039;IP <code class="literal">192.168.2.12</code>.
  </p>
 </div></div></div></body></html>