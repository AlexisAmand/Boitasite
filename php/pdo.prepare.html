<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Pr&eacute;pare une requ&ecirc;te &agrave; l'ex&eacute;cution et retourne un objet</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="pdo.lastinsertid.html">« PDO::lastInsertId</a></li>
      <li style="float: right;"><a href="pdo.query.html">PDO::query »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.pdo.html">PDO</a></li>
    <li>Pr&eacute;pare une requ&ecirc;te &agrave; l'ex&eacute;cution et retourne un objet</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="pdo.prepare" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">PDO::prepare</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.1.0, PHP 7, PECL pdo &gt;= 0.1.0)</p><p class="refpurpose"><span class="refname">PDO::prepare</span> &mdash; <span class="dc-title">
   Prépare une requête à l&#039;exécution et retourne un objet
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-pdo.prepare-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>PDO::prepare</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$statement</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$driver_options</code><span class="initializer"> = array()</span></span>
  ] ) : <span class="type"><a href="class.pdostatement.html" class="type PDOStatement">PDOStatement</a></span></div>


  <p class="para rdfs-comment">
   Prépare une requête SQL à être exécutée par la méthode 
   <span class="function"><a href="pdostatement.execute.html" class="function">PDOStatement::execute()</a></span>. Le modèle de déclaration peut contenir
   zéro ou plusieurs paramètres nommées (<code class="literal">:nom</code>) ou marqueurs
   (<code class="literal">?</code>) pour lesquels les valeurs réelles seront substituées
   lorsque la requête sera exécutée.
   L&#039;utilisation à la fois des paramètres nommées ainsi que les marqueurs est 
   impossible dans un modèle de déclaration ; seul l&#039;un ou l&#039;autre style de paramètre.
   Utilisez ces paramètres pour lier les entrées utilisateurs, ne les incluez pas
   directement dans la requête.
  </p>
  <p class="para">
   Vous devez inclure un marqueur avec un nom unique pour chaque valeur que
   vous souhaitez passer dans la requête lorsque vous appelez
   <span class="function"><a href="pdostatement.execute.html" class="function">PDOStatement::execute()</a></span>. Vous ne pouvez pas utiliser
   un marqueur avec deux noms identiques dans une requête préparée, à moins que 
   le mode émulation ne soit actif.
  </p>
<blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    Les marqueurs de paramètres peuvent représenter uniquement un littéral de 
    données complet.
    Ni une partie de littéral, ni un mot clé, ni un identifiant, ni toute autre 
    requête arbitraire ne peuvent être liés en utilisant les paramètres.       
    Par exemple, vous ne pouvez associer plusieurs valeurs à un seul marqueur de nom entrant, dans la clause IN() d&#039;une requête SQL. 
   </p>
  </p></blockquote>
  <p class="para">
   Appeler <span class="function"><strong>PDO::prepare()</strong></span> et
   <span class="function"><a href="pdostatement.execute.html" class="function">PDOStatement::execute()</a></span> pour les requêtes
   qui doivent être exécutées plusieurs fois avec différentes valeurs de
   paramètres optimisent les performances de votre application en autorisant
   le pilote à négocier coté client et/ou serveur avec le cache des requêtes
   et les meta-informations. Deplus appeler <span class="function"><strong>PDO::prepare()</strong></span> et
   <span class="function"><a href="pdostatement.execute.html" class="function">PDOStatement::execute()</a></span> aident à prévenir les attaques par
   injection SQL en éliminant le besoin de protéger les paramètres manuellement.
  </p>
  <p class="para">
   PDO émule les requêtes préparées / les paramètres liés pour les pilotes
   qui ne le supportent pas nativement, et peut également réécrire les
   paramètres nommés ou les marqueurs en quelques choses de plus
   approprié, si le pilote supporte un style et pas l&#039;autre.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    À partir de PHP 5.3.0, l&#039;analyseur utilisé pour les déclarations préparés
    émulées et pour réécrire les paramètres nommées ou du style point
    d&#039;intérogation supporte l&#039;échappement antislash non standard pour les
    guillemets simple et double. Ceci signifie que des guillemets terminant qui
    sont précédés par un antislash ne seront pas reconnue comme tel, ce qui peut
    résulter dans une mauvaise détection des paramètres causant la déclaration
    préparer d&#039;échouer lorsqu&#039;elle est exécuté. Un contournement est de ne pas
    utiliser les requêtes émulées pour de telles requêtes SQL, et d&#039;éviter de
    réécrite les paramètres en utilisant un style de paramètre qui est
    supporté nativement par le pilote.
   </span>
  </p></blockquote>
 </div>

 <div class="refsect1 parameters" id="refsect1-pdo.prepare-parameters">
  <h3 class="title">Liste de paramètres</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">statement</code></dt>

     <dd>

      <p class="para">
       Doit être un modèle de requête SQL valide pour le serveur de base de données ciblée.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">driver_options</code></dt>

     <dd>

      <p class="para">
       Ce tableau contient une ou plusieurs paires clé=&gt;valeur pour définir
       les valeurs des attributs pour l&#039;objet <a href="class.pdostatement.html" class="classname">PDOStatement</a>
       que cette méthode retourne. Vous pouvez utiliser ceci pour définir la valeur
       <code class="literal">PDO::ATTR_CURSOR</code> à
       <code class="literal">PDO::CURSOR_SCROLL</code> pour demander un curseur scrollable.
       Quelques pilotes ont des options spécifiques qui peuvent être définies
       au moment de la préparation.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-pdo.prepare-returnvalues">
  <h3 class="title">Valeurs de retour</h3>
  <p class="para">
   Si le serveur de base de données prépare avec succès cette requête,
   <span class="function"><strong>PDO::prepare()</strong></span> retourne un objet <a href="class.pdostatement.html" class="classname">PDOStatement</a>.
   Si le serveur de base de données ne réussit pas à préparer la requête,
   <span class="function"><strong>PDO::prepare()</strong></span> retourne <strong><code>FALSE</code></strong> ou émet une exception
   <a href="class.pdoexception.html" class="classname">PDOException</a> (suivant le <a href="pdo.error-handling.html" class="link">gestionnaire des erreurs</a>).
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    L&#039;émulation de requêtes préparées ne communique pas avec le serveur de base
    de données. Aussi, la fonction <span class="function"><strong>PDO::prepare()</strong></span> ne vérifie
    pas la requête.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 examples" id="refsect1-pdo.prepare-examples">
  <h3 class="title">Exemples</h3>
  <p class="para">
   <div class="example" id="example-1013">
    <p><strong>Exemple #1 Modèle de déclaration SQL avec des paramètres nommés</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;Exécute&nbsp;une&nbsp;requête&nbsp;préparée&nbsp;en&nbsp;passant&nbsp;un&nbsp;tableau&nbsp;de&nbsp;valeurs&nbsp;*/<br /></span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;nom,&nbsp;couleur,&nbsp;calories<br />&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;fruit<br />WHERE&nbsp;calories&nbsp;&lt;&nbsp;:calories&nbsp;AND&nbsp;couleur&nbsp;=&nbsp;:couleur'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$sth&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_CURSOR&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">CURSOR_FWDONLY</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #DD0000">':calories'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">150</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">':couleur'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'red'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$red&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #DD0000">':calories'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">175</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">':couleur'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'yellow'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$yellow&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <div class="example" id="example-1014">
    <p><strong>Exemple #2 Modèle de déclaration SQL avec des marqueurs</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;Exécute&nbsp;une&nbsp;requête&nbsp;préparée&nbsp;en&nbsp;passant&nbsp;un&nbsp;tableau&nbsp;de&nbsp;valeurs&nbsp;*/<br /></span><span style="color: #0000BB">$sth&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;nom,&nbsp;couleur,&nbsp;calories<br />&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;fruit<br />&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;calories&nbsp;&lt;&nbsp;?&nbsp;AND&nbsp;couleur&nbsp;=&nbsp;?'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #0000BB">150</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'rouge'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$red&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #0000BB">175</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'jaune'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$yellow&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-pdo.prepare-seealso">
  <h3 class="title">Voir aussi</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="pdo.exec.html" class="function" rel="rdfs-seeAlso">PDO::exec()</a> - Ex&eacute;cute une requ&ecirc;te SQL et retourne le nombre de lignes affect&eacute;es</span></li>
    <li class="member"><span class="function"><a href="pdo.query.html" class="function" rel="rdfs-seeAlso">PDO::query()</a> - Ex&eacute;cute une requ&ecirc;te SQL, retourne un jeu de r&eacute;sultats en tant 
   qu'objet PDOStatement</span></li>
    <li class="member"><span class="function"><a href="pdostatement.execute.html" class="function" rel="rdfs-seeAlso">PDOStatement::execute()</a> - Ex&eacute;cute une requ&ecirc;te pr&eacute;par&eacute;e</span></li>
   </ul>
  </p>
 </div>

</div></div></div></body></html>