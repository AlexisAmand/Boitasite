<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Enclenche la temporisation de sortie</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.ob-list-handlers.html">« ob_list_handlers</a></li>
      <li style="float: right;"><a href="function.output-add-rewrite-var.html">output_add_rewrite_var »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.outcontrol.html">Fonctions de bufferisation de sortie</a></li>
    <li>Enclenche la temporisation de sortie</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.ob-start" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ob_start</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">ob_start</span> &mdash; <span class="dc-title">Enclenche la temporisation de sortie</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.ob-start-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>ob_start</strong></span>
    ([ <span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$output_callback</code><span class="initializer"> = <strong><code>NULL</code></strong></span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$chunk_size</code><span class="initializer"> = 0</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code><span class="initializer"> = <strong><code>PHP_OUTPUT_HANDLER_STDFLAGS</code></strong></span></span>
  ]]] ) : <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>ob_start()</strong></span> démarre la temporisation de sortie. 
   Tant qu&#039;elle est enclenchée, aucune donnée, hormis les en-têtes, 
   n&#039;est envoyée au navigateur, mais temporairement mise en tampon.
  </p>
  <p class="para">
   Le contenu de ce tampon peut être copié dans une chaîne
   avec la fonction <span class="function"><a href="function.ob-get-contents.html" class="function">ob_get_contents()</a></span>. Pour afficher le
   contenu de ce tampon, utilisez <span class="function"><a href="function.ob-end-flush.html" class="function">ob_end_flush()</a></span>. Au
   contraire, <span class="function"><a href="function.ob-end-clean.html" class="function">ob_end_clean()</a></span> effacera le contenu de ce
   tampon.
  </p>
  <div class="warning"><strong class="warning">Avertissement</strong>
   <p class="para">
    Quelques serveurs web (par exemple Apache) modifient le dossier de
    travail d&#039;un script lorsqu&#039;il appelle une fonction de rappel.
    Vous pouvez revenir à un comportement normal en ajoutant
    <code class="literal">chdir(dirname($_SERVER[&#039;SCRIPT_FILENAME&#039;]))</code>
    dans votre fonction de rappel.
   </p>
  </div>
  <p class="para">
   Les tampons de sortie sont gérés par pile, c&#039;est-à-dire que vous pouvez
   appeler plusieurs fois <span class="function"><strong>ob_start()</strong></span> simultanément.
   Assurez-vous que vous appelez <span class="function"><a href="function.ob-end-flush.html" class="function">ob_end_flush()</a></span>
   suffisamment souvent. Si plusieurs fonctions de rappel sont actives,
   les contenus seront filtrés séquentiellement, dans l&#039;ordre d&#039;emboîtement.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.ob-start-parameters">
  <h3 class="title">Liste de paramètres</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">output_callback</code></dt>

     <dd>

      <p class="para">
       Une fonction optionnelle de rappel peut être spécifiée.
       Cette fonction prend une chaîne comme paramètre, et
       retourne une chaîne. Elle sera appelée lorsque le tampon sera envoyé
       ou supprimé (avec les fonctions <span class="function"><a href="function.ob-flush.html" class="function">ob_flush()</a></span>,
       <span class="function"><a href="function.ob-clean.html" class="function">ob_clean()</a></span> ou des fonctions similaires)
       ou lorsque le tampon sera envoyé
       au navigateur à la fin du script et recevra le contenu du tampon de
       sortie. Lorsque la fonction <code class="parameter">output_callback</code> est
       appelée, elle doit retourner un nouveau contenu pour le tampon de sortie :
       celui-ci sera envoyé au navigateur. Si <code class="parameter">output_callback</code>
       n&#039;est pas une fonction accessible, la fonction retournera <strong><code>FALSE</code></strong>.
       Voici la signature de la fonction de rappel :
      </p>
      <p class="para">
       <div class="methodsynopsis dc-description">
        <span class="methodname"><span class="replaceable">handler</span></span>
         ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$buffer</code></span>
        [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$phase</code></span>
       ] ) : <span class="type">string</span></div>

       <dl>

        
         <dt>
<code class="parameter">buffer</code></dt>

         <dd>

          <span class="simpara">
           Contenu du buffer de sortie.
          </span>
         </dd>

        
        
         <dt>
<code class="parameter">phase</code></dt>

         <dd>

          <span class="simpara">
           Masque de bits de <a href="outcontrol.constants.html" class="link">constantes
           <strong><code>PHP_OUTPUT_HANDLER_*</code></strong></a>.
          </span>
         </dd>

        
       </dl>

      </p>
      <p class="para">
       Si <code class="parameter">output_callback</code> retourne <strong><code>FALSE</code></strong>,
       l&#039;entrée originale est envoyée au navigateur.
      </p>
      <p class="para">
       Le paramètre <code class="parameter">output_callback</code> peut être annulé
       en y passant la valeur <strong><code>NULL</code></strong>.
      </p>
      <p class="para">
       <span class="function"><a href="function.ob-end-clean.html" class="function">ob_end_clean()</a></span>, <span class="function"><a href="function.ob-end-flush.html" class="function">ob_end_flush()</a></span>,
       <span class="function"><a href="function.ob-clean.html" class="function">ob_clean()</a></span>, <span class="function"><a href="function.ob-flush.html" class="function">ob_flush()</a></span> et
       <span class="function"><strong>ob_start()</strong></span> ne doivent pas être appelés depuis une
       fonction de rappel. Si vous les appelez depuis une fonction de
       rappel, le comportement ne sera pas défini. Si vous voulez effacer
       le contenu du tampon, retournez &quot;&quot; (une chaîne vide) depuis la fonction
       de rappel. Vous ne pourrez jamais appeler les fonctions utilisant
       la fonction de temporisation de sortie comme
       <code class="literal">print_r($expression, true)</code> ou
       <code class="literal">highlight_file($filename, true)</code> depuis une fonction de
       rappel.
      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       <p class="para">
        La fonction <span class="function"><a href="function.ob-gzhandler.html" class="function">ob_gzhandler()</a></span> a été
        introduite pour faciliter l&#039;envoi de fichiers compressés
        avec gzip aux navigateurs web qui supportent les pages
        compressées. <span class="function"><a href="function.ob-gzhandler.html" class="function">ob_gzhandler()</a></span>
        détermine le type d&#039;encodage accepté par un navigateur,
        et retourne le contenu le plus adéquat.
       </p>
      </p></blockquote>
     </dd>

    
    
     <dt>
<code class="parameter">chunk_size</code></dt>

     <dd>

      <p class="para">
       Si le paramètre optionnel <code class="parameter">chunk_size</code> est passé,
       la fonction de rappel est appelée à chaque nouvelle ligne après 
       <code class="parameter">chunk_size</code> octets d&#039;affichage. La valeur
       par défaut <code class="literal">0</code> (zéro) signifie que l&#039;affichage
       de la fonction ne sera appelé que lorsque le buffer de sortie est clos.
      </p>
      <p class="para">
       Avant la version PHP 5.4.0, la valeur <code class="literal">1</code> était une
       valeur spéciale qui définissait la taille du morceau à 4096 octets.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">flags</code></dt>

     <dd>

      <p class="para">
       Le paramètre <code class="parameter">flags</code> est un masque qui contrôle
       les opérations qui peuvent être effectuées sur le tampon de sortie.
       Par défaut, il autorise le tampon de sortie à être nettoyé, envoyé
       et supprimé, ce qui peut être défini explicitement avec les constantes
       <strong><code>PHP_OUTPUT_HANDLER_CLEANABLE</code></strong> |
       <strong><code>PHP_OUTPUT_HANDLER_FLUSHABLE</code></strong> |
       <strong><code>PHP_OUTPUT_HANDLER_REMOVABLE</code></strong>, ou
       <strong><code>PHP_OUTPUT_HANDLER_STDFLAGS</code></strong> comme alias.
      </p>
      <p class="para">
       Chaque drapeau contrôle l&#039;accès à un jeu de fonctions, tel décrit
       ci-dessous :
       <table class="doctable informaltable">
        
         <thead>
          <tr>
           <th>Constante</th>
           <th>Fonctions</th>
          </tr>

         </thead>

         <tbody class="tbody">
          <tr>
           <td><strong><code>PHP_OUTPUT_HANDLER_CLEANABLE</code></strong></td>
           <td>
            <span class="function"><a href="function.ob-clean.html" class="function">ob_clean()</a></span>,
            <span class="function"><a href="function.ob-end-clean.html" class="function">ob_end_clean()</a></span> et
            <span class="function"><a href="function.ob-get-clean.html" class="function">ob_get_clean()</a></span>.
           </td>
          </tr>

          <tr>
           <td><strong><code>PHP_OUTPUT_HANDLER_FLUSHABLE</code></strong></td>
           <td>
            <span class="function"><a href="function.ob-end-flush.html" class="function">ob_end_flush()</a></span>,
            <span class="function"><a href="function.ob-flush.html" class="function">ob_flush()</a></span> et
            <span class="function"><a href="function.ob-get-flush.html" class="function">ob_get_flush()</a></span>.
           </td>
          </tr>

          <tr>
           <td><strong><code>PHP_OUTPUT_HANDLER_REMOVABLE</code></strong></td>
           <td>
            <span class="function"><a href="function.ob-end-clean.html" class="function">ob_end_clean()</a></span>,
            <span class="function"><a href="function.ob-end-flush.html" class="function">ob_end_flush()</a></span> et
            <span class="function"><a href="function.ob-get-flush.html" class="function">ob_get_flush()</a></span>.
           </td>
          </tr>

         </tbody>
        
       </table>

      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.ob-start-returnvalues">
  <h3 class="title">Valeurs de retour</h3>
  <p class="para">
   Cette fonction retourne <strong><code>TRUE</code></strong> en cas de succès ou <strong><code>FALSE</code></strong> si une erreur survient.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.ob-start-examples">
  <h3 class="title">Exemples</h3>
  <p class="para">
   <div class="example" id="ffi.examples.array">
    <p><strong>Exemple #1 Exemple de gestion de sortie avec fonction de rappel</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">rappel</span><span style="color: #007700">(</span><span style="color: #0000BB">$buffer</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;remplace&nbsp;toutes&nbsp;les&nbsp;pommes&nbsp;par&nbsp;des&nbsp;carottes<br />&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;(</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"pommes&nbsp;de&nbsp;terre"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"carottes"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$buffer</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #0000BB">ob_start</span><span style="color: #007700">(</span><span style="color: #DD0000">"rappel"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;<br /></span>&lt;html&gt;<br />&lt;body&gt;<br />&lt;p&gt;C'est&nbsp;comme&nbsp;comparer&nbsp;des&nbsp;carottes&nbsp;et&nbsp;des&nbsp;pommes&nbsp;de&nbsp;terre.&lt;/p&gt;<br />&lt;/body&gt;<br />&lt;/html&gt;<br /><span style="color: #0000BB">&lt;?php<br /><br />ob_end_flush</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher :</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
&lt;html&gt;
&lt;body&gt;
&lt;p&gt;C&#039;est comme comparer des carottes et des carottes.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div>
    </div>
   </div>
  </p>

  <p class="para">
   <div class="example" id="ffi.examples.enum">
    <p><strong>Exemple #2 Crée un tampon de sortie in-effacable de sorte à être compatible avec PHP 5.3 et PHP 5.4</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">version_compare</span><span style="color: #007700">(</span><span style="color: #0000BB">PHP_VERSION</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'5.4.0'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'&gt;='</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">ob_start</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PHP_OUTPUT_HANDLER_STDFLAGS&nbsp;</span><span style="color: #007700">^<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">PHP_OUTPUT_HANDLER_REMOVABLE</span><span style="color: #007700">);<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">ob_start</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.ob-start-seealso">
  <h3 class="title">Voir aussi</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.ob-get-contents.html" class="function" rel="rdfs-seeAlso">ob_get_contents()</a> - Retourne le contenu du tampon de sortie</span></li>
    <li class="member"><span class="function"><a href="function.ob-end-clean.html" class="function" rel="rdfs-seeAlso">ob_end_clean()</a> - D&eacute;truit les donn&eacute;es du tampon de sortie et &eacute;teint la temporisation de sortie</span></li>
    <li class="member"><span class="function"><a href="function.ob-end-flush.html" class="function" rel="rdfs-seeAlso">ob_end_flush()</a> - Envoie les donn&eacute;es du tampon de sortie et &eacute;teint la temporisation de sortie</span></li>
    <li class="member"><span class="function"><a href="function.ob-implicit-flush.html" class="function" rel="rdfs-seeAlso">ob_implicit_flush()</a> - Active/d&eacute;sactive l'envoi implicite</span></li>
    <li class="member"><span class="function"><a href="function.ob-gzhandler.html" class="function" rel="rdfs-seeAlso">ob_gzhandler()</a> - Fonction de rappel pour la compression automatique des tampons</span></li>
    <li class="member"><span class="function"><a href="function.ob-iconv-handler.html" class="function" rel="rdfs-seeAlso">ob_iconv_handler()</a> - Gestionnaire de sortie pour ma&icirc;triser le jeu de caract&egrave;res de sortie</span></li>
    <li class="member"><span class="function"><a href="function.mb-output-handler.html" class="function" rel="rdfs-seeAlso">mb_output_handler()</a> - Fonction de traitement des affichages</span></li>
    <li class="member"><span class="function"><a href="function.ob-tidyhandler.html" class="function" rel="rdfs-seeAlso">ob_tidyhandler()</a> - Fonction de rappel ob_start pour r&eacute;parer le buffer</span></li>
   </ul>
  </p>
 </div>


</div></div></div></body></html>