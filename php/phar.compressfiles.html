<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Compresse tous les fichiers de l'archive Phar courante'</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="phar.compressallfilesgz.html">« Phar::compressAllFilesGZ</a></li>
      <li style="float: right;"><a href="phar.construct.html">Phar::__construct »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.phar.html">Phar</a></li>
    <li>Compresse tous les fichiers de l'archive Phar courante'</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="phar.compressfiles" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Phar::compressFiles</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.3.0, PHP 7, PECL phar &gt;= 2.0.0)</p><p class="refpurpose"><span class="refname">Phar::compressFiles</span> &mdash; <span class="dc-title">Compresse tous les fichiers de l&#039;archive Phar courante&#039;</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-phar.compressfiles-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>Phar::compressFiles</strong></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$compression</code></span>
   ) : <span class="type"><span class="type void">void</span></span></div>

  <blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">Cette
    méthode nécessite que la variable de configuration INI <code class="literal">phar.readonly</code>
    soit définie à <code class="literal">0</code> pour fonctionner avec les objets <a href="class.phar.html" class="classname">Phar</a>.
    Sinon, une exception <a href="class.pharexception.html" class="classname">PharException</a> sera lançée.</p></p></blockquote>
  <p class="para">
   Pour les archives phar basées sur tar, cette méthode lève une exception
   <a href="class.badmethodcallexception.html" class="classname">BadMethodCallException</a> car la compression de fichier individuelle au sein
   d&#039;une archive tar n&#039;est pas supportée par le format de fichier. Utilisez
   <span class="function"><a href="phar.compress.html" class="function">Phar::compress()</a></span> pour compresser une archive phar basée sur tar en entier.
  </p>
  <p class="para">
   Pour les extensions phar basées sur Zip, cette méthode compresse tous les fichiers de l&#039;archive
   Phar en utilisant la compression spécifiée.
   Les extensions <a href="ref.zlib.html" class="link">zlib</a> ou <a href="ref.bzip2.html" class="link">bzip2</a>
   doivent être activée pour tirer parti de cette fonctionnalité. De plus, si un ou des fichiers
   ont déjà été compressé en utilisant la compression bzip2/zlib, l&#039;extension adéquate doit être activée
   pour décompresser les fichiers avant de les recompresser.
   extensions must be enabled to take advantage of this feature.  In addition, if any files
   are already compressed using bzip2/zlib compression, the respective extension must be
   enabled in order to decompress the files prior to re-compressing.
   Comme avec toutes les fonctionnalités qui modifient le contenu d&#039;un phar, la variable INI
   <a href="phar.configuration.html#ini.phar.readonly" class="link">phar.readonly</a> doit être à off pour fonctionner.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-phar.compressfiles-parameters">
  <h3 class="title">Liste de paramètres</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">compression</code></dt>

     <dd>

      <p class="para">
    La compression doit être soit <code class="literal">Phar::GZ</code>,
    soit <code class="literal">Phar::BZ2</code> pour bénéficier de la compression, ou bien <code class="literal">Phar::NONE</code>
    pour éliminer la compression.
      </p>
     </dd>

    
   </dl>

  </p>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-phar.compressfiles-returnvalues">
  <h3 class="title">Valeurs de retour</h3>
  <p class="para">
   Aucune valeur n&#039;est retournée.
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-phar.compressfiles-errors">
  <h3 class="title">Erreurs / Exceptions</h3>
  <p class="para">
   Lève une exception <a href="class.badmethodcallexception.html" class="classname">BadMethodCallException</a> si
   la variable INI <a href="phar.configuration.html#ini.phar.readonly" class="link">phar.readonly</a> est à on,
   si l&#039;extension <a href="ref.zlib.html" class="link">zlib</a>
   n&#039;est pas disponible, ou si un ou des fichiers ont été compressés avec l&#039;algorithme bzip2
   et que l&#039;extension <a href="ref.bzip2.html" class="link">bzip2</a> n&#039;est pas activée.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-phar.compressfiles-examples">
  <h3 class="title">Exemples</h3>
  <p class="para">
   <div class="example" id="example-699">
    <p><strong>Exemple #1 Un exemple avec <span class="function"><strong>Phar::compressFiles()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$p&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Phar</span><span style="color: #007700">(</span><span style="color: #DD0000">'/chemin/vers/mon.phar'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'mon.phar'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$p</span><span style="color: #007700">[</span><span style="color: #DD0000">'monfichier.txt'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'salut'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$p</span><span style="color: #007700">[</span><span style="color: #DD0000">'monfichier2.txt'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'salut'</span><span style="color: #007700">;<br />foreach&nbsp;(</span><span style="color: #0000BB">$p&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFileName</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isCompressed</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isCompressed</span><span style="color: #007700">(</span><span style="color: #0000BB">Phar</span><span style="color: #007700">::</span><span style="color: #0000BB">BZ2</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isCompressed</span><span style="color: #007700">(</span><span style="color: #0000BB">Phar</span><span style="color: #007700">::</span><span style="color: #0000BB">GZ</span><span style="color: #007700">));<br />}<br /></span><span style="color: #0000BB">$p</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">compressFiles</span><span style="color: #007700">(</span><span style="color: #0000BB">Phar</span><span style="color: #007700">::</span><span style="color: #0000BB">GZ</span><span style="color: #007700">);<br />foreach&nbsp;(</span><span style="color: #0000BB">$p&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFileName</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isCompressed</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isCompressed</span><span style="color: #007700">(</span><span style="color: #0000BB">Phar</span><span style="color: #007700">::</span><span style="color: #0000BB">BZ2</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isCompressed</span><span style="color: #007700">(</span><span style="color: #0000BB">Phar</span><span style="color: #007700">::</span><span style="color: #0000BB">GZ</span><span style="color: #007700">));<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher :</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
string(10) &quot;monfichier.txt&quot;
bool(false)
bool(false)
bool(false)
string(11) &quot;monfichier2.txt&quot;
bool(false)
bool(false)
bool(false)
string(10) &quot;monfichier.txt&quot;
int(4096)
bool(false)
bool(true)
string(11) &quot;monfichier2.txt&quot;
int(4096)
bool(false)
bool(true)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-phar.compressfiles-seealso">
  <h3 class="title">Voir aussi</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="pharfileinfo.getcompressedsize.html" class="function" rel="rdfs-seeAlso">PharFileInfo::getCompressedSize()</a> - Retourne la taille actuelle (avec compression) du fichier au sein de l'archive Phar</span></li>
    <li class="member"><span class="function"><a href="pharfileinfo.iscompressed.html" class="function" rel="rdfs-seeAlso">PharFileInfo::isCompressed()</a> - Retourne si l'entr&eacute;e est compress&eacute;e</span></li>
    <li class="member"><span class="function"><a href="pharfileinfo.compress.html" class="function" rel="rdfs-seeAlso">PharFileInfo::compress()</a> - Compresse l'entr&eacute;e Phar courante avec une des compressions zlib ou bzip2</span></li>
    <li class="member"><span class="function"><a href="pharfileinfo.decompress.html" class="function" rel="rdfs-seeAlso">PharFileInfo::decompress()</a> - D&eacute;compresse l'entr&eacute;e Phar courante au sein du phar</span></li>
    <li class="member"><span class="function"><a href="phar.cancompress.html" class="function" rel="rdfs-seeAlso">Phar::canCompress()</a> - D&eacute;termine si l'extension phar supporte une la compression en utilisant soit zip soit bzip2</span></li>
    <li class="member"><span class="function"><a href="phar.iscompressed.html" class="function" rel="rdfs-seeAlso">Phar::isCompressed()</a> - Retourne Phar::GZ ou PHAR::BZ2 si l'archive enti&egrave;re est compress&eacute;e (.tar.gz/tar.bz, etc)</span></li>
    <li class="member"><span class="function"><a href="phar.decompressfiles.html" class="function" rel="rdfs-seeAlso">Phar::decompressFiles()</a> - D&eacute;compresse tous les fichiers de l'archive Phar courante</span></li>
    <li class="member"><span class="function"><a href="phar.getsupportedcompression.html" class="function" rel="rdfs-seeAlso">Phar::getSupportedCompression()</a> - Retourne un tableau des algorithmes de compression support&eacute;s</span></li>
    <li class="member"><span class="function"><a href="phar.compress.html" class="function" rel="rdfs-seeAlso">Phar::compress()</a> - Compresse l'archive Phar compl&egrave;te en utilisant la compression Gzip ou Bzip2</span></li>
    <li class="member"><span class="function"><a href="phar.decompress.html" class="function" rel="rdfs-seeAlso">Phar::decompress()</a> - D&eacute;compresse l'archive tar compl&egrave;te</span></li>
   </ul>
  </p>
 </div>


</div></div></div></body></html>