<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Les valeurs de retour</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="functions.arguments.html">« Les arguments de fonction</a></li>
      <li style="float: right;"><a href="functions.variable-functions.html">Fonctions variables »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.functions.html">Les fonctions</a></li>
    <li>Les valeurs de retour</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="functions.returning-values" class="sect1">
  <h2 class="title">Les valeurs de retour</h2>
  
  <p class="para">
   Les valeurs sont renvoyées en utilisant une
   instruction de retour optionnelle. Tous les types de variables
   peuvent être renvoyés, tableaux et objets compris. Cela fait
   que la fonction finit son exécution immédiatement et passe
   le contrôle à la ligne appelante. Voir
   <span class="function"><a href="function.return.html" class="function">return</a></span>
   pour plus d&#039;informations.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    Si <span class="function"><a href="function.return.html" class="function">return</a></span>
    est omis, la valeur <strong><code>NULL</code></strong> sera retournée.
   </p>
  </p></blockquote>
  
  <div class="sect2">
   <h3 class="title">Utilisation de return</h3>
   <p class="para">
    <div class="example" id="example-165">
     <p><strong>Exemple #1 Utilisation de <span class="function"><a href="function.return.html" class="function">return</a></span></strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">carre</span><span style="color: #007700">(</span><span style="color: #0000BB">$num</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$num&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">$num</span><span style="color: #007700">;<br />}<br />echo&nbsp;</span><span style="color: #0000BB">carre</span><span style="color: #007700">(</span><span style="color: #0000BB">4</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;Affiche&nbsp;'16'<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
   
   <p class="para">
    Une fonction ne peut pas renvoyer plusieurs valeurs en même temps, mais
    vous pouvez obtenir le même résultat en renvoyant un tableau.
   </p>
   <p class="para">
    <div class="example" id="example-166">
     <p><strong>Exemple #2 Retourner un tableau d&#039;une fonction</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">petit_nombre</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;array&nbsp;(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br />}<br />list&nbsp;(</span><span style="color: #0000BB">$zero</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$un</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$deux</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">petit_nombre</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
   <p class="para">
    Pour retourner une référence d&#039;une fonction, utilisez
    l&#039;opérateur &amp; aussi bien dans la déclaration de la fonction que dans
    l&#039;assignation de la valeur de retour.
   </p>
   <p class="para">
    <div class="example" id="example-167">
     <p><strong>Exemple #3 Retourner une référence d&#039;une fonction</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;&amp;</span><span style="color: #0000BB">retourne_reference</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$uneref</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$newref&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">retourne_reference</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
   <p class="simpara">
    Pour plus d&#039;informations sur les références, référez-vous à <a href="language.references.html" class="link">l&#039;explication sur les références</a>.
   </p>
  </div>   
  
  <div class="sect2" id="functions.returning-values.type-declaration">
   <h3 class="title">Déclaration des types de retour</h3>
   
   <p class="para">
    PHP 7 ajoute le support des déclarations du type de retour. De façon 
    similaire aux <a href="functions.arguments.html#functions.arguments.type-declaration" class="link">déclarations
    du type des arguments</a>, les déclarations du type de retour spécifient le
    type de la valeur qui sera retournée par une fonction. Les mêmes 
    <a href="functions.arguments.html#functions.arguments.type-declaration.types" class="link">types</a> 
    sont disponibles pour le typage du retour que pour le typage des arguments.
   </p>
   
   <p class="para">
    <a href="functions.arguments.html#functions.arguments.type-declaration.strict" class="link">Le typage strict</a>
    affecte aussi les déclarations du type de retour. Dans le mode faible par défaut,
    les valeurs retournées seront transtypées vers le type demandé si elles ne sont pas
    déjà de celui-ci. Si ce type de conversion n&#039;est pas autorisé
    (e.g. lorsque retourne un <a href="language.types.array.html" class="link">tableau</a> depuis une fonction avec un type de retour
    <a href="language.types.integer.html" class="link">entier</a>), un <a href="class.typeerror.html" class="classname">TypeError</a> sera émis.
    En mode strict, la valeur retournée doit être d&#039;un type correct, sinon un
    <a href="class.typeerror.html" class="classname">TypeError</a> sera émis.
   </p>

   <p class="para">
    Depuis PHP 7.1.0, les structures de retour sans argument lançent une
    erreur <strong><code>E_COMPILE_ERROR</code></strong>, tant que le type retourné est
    <span class="type"><span class="type void">void</span></span>, auqeul cas, les structures de retour avec un argument
    lançent cette erreur.
   </p>

   
   <p class="para">
    Depuis PHP 7.1.0, les valeurs de retour peuvent être marqué comme nullable en préfixant 
    le nom du type avec un point d&#039;interrogation (<code class="literal">?</code>). Ceci signifie que
    la function retourne soit le type spécifier soit <strong><code>NULL</code></strong>.
   </p>
   
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <p class="para">
     Lors de la surcharge d&#039;une méthode parente, la méthode fille doit retourner une
     valeur cohérente avec le type de valeur retournée par la méthode parente. Si le
     parent ne définit par de type de retour, il doit en être de même pour la fille.
    </p>
   </p></blockquote>
   
   <div class="sect3" id="functions.returning-values.type-declaration.examples">
    <h4 class="title">Exemples</h4>
    
    <div class="example" id="example-168">
     <p><strong>Exemple #4 Déclaration basique de type de retour</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">):&nbsp;</span><span style="color: #0000BB">float&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;Note&nbsp;qu'une&nbsp;valeur&nbsp;flottante&nbsp;sera&nbsp;retournée.<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher :</p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
float(3)
</pre></div>
     </div>
    </div>
    
    <div class="example" id="example-169">
     <p><strong>Exemple #5 Le mode strict en action</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">declare(</span><span style="color: #0000BB">strict_types</span><span style="color: #007700">=</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br />function&nbsp;</span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">):&nbsp;</span><span style="color: #0000BB">int&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2.5</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher :</p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
int(3)

Fatal error: Uncaught TypeError: Return value of sum() must be of the type integer, float returned in - on line 5 in -:5
Stack trace:
#0 -(9): sum(1, 2.5)
#1 {main}
  thrown in - on line 5
</pre></div>
     </div>
    </div>
    
    <div class="example" id="example-170">
     <p><strong>Exemple #6 Retourner un objet</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">C&nbsp;</span><span style="color: #007700">{}<br /><br />function&nbsp;</span><span style="color: #0000BB">getC</span><span style="color: #007700">():&nbsp;</span><span style="color: #0000BB">C&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;</span><span style="color: #0000BB">C</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">getC</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher :</p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
object(C)#1 (0) {
}
</pre></div>
     </div>
    </div>
    
    <div class="example" id="example-171">
      <p><strong>Exemple #7 Déclaration d&#039;un type de retour nullable (depuis PHP 7.1.0)</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">get_item</span><span style="color: #007700">():&nbsp;?</span><span style="color: #0000BB">string&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'item'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'item'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
   </div>
  </div>
 </div></div></div></body></html>