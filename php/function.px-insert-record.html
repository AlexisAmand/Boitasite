<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Ins&egrave;re un enregistrement dans une base de donn&eacute;es Paradox</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.px-get-value.html">« px_get_value</a></li>
      <li style="float: right;"><a href="function.px-new.html">px_new »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.paradox.html">Fonctions Paradox</a></li>
    <li>Ins&egrave;re un enregistrement dans une base de donn&eacute;es Paradox</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.px-insert-record" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">px_insert_record</h1>
  <p class="verinfo">(PECL paradox &gt;= 1.4.0)</p><p class="refpurpose"><span class="refname">px_insert_record</span> &mdash; <span class="dc-title">Insère un enregistrement dans une base de données Paradox</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.px-insert-record-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>px_insert_record</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$pxdoc</code></span>
   , <span class="methodparam"><span class="type">array</span> <code class="parameter">$data</code></span>
   ) : <span class="type">int</span></div>


  <p class="para rdfs-comment">
   Insère un nouvel enregistrement dans une base de données. L&#039;enregistrement
   n&#039;est pas nécessairement inséré à la fin de la base de données mais peut être inséré
   à n&#039;importe quelle position libre trouvée.
  </p>
  <p class="para">
   Les données à enregistrer sont passées via un tableau de valeurs. Les éléments
   du tableau doivent correspondre aux champs de la base de données. Si le tableau
   a moins d&#039;éléments que de champs dans la base de données, les champs restants
   seront définis à NULL.
  </p>
  <p class="para">
   La plupart des valeurs des champs peut être passée en tant que leurs
   équivalents PHP, e.g. une valeur longue est utilisée pour les champs de type
   PX_FIELD_LONG, PX_FIELD_SHORT et PX_FIELD_AUTOINC, une valeur double
   est utilisée pour les champs de type PX_FIELD_CURRENCY et PX_FIELD_NUMBER.
   Les valeurs de champs Blob et alpha sont passées en tant que chaînes de caractères.
  </p>
  <p class="para">
   Les champs de type PX_FIELD_TIME et PX_FIELD_DATE nécessitent une valeur longue.
   Dans le premier cas, ce sera le nombre de millisecondes depuis minuit.
   Dans le second cas, ce sera le nombre de jours depuis le 1.1.0000.
   Ci-dessous, deux exemples pour convertir la date courante ou le timestamp
   en une valeur compréhensible par les champs Paradox date/heure.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    Cette fonction est uniquement disponible si pxlib &gt;= 0.6.0 est utilisé..
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.px-insert-record-parameters">
  <h3 class="title">Liste de paramètres</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">pxdoc</code></dt>

     <dd>

      <p class="para">
       Identifiant de ressource de base de données Paradox tel que
       retourné par la fonction <span class="function"><a href="function.px-new.html" class="function">px_new()</a></span>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">data</code></dt>

     <dd>

      <p class="para">
       Un tableau associatif ou indexé contenant les valeurs des champs comme
       retournées par la fonction <span class="function"><a href="function.px-retrieve-record.html" class="function">px_retrieve_record()</a></span>.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.px-insert-record-returnvalues">
  <h3 class="title">Valeurs de retour</h3>
  <p class="para">
   Retourne le numéro de l&#039;enregistrement inséré ou <strong><code>FALSE</code></strong> en cas d&#039;erreur.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.px-insert-record-examples">
  <h3 class="title">Exemples</h3>
  <p class="para">
   <div class="example" id="example-2457">
    <p><strong>Exemple #1 Définit les champs date/heure dans une base de données Paradox à la date/heure courant</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$px&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">px_new</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$fp&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">"test.db"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"w+"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">px_create_fp</span><span style="color: #007700">(</span><span style="color: #0000BB">$px</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&nbsp;array(array(</span><span style="color: #DD0000">"timestamp"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"@"</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">"time"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"T"</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">"date"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"D"</span><span style="color: #007700">)));<br /><br /></span><span style="color: #0000BB">$curdate&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">getdate</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$jd&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">gregoriantojd</span><span style="color: #007700">(</span><span style="color: #0000BB">$curdate</span><span style="color: #007700">[</span><span style="color: #DD0000">"mon"</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$curdate</span><span style="color: #007700">[</span><span style="color: #DD0000">"mday"</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$curdate</span><span style="color: #007700">[</span><span style="color: #DD0000">"year"</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$days&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$jd&nbsp;</span><span style="color: #007700">-&nbsp;</span><span style="color: #0000BB">1721425</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Number&nbsp;of&nbsp;days&nbsp;between&nbsp;1.1.4714&nbsp;b.c.&nbsp;and&nbsp;1.1.0000&nbsp;*/<br /></span><span style="color: #0000BB">$secs&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$curdate</span><span style="color: #007700">[</span><span style="color: #DD0000">"hours"</span><span style="color: #007700">]*</span><span style="color: #0000BB">3600&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">$curdate</span><span style="color: #007700">[</span><span style="color: #DD0000">"minutes"</span><span style="color: #007700">]*</span><span style="color: #0000BB">60&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">$curdate</span><span style="color: #007700">[</span><span style="color: #DD0000">"seconds"</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">px_insert_record</span><span style="color: #007700">(</span><span style="color: #0000BB">$px</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #0000BB">$days</span><span style="color: #007700">*</span><span style="color: #0000BB">86400000.0&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">$secs</span><span style="color: #007700">*</span><span style="color: #0000BB">1000.0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$secs</span><span style="color: #007700">*</span><span style="color: #0000BB">1000.0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$days</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$curtimestamp&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">microtime</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$days&nbsp;</span><span style="color: #007700">=&nbsp;(int)&nbsp;(</span><span style="color: #0000BB">$curtimestamp</span><span style="color: #007700">/</span><span style="color: #0000BB">86400</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$secs&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$curtimestamp&nbsp;</span><span style="color: #007700">-&nbsp;(</span><span style="color: #0000BB">$days&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">86400.0</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$days&nbsp;</span><span style="color: #007700">+=&nbsp;</span><span style="color: #0000BB">2440588</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Number&nbsp;of&nbsp;days&nbsp;between&nbsp;1.1.4714&nbsp;b.c.&nbsp;and&nbsp;1.1.1970&nbsp;*/<br /></span><span style="color: #0000BB">$days&nbsp;</span><span style="color: #007700">-=&nbsp;</span><span style="color: #0000BB">1721425</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Number&nbsp;of&nbsp;days&nbsp;between&nbsp;1.1.4714&nbsp;b.c.&nbsp;and&nbsp;1.1.0000&nbsp;*/<br /></span><span style="color: #0000BB">px_insert_record</span><span style="color: #007700">(</span><span style="color: #0000BB">$px</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #0000BB">$days</span><span style="color: #007700">*</span><span style="color: #0000BB">86400000.0&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">$secs</span><span style="color: #007700">*</span><span style="color: #0000BB">1000.0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$secs</span><span style="color: #007700">*</span><span style="color: #0000BB">1000.0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$days</span><span style="color: #007700">));<br />for(</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">2</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&nbsp;{<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rec&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">px_retrieve_record</span><span style="color: #007700">(</span><span style="color: #0000BB">$px</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">px_timestamp2string</span><span style="color: #007700">(</span><span style="color: #0000BB">$px</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$rec</span><span style="color: #007700">[</span><span style="color: #DD0000">"timestamp"</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"n/d/Y&nbsp;H:i:s"</span><span style="color: #007700">).</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">px_date2string</span><span style="color: #007700">(</span><span style="color: #0000BB">$px</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$rec</span><span style="color: #007700">[</span><span style="color: #DD0000">"date"</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"n/d/Y"</span><span style="color: #007700">).</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">px_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$px</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">px_delete</span><span style="color: #007700">(</span><span style="color: #0000BB">$px</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher :</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
2/21/2006 21:42:30
2/21/2006
2/21/2006 20:42:30
2/21/2006
</pre></div>
    </div>
   </div>
  </p>

  <p class="para">
   Le nombre de jours Julien tel que passé à la fonction <span class="function"><a href="function.jdtogregorian.html" class="function">jdtogregorian()</a></span>
   a une base différente de 1.1.4714 b.c. et doit être calculé en ajoutant 1721425
   au nombre de jours utilisé dans le fichier Paradox. Le fait de convertir le nombre
   de jours en timestamp est facile ; il suffit de multiplier ce nombre par 86400000.0
   pour obtenir des millisecondes.
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.px-insert-record-seealso">
  <h3 class="title">Voir aussi</h3>
  <p class="para">
   <span class="function"><a href="function.px-update-record.html" class="function" rel="rdfs-seeAlso">px_update_record()</a> - Met &agrave; jour les enregistrements dans une base de donn&eacute;es Paradox</span>
  </p>
 </div>


</div></div></div></body></html>