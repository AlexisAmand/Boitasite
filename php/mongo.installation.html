<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Installation</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="mongo.requirements.html">« Pr&eacute;-requis</a></li>
      <li style="float: right;"><a href="mongo.configuration.html">Configuration &agrave; l'ex&eacute;cution »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="mongo.setup.html">Installation/Configuration</a></li>
    <li>Installation</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mongo.installation" class="section">
 <h2 class="title">Installation</h2>
 
 <div class="warning"><strong class="warning">Avertissement</strong>
  <p class="para">Cette extension est obsolète. À la place,
vous devriez utiliser l&#039;extension <a href="set.mongodb.html" class="link">MongoDB</a>.</p>
 </div>
 
 <p class="para">
  Le driver MongoDB devrait fonctionner sur la plupart des systèmes : Windows, macOS, 
  Unix, et Linux ; des petites machines aux gros serveurs ; sur des systèmes
  32 et 64 bit ; avec PHP 5.3 à 5.6 (les versions antérieures à la 1.6 
  supportent aussi PHP 5.2).
 </p>
 <p class="para">
  Cette extension <a href="https://pecl.php.net/" class="link external">&raquo;&nbsp;PECL</a>
        n&#039;est pas intégrée à PHP.
 </p>
 
 <ul class="simplelist">
  <li class="member">
   <a href="mongo.installation.html#mongo.installation.manual" class="xref">Installation manuelle</a>
  </li>
  <li class="member">
   <a href="mongo.installation.html#mongo.installation.nix" class="xref">Installation sur les syst&egrave;mes *NIX</a>
  </li>
  <li class="member">
   <a href="mongo.installation.html#mongo.installation.windows" class="xref">Installation sous Windows</a>
  </li>
  <li class="member">
   <a href="mongo.installation.html#mongo.installation.osx" class="xref">Installation sur les syst&egrave;mes macOS</a>
  </li>
  <li class="member">
   <a href="mongo.installation.html#mongo.installation.gentoo" class="xref">Gentoo</a>
  </li>
  <li class="member">
   <a href="mongo.installation.html#mongo.installation.fedora" class="xref">Red Hat</a>
  </li>
  <li class="member">
   <a href="mongo.installation.html#mongo.installation.thirdparty" class="xref">Instructions d'installation tierces</a>
  </li>
 </ul>
 
 <div class="section" id="mongo.installation.manual">
  <h2 class="title">Installation manuelle</h2>
  
  <p class="para">
   Pour les développeurs des pilotes ou les personnes intéréssées par les derniers correctifs
   de bugs, vous pouvez compiler le pilote depuis
   <a href="https://github.com/mongodb/mongo-php-driver-legacy" class="link external">&raquo;&nbsp;Github</a>.
   Allez sur Github et cliquez sur &quot;download&quot;. Lancez ensuite :   
   <div class="example-contents">
<div class="shellcode"><pre class="shellcode">$ tar zxvf mongo-php-driver-legacy-&lt;commit_id&gt;.tar.gz
$ cd mongo-php-driver-legacy-&lt;commit_id&gt;
$ phpize
$ ./configure
$ make all
$ sudo make install</pre>
</div>
   </div>

  </p>
  
  <p class="para">
   Effectuez ces changements à votre fichier <var class="filename">php.ini</var> :
  </p>
  <ul class="itemizedlist">
   <li class="listitem">
    <p class="para">
     Assurez-vous que la variable <em class="emphasis">extension_dir</em>
     pointe vers le dossier contenant le fichier <em class="emphasis">mongo.so</em>.
     La compilation devrait afficher l&#039;endroit où PHP installe le driver ;
     l&#039;affichage devrait ressembler à quelque chose comme :
     <div class="example-contents">
<div class="txtcode"><pre class="txtcode">Installing &#039;/usr/lib/php/extensions/no-debug-non-zts-20060613/mongo.so&#039;</pre>
</div>
     </div>

     
     Vérifiez bien qu&#039;il s&#039;agisse du même dossier d&#039;extensions que celui de votre PHP en lançant:
     
     <div class="example-contents">
<div class="shellcode"><pre class="shellcode">$ php -i | grep extension_dir
  extension_dir =&gt; /usr/lib/php/extensions/no-debug-non-zts-20060613 =&gt;
                   /usr/lib/php/extensions/no-debug-non-zts-20060613</pre>
</div>
     </div>

     
     Si ce n&#039;est pas le cas, changez <em class="emphasis">extension_dir</em>
     de <var class="filename">php.ini</var> ou placez manuellement <em class="emphasis">mongo.so</em>.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     Pour chargez l&#039;extension au démarrage de PHP, ajoutez cette ligne :
     
     <div class="example-contents">
<div class="inicode"><pre class="inicode">extension=mongo.so</pre>
</div>
     </div>

     
    </p>
   </li>
  </ul>
 </div>
 
 <div class="section" id="mongo.installation.nix">
  <h2 class="title">Installation sur les systèmes *NIX</h2>
  
  <p class="para">
   Exécutez :
   <div class="example-contents">
<div class="shellcode"><pre class="shellcode">$ sudo pecl install mongo</pre>
</div>
   </div>

  </p>
  
  <p class="para">
   Ajoutez la ligne suivante à votre fichier <var class="filename">php.ini</var> :
   <div class="example-contents">
<div class="inicode"><pre class="inicode">extension=mongo.so</pre>
</div>
   </div>

  </p>
  
  <p class="para">
   Si PECL fait un dépassement de mémoire lors de l&#039;installation, assurez-vous
   que la directive memory_limit du fichier <var class="filename">php.ini</var> est fixée à au moins 128MB.
  </p>
 </div>
 
 <div class="section" id="mongo.installation.windows">
  <h2 class="title">Installation sous Windows</h2>
  
  <p class="para">
   Les binaires précompilés pour chaque version sont disponibles sur
   <a href="https://pecl.php.net/package/mongo" class="link external">&raquo;&nbsp;PECL</a> pour une
   grande variété de combinaison de versions, de sécurité de threads, et de
   bibliothèques VC. Décompressez l&#039;archive et placez php_mongo.dll dans votre
   dossier d&#039;extension PHP (&quot;ext&quot; par défaut).
  </p>
  
  <p class="para">
   Ajoutez la ligne suivante à votre fichier <var class="filename">php.ini</var> :
   <div class="example-contents">
<div class="inicode"><pre class="inicode">extension=php_mongo.dll</pre>
</div>
   </div>

  </p>
  
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <strong>Dépendences DLL additionnelles pour les utilisateurs Windows</strong><br />
   <p class="para">
    Afin de faire fonctionner cette extension, quelques bibliothèques
<acronym title="Dynamic Link Library">DLL</acronym> doivent être disponibles via le
<var class="envar">PATH</var> du système Windows. Lisez la
<acronym>F.A.Q</acronym> intitulée
&quot;<a href="faq.installation.html#faq.installation.addtopath" class="link">Comment ajouter mon dossier
PHP à mon PATH Windows</a>&quot; pour plus d&#039;informations. Le fait de copier les bibliothèques DLL depuis le
dossier PHP dans le dossier système Windows fonctionne également (car le dossier système est par défaut dans le
<var class="envar">PATH</var> système), mais cette méthode n&#039;est pas recommandée.
<em class="emphasis">Cette extension nécessite que les fichiers suivants se trouvent dans le
<var class="envar">PATH</var> :</em> 
    <var class="filename">libsasl.dll</var>
   </p>
  </p></blockquote>
 </div>
 
 <div class="section" id="mongo.installation.osx">
  <h2 class="title">Installation sur les systèmes macOS</h2>
  
  <p class="para">
   Dans la plupart des cas, l&#039;installation depuis PECL reste le plus simple :
   <div class="example-contents">
<div class="shellcode"><pre class="shellcode">$ sudo pecl install mongo</pre>
</div>
    </div>

   </p>
   
   <p class="para">
    Si votre système a plusieurs version de PHP d&#039;installé (par exemple macOS default,
    Homebrew, <a href="https://www.apachefriends.org/" class="link external">&raquo;&nbsp;XAMPP</a>), notez que chaque
    version de PHP a sa propre commande <a href="install.pecl.html" class="link">pecl</a>
    et fichier <var class="filename">php.ini</var>
  </p>
  
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <strong>Dépendance avec Xcode pour compiler sur macOS</strong><br />
    <p class="para">
     Compiler le driver sous macOS requiert les outils de développements Xcode, 
     qui peuvent être installé avec <code class="code">xcode-select --install</code>. Si cette
     commande n&#039;est pas disponible, vous devriez d&#039;abord installer le paquet 
     <a href="https://developer.apple.com/downloads/index.action?name=Command%20Line%20Tools" class="link external">&raquo;&nbsp;Command Line Tools</a>.
    </p>
   </p></blockquote>
   
 </div>
 
 <div class="section" id="mongo.installation.gentoo">
  <h2 class="title">Gentoo</h2>
  <p class="para">
   Gentoo a un paquet pour le driver PHP PECL nommé dev-php/pecl-mongo,
   qui peut installer via la commande suivante :
  </p>
  <div class="example-contents">
<div class="cdata"><pre>

$ sudo emerge -va dev-php/pecl-mongo

</pre></div>
   </div>

   
   <p class="para">
    Si vous utilisez PECL, vous recevrez une erreur signalant que libtool
    n&#039;est pas à la bonne version. Lors de la compilation depuis les sources,
    vous devriez avoir besoin d&#039;exécuter aclocal et autoconf.
   </p>
   <div class="example-contents">
<div class="shellcode"><pre class="shellcode">$ phpize
$ aclocal 
$ autoconf 
$ ./configure
$ make
$ sudo make install</pre>
</div>
   </div>

 </div>
 
 <div class="section" id="mongo.installation.fedora">
  <h2 class="title">Red Hat</h2>
  <p class="para">
   Ceci inclut Fedora et CentOS.
  </p>
  <p class="para">
   La configuration par défaut d&#039;Apache sur ces systèmes
   ne permet pas aux requêtes d&#039;effectuer des connexions réseaux,
   ceci signifie que le driver recevra une erreur &quot;Permission denied&quot;
   lorsqu&#039;il tentera une connexion à la base de données. Si vous
   rencontrez une telle erreur, tentez d&#039;exécuter ceci :
   <div class="example-contents">
<div class="shellcode"><pre class="shellcode">$ /usr/sbin/setsebool -P httpd_can_network_connect 1</pre>
</div>
    </div>

    Puis, redémarrez Apache (Ce comportement peut également survenir
    sous SELinux).
   </p>
 </div>

<div class="section" id="mongo.installation.thirdparty">
 <h2 class="title">Instructions d&#039;installation tierces</h2>
 
 <p class="para">
  Beaucoup de personnes ont créés d&#039;excellents tutoriels sur l&#039;installation
  du driver PHP.
 </p>
 
 <ul class="itemizedlist">
  <li class="listitem">
   <p class="para">
    <a href="http://justinhileman.info/article/reinstalling-php-on-mac-os-x/" class="link external">&raquo;&nbsp;
     (Re)installer PHP sur macOS
    </a>
   </p>
   <p class="para">
    Cet article de Justin Hileman détaille le processus d’installation de PHP 
    et ses extensions additionnelles avec Homebrew sous macOS. C&#039;est un
    complément pour les instructions de cette page sur l’installation du 
    driver avec Homebrew.
   </p>
  </li>
  <li class="listitem">
   <p class="para">
    <a href="https://www.vimeo.com/8005503" class="link external">&raquo;&nbsp;
     PHP 5.3.1 avec Xdebug, MongoDB et Lithium sous Ubuntu 9.10 / Apache 2.2
    </a>
   </p>
   <p class="para">
    Une excellent vidéo qui vous explique l&#039;installation étape par étape
    d&#039;Apache, PHP, Xdebug, MongoDB, et Lithium par Jon Adams.
   </p>
  </li>
 </ul>
</div>

</div></div></div></body></html>