<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Changement pour OpenSSL dans PHP 5.6.x</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="migration56.new-functions.html">« Nouvelles fonctions</a></li>
      <li style="float: right;"><a href="migration56.extensions.html">Autres modifications dans les extensions »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="migration56.html">Migration de PHP 5.5.x &agrave; PHP 5.6.x</a></li>
    <li>Changement pour OpenSSL dans PHP 5.6.x</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="migration56.openssl" class="sect1">
 <h2 class="title">Changement pour OpenSSL dans PHP 5.6.x</h2>

 <div class="sect2" id="migration56.openssl.peer-verification">
  <h3 class="title">Les wrappers de flux vérifient désormais les certificats d&#039;homologue et les noms d&#039;hôte par défaut lors de l&#039;utilisation de SSL/TLS</h3>

  
<p class="para">
    Tous les flux clients cryptés activent désormais la vérification par paire par défaut.
    Par défaut, ceci va utiliser le CA OpenSSL par défaut pour vérifier la paire
    de certificat. Dans la plupart des cas, aucune modification n&#039;a besoin d&#039;être faite
    pour communiquer avec des serveurs et des certificats SSL valides, sachant que les
    distributeurs configurent généralement OpenSSL pour utiliser les CA connus.
</p>

<p class="para">
    Le CA par défaut peut être écrasé sur une base globale en utilisant les
    options de configuration openssl.cafile ou openssl.capath, ou via une requête
    basique en utilisant les options de contexte
    <a href="context.ssl.html#context.ssl.cafile" class="link"><code class="parameter">cafile</code></a> ou
    <a href="context.ssl.html#context.ssl.capath" class="link"><code class="parameter">capath</code></a>.
</p>

<p class="para">
    Bien que ce ne soit pas conseillé en général, il est possible de désactiver la
    vérification de certificats par paire pour une requête en définissant l&#039;option
    de contexte <a href="context.ssl.html#context.ssl.verify-peer" class="link"><code class="parameter">verify_peer</code></a>
    à <strong><code>FALSE</code></strong>, et pour désactiver la validation du nom des paires, en configurant
    l&#039;option de contexte
    <a href="context.ssl.html#context.ssl.verify-peer-name" class="link"><code class="parameter">verify_peer_name</code></a>
    à <strong><code>FALSE</code></strong>.
</p>

 </div>

 <div class="sect2" id="migration56.openssl.fingerprint">
  <h3 class="title">Empreintes digitales de certificat</h3>

  <p class="para">
   Le support a été ajouté pour extraire et vérifier les empreintes digitales des 
   certificats. <span class="function"><a href="function.openssl-x509-fingerprint.html" class="function">openssl_x509_fingerprint()</a></span> a été ajouté pour 
   extraire une empreinte digitale d&#039;un certificat X.509 et deux 
   <a href="context.ssl.html" class="link">options de contexte</a> de flux SSL ont été 
   ajoutées: <code class="literal">capture_peer_cert</code> pour capturer le certificat X.509 
   de l&#039;homologue et <code class="literal">peer_fingerprint</code> pour certifier que le 
   certificat de l&#039;homologue doit correspondre à l&#039;empreinte digitale donnée.
  </p>
 </div>

 <div class="sect2" id="migration56.openssl.ciphers">
  <h3 class="title">Chiffrements par défaut mis à jour</h3>

  <p class="para">
   Les chiffrements par défaut utilisés par PHP ont été mis à jour vers une liste 
   plus sécurisée basée sur les 
   <a href="https://wiki.mozilla.org/Security/Server_Side_TLS#Recommended_Ciphersuite" class="link external">&raquo;&nbsp;recommandations de chiffrement de Mozilla</a>, 
   avec deux exclusions supplémentaires: chiffrements Diffie-Hellman anonymes et RC4.
  </p>

  <p class="para">
   Cette liste est accessible via la nouvelle constante 
   <strong><code>OPENSSL_DEFAULT_STREAM_CIPHERS</code></strong> et peut être remplacée 
   (comme dans les versions précédentes de PHP) en définissant l&#039;option de contexte 
   <a href="context.ssl.html#context.ssl.ciphers" class="link"><code class="parameter">chiffrements</code></a>.
  </p>
 </div>

 <div class="sect2" id="migration56.openssl.tls-compression">
  <h3 class="title">Compression désactivée par défaut</h3>

  <p class="para">
   La compression SSL/TLS a été désactivée par défaut pour atténuer l&#039;attaque CRIME. 
   PHP 5.4.13 a ajouté une option de contexte 
   <a href="context.ssl.html#context.ssl.disable-compression" class="link"><code class="parameter">disable_compression</code></a> 
   pour permettre à la compression d&#039;être désactivée: elle est maintenant définie 
   à <strong><code>TRUE</code></strong> (c&#039;est-à-dire que la compression est désactivée) par défaut.
  </p>
 </div>

 <div class="sect2" id="migration56.openssl.honor-cipher-order">
  <h3 class="title">Autoriser les serveurs à préférer leur ordre de chiffrement</h3>

  <p class="para">
   L&#039;option de contexte SSL <code class="parameter">honor_cipher_order</code> a été 
   ajoutée pour permettre aux serveurs de flux chiffrés d&#039;atténuer les 
   vulnérabilités de BEAST en préférant les chiffrements du serveur au client.
  </p>
 </div>

 <div class="sect2" id="migration56.openssl.metadata">
  <h3 class="title">Accéder au protocole négocié et au chiffrement</h3>

  <p class="para">
   Le protocole et le chiffrement qui ont été négociés pour un flux chiffré 
   peuvent désormais être accédé via <span class="function"><a href="function.stream-get-meta-data.html" class="function">stream_get_meta_data()</a></span> 
   ou <span class="function"><a href="function.stream-context-get-options.html" class="function">stream_context_get_options()</a></span> lorsque l&#039;option de 
   contexte SSL <code class="parameter">capture_session_meta</code> est définie à <strong><code>TRUE</code></strong>.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$ctx&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_context_create</span><span style="color: #007700">([</span><span style="color: #DD0000">'ssl'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'capture_session_meta'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">TRUE<br /></span><span style="color: #007700">]]);<br />&nbsp;<br /></span><span style="color: #0000BB">$html&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'https://google.com/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ctx</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$meta&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_context_get_options</span><span style="color: #007700">(</span><span style="color: #0000BB">$ctx</span><span style="color: #007700">)[</span><span style="color: #DD0000">'ssl'</span><span style="color: #007700">][</span><span style="color: #DD0000">'session_meta'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$meta</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <p class="para">L&#039;exemple ci-dessus va afficher :</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
array(4) {
  [&quot;protocol&quot;]=&gt;
  string(5) &quot;TLSv1&quot;
  [&quot;cipher_name&quot;]=&gt;
  string(20) &quot;ECDHE-RSA-AES128-SHA&quot;
  [&quot;cipher_bits&quot;]=&gt;
  int(128)
  [&quot;cipher_version&quot;]=&gt;
  string(11) &quot;TLSv1/SSLv3&quot;
}
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect2" id="migration56.openssl.forward-secrecy">
  <h3 class="title">De nouvelles options pour la confidentialité persistante sur les serveurs de flux chiffrés</h3>

  <p class="para">
   Les flux de clients chiffrés prennent déjà en charge la confidentialité persistante, 
   car il est généralement contrôlé par le serveur. Les flux de serveurs chiffrés en PHP 
   à l&#039;aide de certificats capables d&#039;une confidentialité persistante n&#039;ont pas besoin de 
   prendre d&#039;autres mesures pour activer PFS; Toutefois, un certain nombre de nouvelles 
   options de contexte SSL ont été ajoutées pour permettre un plus grand contrôle sur 
   PFS et traiter les problèmes de compatibilité qui peuvent survenir. 
  </p>

  <dl>

   
    <dt>
<code class="parameter">ecdh_curve</code></dt>

    <dd>

     <p class="para">
      Cette option permet de sélectionner une courbe spécifique à utiliser avec 
      les chiffrements ECDH. S&#039;il n&#039;est pas spécifié, <code class="literal">prime256v1</code> 
      sera utilisé.
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">dh_param</code></dt>

    <dd>

     <p class="para">
      Chemin d&#039;accès à un fichier contenant des paramètres pour l&#039;échange de 
      clés Diffie-Hellman, tel que celui créé par la commande suivante :
     </p>
     <div class="example-contents">
<div class="shellcode"><pre class="shellcode">openssl dhparam -out /path/to/my/certs/dh-2048.pem 2048</pre>
</div>
     </div>

    </dd>

   
   
    <dt>
<code class="parameter">single_dh_use</code></dt>

    <dd>

     <p class="para">
      Si définie à <strong><code>TRUE</code></strong>, une nouvelle paire de clés sera créée lors de
      l&#039;utilisation des paramètres Diffie-Hellman, améliorant ainsi 
      la confidentialité persistante.
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">single_ecdh_use</code></dt>

    <dd>

     <p class="para">
      Si définie à <strong><code>TRUE</code></strong>, une nouvelle paire de clés sera toujours générée 
      lors de la négociation des suites de chiffrement ECDH. Cela améliore 
      la confidentialité persistante.
     </p>
    </dd>

   
  </dl>

 </div>

 <div class="sect2" id="migration56.openssl.crypto-method">
  <h3 class="title">Sélection de la version SSL/TLS</h3>

  <p class="para">
   Il est désormais possible de sélectionner des versions spécifiques de SSL et 
   TLS via l&#039;option de contexte SSL <code class="parameter">crypto_method</code> ou en 
   spécifiant un transport spécifique lors de la création d&#039;un wrapper de flux 
   (par exemple, en appelant <span class="function"><a href="function.stream-socket-client.html" class="function">stream_socket_client()</a></span> ou 
   <span class="function"><strong>stream_socket_ serveur()</strong></span>).
  </p>

  <p class="para">
   L&#039;option de contexte SSL <code class="parameter">crypto_method</code> accepte un masque 
   de bits énumérant les protocoles qui sont autorisés, comme le fait le 
   <code class="parameter">crypto_type</code> de <span class="function"><a href="function.stream-socket-enable-crypto.html" class="function">stream_socket_enable_crypto()</a></span>.
   
  </p>

  <table class="segmentedlist">
   <caption><strong>Versions de protocole sélectionnées et options correspondantes</strong></caption>
   <thead><tr><th>Pprotocole(s)</th>
   <th>Drapeau client</th>
   <th>Drapeau serveur</th>
   <th>Transport</th>
   </tr></thead><tbody><tr class="seglistitem">
    <td class="seg">Toute version TLS ou SSL</td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_ANY_CLIENT</code></strong></td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_ANY_SERVER</code></strong></td>
    <td class="seg"><code class="literal">ssl://</code></td>
   </tr>
   <tr class="seglistitem">
    <td class="seg">Toute version TLS</td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_TLS_CLIENT</code></strong></td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_TLS_SERVER</code></strong></td>
    <td class="seg"><code class="literal">tls://</code></td>
   </tr>
   <tr class="seglistitem">
    <td class="seg">TLS 1.0</td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_TLSv1_0_CLIENT</code></strong></td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_TLSv1_0_SERVER</code></strong></td>
    <td class="seg"><code class="literal">tlsv1.0://</code></td>
   </tr>
   <tr class="seglistitem">
    <td class="seg">TLS 1.1</td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_TLSv1_1_CLIENT</code></strong></td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_TLSv1_1_SERVER</code></strong></td>
    <td class="seg"><code class="literal">tlsv1.1://</code></td>
   </tr>
   <tr class="seglistitem">
    <td class="seg">TLS 1.2</td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_TLSv1_2_CLIENT</code></strong></td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_TLSv1_2_SERVER</code></strong></td>
    <td class="seg"><code class="literal">tlsv1.2://</code></td>
   </tr>
   <tr class="seglistitem">
    <td class="seg">SSL 3</td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_SSLv3_CLIENT</code></strong></td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_SSLv3_SERVER</code></strong></td>
    <td class="seg"><code class="literal">sslv3://</code></td>
   </tr>
  </tbody></table>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;Nécessitant&nbsp;TLS&nbsp;1.0&nbsp;ou&nbsp;mieux&nbsp;lors&nbsp;de&nbsp;l'utilisation&nbsp;de&nbsp;file_get_contents():<br /></span><span style="color: #0000BB">$ctx&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_context_create</span><span style="color: #007700">([<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'ssl'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'crypto_method'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">STREAM_CRYPTO_METHOD_TLS_CLIENT</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;],<br />]);<br /></span><span style="color: #0000BB">$html&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'https://google.com/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ctx</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Nécessitant&nbsp;TLS&nbsp;1.1&nbsp;ou&nbsp;1.2:<br /></span><span style="color: #0000BB">$ctx&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_context_create</span><span style="color: #007700">([<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'ssl'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'crypto_method'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">STREAM_CRYPTO_METHOD_TLSv1_1_CLIENT&nbsp;</span><span style="color: #007700">|<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">STREAM_CRYPTO_METHOD_TLSv1_2_CLIENT</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;],<br />]);<br /></span><span style="color: #0000BB">$html&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'https://google.com/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ctx</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Connexion&nbsp;à&nbsp;l'aide&nbsp;du&nbsp;transport&nbsp;de&nbsp;socket&nbsp;tlsv1.2://.<br /></span><span style="color: #0000BB">$sock&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_socket_client</span><span style="color: #007700">(</span><span style="color: #DD0000">'tlsv1.2://google.com:443/'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </div>

 <div class="sect2" id="migration56.openssl.default-certificate-paths">
  <h3 class="title">Ajout de <span class="function"><a href="function.openssl-get-cert-locations.html" class="function">openssl_get_cert_locations()</a></span></h3>

  <p class="para">
   La fonction <span class="function"><a href="function.openssl-get-cert-locations.html" class="function">openssl_get_cert_locations()</a></span> a été ajoutée : 
   elle renvoie les emplacements par défaut que PHP recherchera lors de la 
   recherche de paquets CA.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">openssl_get_cert_locations</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <p class="para">L&#039;exemple ci-dessus va afficher :</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
array(8) {
  [&quot;default_cert_file&quot;]=&gt;
  string(21) &quot;/etc/pki/tls/cert.pem&quot;
  [&quot;default_cert_file_env&quot;]=&gt;
  string(13) &quot;SSL_CERT_FILE&quot;
  [&quot;default_cert_dir&quot;]=&gt;
  string(18) &quot;/etc/pki/tls/certs&quot;
  [&quot;default_cert_dir_env&quot;]=&gt;
  string(12) &quot;SSL_CERT_DIR&quot;
  [&quot;default_private_dir&quot;]=&gt;
  string(20) &quot;/etc/pki/tls/private&quot;
  [&quot;default_default_cert_area&quot;]=&gt;
  string(12) &quot;/etc/pki/tls&quot;
  [&quot;ini_cafile&quot;]=&gt;
  string(0) &quot;&quot;
  [&quot;ini_capath&quot;]=&gt;
  string(0) &quot;&quot;
}
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect2" id="migration56.openssl.spki">
  <h3 class="title">Support de SPKI</h3>

  <p class="para">
   Le support a été ajouté pour générer, extraire et vérifier les clés et les
   défis publics signés (SPKAC). <span class="function"><a href="function.openssl-spki-new.html" class="function">openssl_spki_new()</a></span>, 
   <span class="function"><a href="function.openssl-spki-verify.html" class="function">openssl_spki_verify()</a></span>, 
   <span class="function"><a href="function.openssl-spki-export-challenge.html" class="function">openssl_spki_export_challenge()</a></span> et 
   <span class="function"><a href="function.openssl-spki-export.html" class="function">openssl_spki_export()</a></span> ont été ajoutées pour créer, vérifier
   la clé publique PEM d&#039;exportation et le défi associé de SPKAC générés
   à partir d&#039;un élément HTML5 <code class="literal">KeyGen</code>.
  </p>

  <dl>

   
    <dt>
<code class="parameter">openssl_spki_new</code></dt>

    <dd>

     <p class="para">
      Génère un nouveau SPKAC en utilisant la clé privée, <a href="language.types.string.html" class="link">chaîne de caractères</a> de défi et
      l&#039;algorithme de hachage.
     </p>

     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$pkey&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">openssl_pkey_new</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">openssl_pkey_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$pkey</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'secret&nbsp;passphrase'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$spkac&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">openssl_spki_new</span><span style="color: #007700">(</span><span style="color: #0000BB">$pkey</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'challenge&nbsp;string'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

      <p class="para">L&#039;exemple ci-dessus va afficher :</p>
      <div class="example-contents screen">
<div class="cdata"><pre>
SPKAC=MIIBXjCByDCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEA3L0IfUijj7+A8CPC8EmhcdNoe5fUAog7OrBdhn7EkxFButUp40P7+LiYiygYG1TmoI/a5EgsLU3s9twEz3hmgY9mYIqb/rb+SF8qlD/K6KVyUORC7Wlz1Df4L8O3DuRGzx6/+3jIW6cPBpfgH1sVuYS1vDBsP/gMMIxwTsKJ4P0CAwEAARYkYjViMzYxMTktNjY5YS00ZDljLWEyYzctMGZjNGFhMjVlMmE2MA0GCSqGSIb3DQEBAwUAA4GBAF7hu0ifzmjonhAak2FhhBRsKFDzXdKIkrWxVNe8e0bZzMrWOxFM/rqBgeH3/gtOUDRS5Fnzyq425UsTYbjfiKzxGeCYCQJb1KJ2V5Ij/mIJHZr53WYEXHQTNMGR8RPm7IxwVXVSHIgAfXsXZ9IXNbFbcaLRiSTr9/N4U+MXUWL7
</pre></div>
      </div>
     </div>
    </dd>

   

   
    <dt>
<code class="parameter">openssl_spki_verify</code></dt>

    <dd>

     <p class="para">
      Vérifie le SPKAC fourni.
     </p>

     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$pkey&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">openssl_pkey_new</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">openssl_pkey_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$pkey</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'secret&nbsp;passphrase'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$spkac&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">openssl_spki_new</span><span style="color: #007700">(</span><span style="color: #0000BB">$pkey</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'challenge&nbsp;string'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">openssl_spki_verify</span><span style="color: #007700">(</span><span style="color: #0000BB">$spkac</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </dd>

   

   
    <dt>
<code class="parameter">openssl_spki_export_challenge</code></dt>

    <dd>

     <p class="para">
      Exportations du défi associé au SPKAC fourni.
     </p>

     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$pkey&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">openssl_pkey_new</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">openssl_pkey_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$pkey</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'secret&nbsp;passphrase'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$spkac&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">openssl_spki_new</span><span style="color: #007700">(</span><span style="color: #0000BB">$pkey</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'challenge&nbsp;string'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$challenge&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">openssl_spki_export_challenge</span><span style="color: #007700">(</span><span style="color: #0000BB">$spkac</span><span style="color: #007700">):<br />echo&nbsp;</span><span style="color: #0000BB">$challenge</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

      <p class="para">L&#039;exemple ci-dessus va afficher :</p>
      <div class="example-contents screen">
<div class="cdata"><pre>
challenge string
</pre></div>
      </div>
     </div>
    </dd>

   

   
    <dt>
<code class="parameter">openssl_spki_export</code></dt>

    <dd>

     <p class="para">
      Exporte la clé publique RSA au format PEM du SPAKC.
     </p>

     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$pkey&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">openssl_pkey_new</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">openssl_pkey_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$pkey</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'secret&nbsp;passphrase'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$spkac&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">openssl_spki_new</span><span style="color: #007700">(</span><span style="color: #0000BB">$pkey</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'challenge&nbsp;string'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">openssl_spki_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$spkac</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

      <p class="para">L&#039;exemple ci-dessus va afficher :</p>
      <div class="example-contents screen">
<div class="cdata"><pre>
-----BEGIN PUBLIC KEY-----
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDcvQh9SKOPv4DwI8LwSaFx02h7
l9QCiDs6sF2GfsSTEUG61SnjQ/v4uJiLKBgbVOagj9rkSCwtTez23ATPeGaBj2Zg
ipv+tv5IXyqUP8ropXJQ5ELtbXPUN/gvw7cO5EbPHr/7eMhbpw8Gl+AfWxW5hLW8
MGw/+AwwjHBOwong/QIDAQAB
-----END PUBLIC KEY-----
</pre></div>
      </div>
     </div>
    </dd>

   
  </dl>

 </div>
</div></div></div></body></html>