<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Envoie un en-t&ecirc;te HTTP brut</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.header-remove.html">« header_remove</a></li>
      <li style="float: right;"><a href="function.headers-list.html">headers_list »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.network.html">Fonctions r&eacute;seaux</a></li>
    <li>Envoie un en-t&ecirc;te HTTP brut</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.header" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">header</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">header</span> &mdash; <span class="dc-title">Envoie un en-tête HTTP brut</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.header-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>header</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$header</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$replace</code><span class="initializer"> = <strong><code>TRUE</code></strong></span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$http_response_code</code></span>
  ]] ) : <span class="type"><span class="type void">void</span></span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>header()</strong></span> permet de spécifier l&#039;en-tête <acronym title="Hypertext Transfer Protocol">HTTP</acronym>
   <code class="parameter">string</code> lors de l&#039;envoi des fichiers HTML.
   Reportez-vous à <a href="http://www.faqs.org/rfcs/rfc2616" class="link external">&raquo;&nbsp;<code class="literal">HTTP/1.1
     Specification</code></a> pour plus d&#039;informations sur les en-têtes
   <acronym title="Hypertext Transfer Protocol">HTTP</acronym>.
  </p>
  <p class="para">
   N&#039;oubliez jamais que <span class="function"><strong>header()</strong></span> doit être appelée
   avant que le moindre contenu ne soit envoyé, soit par des
   lignes HTML habituelles dans le fichier, soit par des affichages
   PHP. Une erreur très classique est de lire un fichier avec
   <span class="function"><a href="function.include.html" class="function">include</a></span> ou
   <span class="function"><a href="function.require.html" class="function">require</a></span>,
   et de laisser des espaces ou des lignes vides, qui produiront
   un affichage avant que la fonction <span class="function"><strong>header()</strong></span>
   ne soit appelée. Le même problème existe avec les fichiers
   PHP/HTML standards.
   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
&lt;html&gt;<br /><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;Ceci&nbsp;produira&nbsp;une&nbsp;erreur.&nbsp;Notez&nbsp;la&nbsp;sortie&nbsp;ci-dessus,<br />&nbsp;*&nbsp;qui&nbsp;se&nbsp;trouve&nbsp;avant&nbsp;l'appel&nbsp;à&nbsp;la&nbsp;fonction&nbsp;header()&nbsp;*/<br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Location:&nbsp;http://www.example.com/'</span><span style="color: #007700">);<br />exit;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.header-parameters">
  <h3 class="title">Liste de paramètres</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">header</code></dt>

     <dd>

      <p class="para">
       L&#039;en-tête.
      </p>
      <p class="para">
       Il y a deux en-têtes spéciaux. Le premier commence par la chaîne
       &quot;<code class="literal">HTTP/</code>&quot; (insensible à la casse), qui est utilisée
       pour signifier le statut HTTP à envoyer. Par exemple, si vous avez configuré
       Apache pour utiliser les scripts PHP pour gérer les requêtes vers des fichiers
       inexistants (en utilisant la directive <code class="literal">ErrorDocument</code>),
       assurez-vous que le script génère un code statut correct.
      </p>
      <p class="para">
       <div class="informalexample">
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />header</span><span style="color: #007700">(</span><span style="color: #DD0000">"HTTP/1.0&nbsp;404&nbsp;Not&nbsp;Found"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

       </div>
      </p>
      <p class="para">
       Le deuxième type d&#039;appel spécial est <code class="literal">&quot;Location:&quot;</code>.
       Non seulement il renvoie un en-tête au  client, mais, en plus, il
       envoie un statut <code class="literal">REDIRECT</code> (302) au navigateur
       tant qu&#039;un code statut <code class="literal">201</code> ou <code class="literal">3xx</code>
       n&#039;a pas été envoyé.
      </p>
      <p class="para">
       <div class="informalexample">
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Location:&nbsp;http://www.example.com/"</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">/*&nbsp;Redirection&nbsp;du&nbsp;navigateur&nbsp;*/<br /><br />/*&nbsp;Assurez-vous&nbsp;que&nbsp;la&nbsp;suite&nbsp;du&nbsp;code&nbsp;ne&nbsp;soit&nbsp;pas&nbsp;exécutée&nbsp;une&nbsp;fois&nbsp;la&nbsp;redirection&nbsp;effectuée.&nbsp;*/<br /></span><span style="color: #007700">exit;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

       </div>
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">replace</code></dt>

     <dd>

      <p class="para">
       Le paramètre optionnel <code class="parameter">replace</code> indique
       si la fonction <span class="function"><strong>header()</strong></span> doit remplacer
       un en-tête précédemment émis, ou bien ajouter un autre en-tête
       du même type. Par défaut, un nouvel en-tête va écraser le
       précédent, mais si vous passez <strong><code>FALSE</code></strong> dans cet argument, vous pouvez
       forcer les en-têtes multiples pour un même type d&#039;en-tête.
       Par exemple :
      </p>
      <p class="para">
       <div class="informalexample">
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />header</span><span style="color: #007700">(</span><span style="color: #DD0000">'WWW-Authenticate:&nbsp;Negotiate'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'WWW-Authenticate:&nbsp;NTLM'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

       </div>
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">http_response_code</code></dt>

     <dd>

      <p class="para">
       Force le code réponse HTTP à la valeur spécifiée. À noter que ce
       paramètre a un effet uniquement si <code class="parameter">header</code>
       n&#039;est pas vide.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.header-returnvalues">
  <h3 class="title">Valeurs de retour</h3>
  <p class="para">
   Aucune valeur n&#039;est retournée.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.header-examples">
  <h3 class="title">Exemples</h3>
  <p class="para">
   <div class="example" id="example-5107">
    <p><strong>Exemple #1 Boîte de téléchargement</strong></p>
    <div class="example-contents"><p>
     Si vous voulez que vos utilisateurs recoivent une alerte pour sauver
     les fichiers générés, comme si vous génériez un
     fichier PDF, vous pouvez utiliser l&#039;en-tête
     <a href="http://www.faqs.org/rfcs/rfc2183" class="link external">&raquo;&nbsp;Content-Disposition</a> pour
     fournir un nom de fichier par défaut, à afficher dans le
     dialogue de sauvegarde.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Vous&nbsp;voulez&nbsp;afficher&nbsp;un&nbsp;pdf<br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-Type:&nbsp;application/pdf'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Il&nbsp;sera&nbsp;nommé&nbsp;downloaded.pdf<br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-Disposition:&nbsp;attachment;&nbsp;filename="downloaded.pdf"'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Le&nbsp;source&nbsp;du&nbsp;PDF&nbsp;original.pdf<br /></span><span style="color: #0000BB">readfile</span><span style="color: #007700">(</span><span style="color: #DD0000">'original.pdf'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5108">
    <p><strong>Exemple #2 Directives concernant la mise en cache</strong></p>
    <div class="example-contents"><p>
     Les scripts PHP génèrent souvent du HTML dynamiquement,
     qui ne doit pas être mis en cache, ni par le client, ni par les
     proxy intermédiaires. On peut forcer la désactivation du
     cache de nombreux clients et proxy avec :
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Cache-Control:&nbsp;no-cache,&nbsp;must-revalidate"</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;HTTP/1.1<br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Expires:&nbsp;Sat,&nbsp;26&nbsp;Jul&nbsp;1997&nbsp;05:00:00&nbsp;GMT"</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;Date&nbsp;dans&nbsp;le&nbsp;passé<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <p class="para">
       Vous pouvez vous rendre compte que vos pages ne sont jamais mises
       en cache même si vous utilisez tous les en-têtes ci-dessus.
       Il existe toute une collection de paramètres que les utilisateurs
       peuvent modifier sur leur navigateur pour modifier le
       comportement par défaut du cache. En envoyant les en-têtes
       ci-dessus, vous pouvez imposer vos propres valeurs.
      </p>
      <p class="para">
       De plus, les paramètres <span class="function"><a href="function.session-cache-limiter.html" class="function">session_cache_limiter()</a></span> et
       <code class="literal">session.cache_limiter</code> peuvent être utilisés pour
       générer les en-têtes de caches corrects, lorsque les sessions sont
       utilisées.
      </p>
     </p></blockquote>
    </p></div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.header-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
 <p class="para">
  Les en-têtes ne seront accessibles et s&#039;afficheront que lorsqu&#039;un SAPI qui les supporte sera utilisé.
 </p>
</p></blockquote>

  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    Vous pouvez utiliser le système de cache (output buffering)
    pour contourner ce problème. Tous vos textes générés seront
    mis en buffer sur le serveur jusqu&#039;à ce que vous les envoyiez. Vous pouvez
    utiliser les fonctions <span class="function"><a href="function.ob-start.html" class="function">ob_start()</a></span> et
    <span class="function"><a href="function.ob-end-flush.html" class="function">ob_end_flush()</a></span> dans vos scripts, ou en
    modifiant la directive de configuration <code class="literal">output_buffering</code>
    dans votre fichier <var class="filename">php.ini</var> ou vos fichiers
    de configuration du serveur.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    Le code statut HTTP doit toujours être le premier à être envoyé au client,
    au regard de l&#039;actuel <span class="function"><strong>header()</strong></span> qui peut être le premier
    ou non. Le statut peut être écrasé en appelant <span class="function"><strong>header()</strong></span>
    avec un nouveau statut à n&#039;importe quel moment même si l&#039;en-tête HTTP a
    déjà été envoyé.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    Il y a un bogue sous Microsoft Internet Explorer 4.01 qui empêche
    cet en-tête de fonctionner. Il n&#039;y a pas d&#039;autre solution.
    Il y a aussi un bogue dans Microsoft Internet Explorer 5.5 qui
    interfère avec ceci, mais qui peut être résolu en utilisant
    le Service Pack 2 ou plus récent.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    Si <a href="ini.sect.safe-mode.html#ini.safe-mode" class="link">safe mode</a> est activé,
    l&#039;UID du script est ajouté à la partie <code class="literal">realm</code>
    des en-têtes <code class="literal">WWW-Authenticate</code> que vous envoyez
    avec cet en-tête.
   </span>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    La plupart des clients moderne accepte des <acronym title="Uniform Resource Identifier">URI</acronym>s relative comme argument de
    <a href="http://tools.ietf.org/html/rfc7231#section-7.1.2" class="link external">&raquo;&nbsp;Location:</a>,
    mais certains client plus ancien exigent une URI absolue
    y compris le protocole, l&#039;hôte et le chemin absolu. Vous pouvez généralement
    utiliser les variables globales <var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER['HTTP_HOST']</a></var>,
    <var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER['PHP_SELF']</a></var> et <span class="function"><a href="function.dirname.html" class="function">dirname()</a></span> pour
    construire vous-même une URI absolue :
    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;Redirection&nbsp;vers&nbsp;une&nbsp;page&nbsp;différente&nbsp;du&nbsp;même&nbsp;dossier&nbsp;*/<br /></span><span style="color: #0000BB">$host&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'HTTP_HOST'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">$uri&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">rtrim</span><span style="color: #007700">(</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'PHP_SELF'</span><span style="color: #007700">]),&nbsp;</span><span style="color: #DD0000">'/\\'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$extra&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'mypage.php'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Location:&nbsp;http://</span><span style="color: #0000BB">$host$uri</span><span style="color: #DD0000">/</span><span style="color: #0000BB">$extra</span><span style="color: #DD0000">"</span><span style="color: #007700">);<br />exit;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    L&#039;ID de session n&#039;est pas passé avec l&#039;en-tête Location même si
    <a href="session.configuration.html#ini.session.use-trans-sid" class="link">session.use_trans_sid</a>
    est activé. Il doit être passé manuellement en utilisant la constante
    <strong><code>SID</code></strong>.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.header-seealso">
  <h3 class="title">Voir aussi</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.headers-sent.html" class="function" rel="rdfs-seeAlso">headers_sent()</a> - Indique si les en-t&ecirc;tes HTTP ont d&eacute;j&agrave; &eacute;t&eacute; envoy&eacute;s</span></li>
    <li class="member"><span class="function"><a href="function.setcookie.html" class="function" rel="rdfs-seeAlso">setcookie()</a> - Envoie un cookie</span></li>
    <li class="member"><span class="function"><a href="function.http-response-code.html" class="function" rel="rdfs-seeAlso">http_response_code()</a> - R&eacute;cup&egrave;re ou d&eacute;finit le code de r&eacute;ponse HTTP</span></li>
    <li class="member"><span class="function"><a href="function.header-remove.html" class="function" rel="rdfs-seeAlso">header_remove()</a> - Supprime un en-t&ecirc;te HTTP</span></li>
    <li class="member">
     La section sur l&#039;<a href="features.http-auth.html" class="link">identification
      HTTP</a>
    </li>
   </ul>
  </p>
 </div>


</div></div></div></body></html>