<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Changements dans les classes et objets</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="migration51.integer-parameters.html">« Valeurs enti&egrave;res dans les param&egrave;tres de fonction</a></li>
      <li style="float: right;"><a href="migration51.extensions.html">Extensions »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="migration51.html">Migration de PHP 5.0.x &agrave; PHP 5.1.x</a></li>
    <li>Changements dans les classes et objets</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="migration51.oop" class="section">
  <h2 class="title">Changements dans les classes et objets</h2>
  <ul class="itemizedlist">
   <li class="listitem">
    <p class="para">
     <a href="migration51.oop.html#migration51.oop-functions" class="link"><code class="literal">instanceof</code>,
      <code class="literal">is_a()</code>, <code class="literal">is_subclass_of()</code> et
      <code class="literal">catch</code></a>
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <a href="migration51.oop.html#migration51.oop-methods" class="link">Méthodes privées abstraites</a>
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <a href="migration51.oop.html#migration51.oop-modifiers" class="link">Options d&#039;accès dans les interfaces</a>
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <a href="migration51.oop.html#migration51.oop-inheritance" class="link">Changements dans les règles d&#039;héritage</a>
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <a href="migration51.oop.html#migration51.oop-constants" class="link">Constantes de classe</a>
    </p>
   </li>
  </ul>

  <div class="section" id="migration51.oop-functions">
   <h2 class="title"><code class="literal">instanceof</code>, <code class="literal">is_a()</code>,
    <code class="literal">is_subclass_of()</code> et <code class="literal">catch</code></h2>
   <p class="para">
    En PHP 5.0, <code class="literal">is_a()</code> a été rendu abandonné et remplacé
    par l&#039;opérateur <code class="literal">instanceof</code>. Il y a eu des problèmes
    dans les premières implantations
    de <code class="literal">instanceof</code>, qui se base sur <code class="literal">__autoload()</code>
    pour rechercher les classes non définies. Si la classe n&#039;est pas définie,
    <code class="literal">instanceof</code> émettait une erreur fatale
    <strong><code>E_ERROR</code></strong>, après l&#039;échec de <code class="literal">__autoload()</code>.
    Le même comportement apparaissait avec l&#039;opérateur <code class="literal">catch</code>
    et la fonction <code class="literal">is_subclass_of()</code>.
   </p>
   <p class="para">
    Aucune de ces instructions n&#039;appelle plus <code class="literal">__autoload()</code>
    en PHP 5.1.x, et les palliatifs à base de <code class="literal">class_exists()</code>
    utilisé dans le code écrit en PHP 5.0.x ne sont plus nécessaires.
   </p>
  </div>

  <div class="section" id="migration51.oop-methods">
   <h2 class="title">Méthodes privées abstraites</h2>
   <p class="para">
    Les méthodes privées abstraites sont supportées en PHP entre 5.0.0 et
    et 5.0.4, mais elles ont été abandonnées car <code class="literal">private</code>
    et <code class="literal">abstract</code> sont mutuellement exclusif.
   </p>
  </div>

  <div class="section" id="migration51.oop-modifiers">
   <h2 class="title">Changements dans les règles d&#039;héritage</h2>
   <p class="para">
    Avec PHP 5.0, les déclarations de fonctions dans les interfaces sont
    traitées exactement de la même manière que pour les déclarations de
    fonctions dans les classes. Ce n&#039;est plus le cas depuis octobre 2004,
    au moment où seuls l&#039;option d&#039;accès <code class="literal">public</code> a été
    autorisée dans les déclarations d&#039;interface. Depuis avril 2005, ce qui
    est antérieur à PHP 5.0b1, l&#039;option <code class="literal">static</code> a aussi
    été autorisée. Mais les options <code class="literal">protected</code>
    and <code class="literal">private</code> émettent désormais une erreur
    <strong><code>E_ERROR</code></strong>, tout comme <code class="literal">abstract</code>.
    Notez que cette modification ne va pas affecter votre code existant,
    car aucune de ces options n&#039;a de sens dans le cadre d&#039;une interface.
   </p>
  </div>

  <div class="section" id="migration51.oop-inheritance">
   <h2 class="title">Changements dans les règles d&#039;héritages</h2>
   <p class="para">
    En PHP 5.0, il était possible d&#039;avoir une déclaration de fonction qui
    dérivait d&#039;une classe ayant la même fonction mais pas la même signature.
    Par exemple :
   </p>
   <div class="informalexample">
    <p class="para">
     Ce code va émettre une erreur <strong><code>E_STRICT</code></strong> si utilisé
     avec PHP 5.1.x.
    </p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">Base&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;&amp;</span><span style="color: #0000BB">return_by_ref</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$r&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$r</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br />class&nbsp;</span><span style="color: #0000BB">Derived&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Base&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">return_by_ref</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </div>

  <div class="section" id="migration51.oop-constants">
   <h2 class="title">Constantes de classe</h2>
   <p class="para">
    En PHP 5.0.x, le code suivant était valide :
   </p>
   <div class="informalexample">
    <p class="para">
     En PHP 5.1.x, la redéfinition d&#039;une constante de classe émet une
     erreur fatale <strong><code>E_ERROR</code></strong>.
    </p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">test&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;</span><span style="color: #0000BB">foobar&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;</span><span style="color: #0000BB">foobar&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'bar'</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </div>
 </div></div></div></body></html>