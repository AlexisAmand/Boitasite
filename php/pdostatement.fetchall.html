<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Retourne un tableau contenant toutes les lignes du jeu d'enregistrements</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="pdostatement.fetch.html">« PDOStatement::fetch</a></li>
      <li style="float: right;"><a href="pdostatement.fetchcolumn.html">PDOStatement::fetchColumn »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.pdostatement.html">PDOStatement</a></li>
    <li>Retourne un tableau contenant toutes les lignes du jeu d'enregistrements</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="pdostatement.fetchall" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">PDOStatement::fetchAll</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.1.0, PHP 7, PECL pdo &gt;= 0.1.0)</p><p class="refpurpose"><span class="refname">PDOStatement::fetchAll</span> &mdash; <span class="dc-title">
   Retourne un tableau contenant toutes les lignes du jeu d&#039;enregistrements
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-pdostatement.fetchall-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>PDOStatement::fetchAll</strong></span>
    ([ <span class="methodparam"><span class="type">int</span> <code class="parameter">$fetch_style</code></span>
   [, <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$fetch_argument</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$ctor_args</code><span class="initializer"> = array()</span></span>
  ]]] ) : <span class="type">array</span></div>


 </div>


 <div class="refsect1 parameters" id="refsect1-pdostatement.fetchall-parameters">
  <h3 class="title">Liste de paramètres</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">fetch_style</code></dt>

     <dd>

      <p class="para">
       Contrôle le contenu du tableau retourné comme documenté dans la fonction
       <span class="function"><a href="pdostatement.fetch.html" class="function">PDOStatement::fetch()</a></span>.
       Valeur par défaut : <strong><code>PDO::ATTR_DEFAULT_FETCH_MODE</code></strong>
       (qui prend sa valeur par défaut de <strong><code>PDO::FETCH_BOTH</code></strong>).
      </p>
      <p class="para">
       Pour retourner un tableau contenant toutes les valeurs d&#039;une seule colonne
       depuis le jeu de résultats, spécifiez <strong><code>PDO::FETCH_COLUMN</code></strong>.
       Vous pouvez spécifier quelle colonne vous voulez avec le paramètre
       <code class="parameter">fetch_argument</code>.
      </p>
      <p class="para">
       Pour récupérer uniquement les valeurs uniques d&#039;une seule colonne depuis
       le jeu de résultats, utilisez <strong><code>PDO::FETCH_COLUMN</code></strong> avec
       <strong><code>PDO::FETCH_UNIQUE</code></strong>.
      </p>
      <p class="para">
       Pour retourner un tableau associatif groupé par les valeurs d&#039;une
       colonne spécifique, utilisez <strong><code>PDO::FETCH_COLUMN</code></strong> avec
       <strong><code>PDO::FETCH_GROUP</code></strong>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">fetch_argument</code></dt>

     <dd>

      <p class="para">
       Cet argument prend une valeur différente en fonction de la valeur de
       l&#039;argument <code class="parameter">fetch_style</code>:
       <ul class="itemizedlist">
        <li class="listitem">
         <p class="para">
          <strong><code>PDO::FETCH_COLUMN</code></strong>: Retourne le numéro de la colonne
          demandée (indexée à partir de 0).
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <strong><code>PDO::FETCH_CLASS</code></strong>: Retourne une instance de la classe désirée.
          Les colonnes sélectionnées sont liées aux attributs de la classe.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <strong><code>PDO::FETCH_FUNC</code></strong>: Retourne la valeur de retour de la fonction
          de rappel précisée.
         </p>
        </li>
       </ul>
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">ctor_args</code></dt>

     <dd>

      <p class="para">
       Arguments du constructeur personnalisé de la classe lorsque l&#039;argument <code class="parameter">fetch_style</code> 
       est à <strong><code>PDO::FETCH_CLASS</code></strong>.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-pdostatement.fetchall-returnvalues">
  <h3 class="title">Valeurs de retour</h3>
  <p class="para">
   <span class="function"><strong>PDOStatement::fetchAll()</strong></span> retourne un tableau contenant
   toutes les lignes du jeu d&#039;enregistrements. Le tableau représente chaque ligne
   comme soit un tableau de valeurs des colonnes, soit un objet avec des propriétés
   correspondant à chaque nom de colonne.
  </p>
  <p class="para">
   L&#039;utilisation de cette méthode pour récupérer de gros jeux de résultats
   peut augmenter les ressources du système, mais également ces ressources.
   Plutôt que de récupérer toutes les données et de les manipuler avec PHP,
   utilisez le serveur de base de données pour manipuler les jeux de résultats.
   Par exemple, utilisez les clauses <code class="literal">WHERE</code> et 
   <code class="literal">ORDER BY</code> dans vos requêtes SQL pour restreindre les résultats
   avant de les récupérer et de les traiter avec PHP.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-pdostatement.fetchall-examples">
  <h3 class="title">Exemples</h3>
  <p class="para">
   <div class="example" id="example-1040">
    <p><strong>Exemple #1 Récupération de toutes les lignes d&#039;un jeu de résultats</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$sth&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;nom,&nbsp;couleur&nbsp;FROM&nbsp;fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">/*&nbsp;Récupération&nbsp;de&nbsp;toutes&nbsp;les&nbsp;lignes&nbsp;d'un&nbsp;jeu&nbsp;de&nbsp;résultats&nbsp;*/<br /></span><span style="color: #007700">print(</span><span style="color: #DD0000">"Récupération&nbsp;de&nbsp;toutes&nbsp;les&nbsp;lignes&nbsp;d'un&nbsp;jeu&nbsp;de&nbsp;résultats&nbsp;:\n"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher quelque chose de similaire à :</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Récupération de toutes les lignes d&#039;un jeu de résultats :
Array
(
    [0] =&gt; Array
        (
            [nom] =&gt; apple
            [0] =&gt; apple
            [couleur] =&gt; red
            [1] =&gt; red
        )

    [1] =&gt; Array
        (
            [nom] =&gt; pear
            [0] =&gt; pear
            [couleur] =&gt; green
            [1] =&gt; green
        )

    [2] =&gt; Array
        (
            [nom] =&gt; watermelon
            [0] =&gt; watermelon
            [couleur] =&gt; pink
            [1] =&gt; pink
        )

)
</pre></div>
    </div>
   </div>
   <div class="example" id="example-1041">
    <p><strong>Exemple #2 Récupération de toutes les valeurs d&#039;une seule colonne depuis un jeu de résultats</strong></p>
    <div class="example-contents"><p>
     L&#039;exemple suivant montre comment retourner toutes les valeurs
     d&#039;une seule colonne depuis un jeu de résultats, même si la requête SQL
     retourne plusieurs colonnes par lignes.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$sth&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;name,&nbsp;colour&nbsp;FROM&nbsp;fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">/*&nbsp;Récupération&nbsp;de&nbsp;toutes&nbsp;les&nbsp;valeurs&nbsp;de&nbsp;la&nbsp;première&nbsp;colonne&nbsp;*/<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_COLUMN</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher quelque chose de similaire à :</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array(3)
(
    [0] =&gt;
    string(5) =&gt; apple
    [1] =&gt;
    string(4) =&gt; pear
    [2] =&gt;
    string(10) =&gt; watermelon
)
</pre></div>
    </div>
   </div>
   <div class="example" id="example-1042">
    <p><strong>Exemple #3 Grouper toutes les valeurs d&#039;une seule colonne</strong></p>
    <div class="example-contents"><p>
     L&#039;exemple suivant montre comment retourner un tableau associatif
     groupé par les valeurs de la colonne spécifiée d&#039;un jeu de résultats.
     Le tableau contient trois clés : les valeurs <code class="literal">apple</code>
     et <code class="literal">pear</code> sont retournées sous la forme de tableaux
     qui contiennent deux couleurs différentes, tandis que
     <code class="literal">watermelon</code> est retourné sous la forme d&#039;un tableau
     qui contient uniquement une seule couleur.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$insert&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;fruit(name,&nbsp;colour)&nbsp;VALUES&nbsp;(?,&nbsp;?)"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$insert</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'apple'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'green'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$insert</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'pear'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'yellow'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$sth&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;name,&nbsp;colour&nbsp;FROM&nbsp;fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">/*&nbsp;Grouper&nbsp;les&nbsp;valeurs&nbsp;de&nbsp;la&nbsp;première&nbsp;colonne&nbsp;*/<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_COLUMN</span><span style="color: #007700">|</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_GROUP</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher quelque chose de similaire à :</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(3) {
  [&quot;apple&quot;]=&gt;
    array(2) {
      [0]=&gt;
        string(5) &quot;green&quot;
      [1]=&gt;
        string(3) &quot;red&quot;
    }
  [&quot;pear&quot;]=&gt;
    array(2) {
      [0]=&gt;
        string(5) &quot;green&quot;
      [1]=&gt;
        string(6) &quot;yellow&quot;
    }
  [&quot;watermelon&quot;]=&gt;
    array(1) {
      [0]=&gt;
        string(5) &quot;pink&quot;
    }
}

</pre></div>
    </div>
   </div>
   <div class="example" id="example-1043"><p><strong>Exemple #4 Instancier une classe pour chaque résultat</strong></p>
    <div class="example-contents"><p>
     L&#039;exemple suivant montre le comportement de
     <strong><code>PDO::FETCH_CLASS</code></strong>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">fruit&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$colour</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$sth&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;name,&nbsp;colour&nbsp;FROM&nbsp;fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_CLASS</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher quelque chose de similaire à :</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(3) {
  [0]=&gt;
  object(fruit)#1 (2) {
    [&quot;name&quot;]=&gt;
    string(5) &quot;apple&quot;
    [&quot;colour&quot;]=&gt;
    string(5) &quot;green&quot;
  }
  [1]=&gt;
  object(fruit)#2 (2) {
    [&quot;name&quot;]=&gt;
    string(4) &quot;pear&quot;
    [&quot;colour&quot;]=&gt;
    string(6) &quot;yellow&quot;
  }
  [2]=&gt;
  object(fruit)#3 (2) {
    [&quot;name&quot;]=&gt;
    string(10) &quot;watermelon&quot;
    [&quot;colour&quot;]=&gt;
    string(4) &quot;pink&quot;
  }
  [3]=&gt;
  object(fruit)#4 (2) {
    [&quot;name&quot;]=&gt;
    string(5) &quot;apple&quot;
    [&quot;colour&quot;]=&gt;
    string(3) &quot;red&quot;
  }
  [4]=&gt;
  object(fruit)#5 (2) {
    [&quot;name&quot;]=&gt;
    string(4) &quot;pear&quot;
    [&quot;colour&quot;]=&gt;
    string(5) &quot;green&quot;
  }
}
</pre></div>
    </div>
   </div>
   <div class="example" id="example-1044"><p><strong>Exemple #5 Appel d&#039;une fonction pour chaque résultat</strong></p>
    <div class="example-contents"><p>
     L&#039;exemple suivant montre le comportement de
     <strong><code>PDO::FETCH_FUNC</code></strong>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">fruit</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$colour</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #007700">{</span><span style="color: #0000BB">$name</span><span style="color: #007700">}</span><span style="color: #DD0000">:&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$colour</span><span style="color: #007700">}</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$sth&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;name,&nbsp;colour&nbsp;FROM&nbsp;fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_FUNC</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher quelque chose de similaire à :</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(3) {
  [0]=&gt;
  string(12) &quot;apple: green&quot;
  [1]=&gt;
  string(12) &quot;pear: yellow&quot;
  [2]=&gt;
  string(16) &quot;watermelon: pink&quot;
  [3]=&gt;
  string(10) &quot;apple: red&quot;
  [4]=&gt;
  string(11) &quot;pear: green&quot;
}
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-pdostatement.fetchall-seealso">
  <h3 class="title">Voir aussi</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="pdo.query.html" class="function" rel="rdfs-seeAlso">PDO::query()</a> - Ex&eacute;cute une requ&ecirc;te SQL, retourne un jeu de r&eacute;sultats en tant 
   qu'objet PDOStatement</span></li>
    <li class="member"><span class="function"><a href="pdostatement.fetch.html" class="function" rel="rdfs-seeAlso">PDOStatement::fetch()</a> - R&eacute;cup&egrave;re la ligne suivante d'un jeu de r&eacute;sultats PDO</span></li>
    <li class="member"><span class="function"><a href="pdostatement.fetchcolumn.html" class="function" rel="rdfs-seeAlso">PDOStatement::fetchColumn()</a> - Retourne une colonne depuis la ligne suivante d'un jeu de r&eacute;sultats</span></li>
    <li class="member"><span class="function"><a href="pdo.prepare.html" class="function" rel="rdfs-seeAlso">PDO::prepare()</a> - Pr&eacute;pare une requ&ecirc;te &agrave; l'ex&eacute;cution et retourne un objet</span></li>
    <li class="member"><span class="function"><a href="pdostatement.setfetchmode.html" class="function" rel="rdfs-seeAlso">PDOStatement::setFetchMode()</a> - D&eacute;finit le mode de r&eacute;cup&eacute;ration par d&eacute;faut pour cette requ&ecirc;te</span></li>
   </ul>
  </p>
 </div>

</div></div></div></body></html>