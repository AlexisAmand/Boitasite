<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>R&eacute;pare et compacte une base de donn&eacute;es</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="mongodb.preverror.html">« MongoDB::prevError</a></li>
      <li style="float: right;"><a href="mongodb.reseterror.html">MongoDB::resetError »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.mongodb.html">MongoDB</a></li>
    <li>R&eacute;pare et compacte une base de donn&eacute;es</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mongodb.repair" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">MongoDB::repair</h1>
  <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoDB::repair</span> &mdash; <span class="dc-title">Répare et compacte une base de données</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-mongodb.repair-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>MongoDB::repair</strong></span>
    ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$preserve_cloned_files</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$backup_original_files</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
  ]] ) : <span class="type">array</span></div>

  <p class="para rdfs-comment">
   Cette méthode crée une copie de toutes les données de la base
   de données. Elle supprime toutes les données corrompues, compacte
   et optimise les espaces libres trouvés. Ces opérations sont très lentes
   sur de grosses bases de données.
  </p>
  <p class="para">
   Cette méthode est habituellement appelée depuis le shell ou depuis
   la ligne de commande, et non via le driver.
  </p>
  <p class="para">  
   C&#039;est un équivalent à la fonction :
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">repair</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">command</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'repairDatabase'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-mongodb.repair-parameters">
  <h3 class="title">Liste de paramètres</h3>    
  <p class="para">
   <dl>

    
     <dt>

      <code class="parameter">preserve_cloned_files</code>
     </dt>

     <dd>

      <p class="para">
       Indique les fichiers clonés doivent être conservé,
       en cas d&#039;échec de la réparation.
      </p>
     </dd>

       
    
     <dt>

      <code class="parameter">backup_original_files</code>
     </dt>

     <dd>

      <p class="para">
       Indique si les fichiers originaux doivent être sauvegardés.
      </p>
     </dd>

       
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-mongodb.repair-returnvalues">
  <h3 class="title">Valeurs de retour</h3>  
  <p class="para">
   Retourne la réponse de la base de données.
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-mongodb.repair-seealso">
  <h3 class="title">Voir aussi</h3>
  <p class="para">
   La documentation principale MongoDB sur
   <a href="https://docs.mongodb.com/manual/reference/command/repairDatabase" class="link external">&raquo;&nbsp;la réparation</a>.
  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-mongodb.repair-examples">
  <h3 class="title">Exemples</h3>
  <div class="example" id="example-1531">
   <p><strong>Exemple #1 Exemple pour <span class="function"><strong>MongoDB::repair()</strong></span></strong></p>
   <div class="example-contents"><p>Cet exemple montre comment réparer et comprimer une base de données.</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mongo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">repair</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$response</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>L&#039;exemple ci-dessus va afficher quelque chose de similaire à :</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [ok] =&gt; 1
)
</pre></div>
   </div>
  </div>  
 </div>

</div></div></div></body></html>