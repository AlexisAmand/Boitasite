<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Identification en utilisant une cl&eacute; publique</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.ssh2-auth-password.html">« ssh2_auth_password</a></li>
      <li style="float: right;"><a href="function.ssh2-connect.html">ssh2_connect »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.ssh2.html">Fonctions Shell2</a></li>
    <li>Identification en utilisant une cl&eacute; publique</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.ssh2-auth-pubkey-file" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ssh2_auth_pubkey_file</h1>
  <p class="verinfo">(PECL ssh2 &gt;= 0.9.0)</p><p class="refpurpose"><span class="refname">ssh2_auth_pubkey_file</span> &mdash; <span class="dc-title">Identification en utilisant une clé publique</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.ssh2-auth-pubkey-file-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>ssh2_auth_pubkey_file</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$session</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$username</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$pubkeyfile</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$privkeyfile</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$passphrase</code></span>
  ] ) : <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   Identification en utilisant une clé publique, lue depuis un fichier.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.ssh2-auth-pubkey-file-parameters">
  <h3 class="title">Liste de paramètres</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">session</code></dt>

     <dd>

      <p class="para">
       Un identifiant de connexion SSH, obtenu depuis la fonction
       <span class="function"><a href="function.ssh2-connect.html" class="function">ssh2_connect()</a></span>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">username</code></dt>

     <dd>

      <p class="para">
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">pubkeyfile</code></dt>

     <dd>

      <p class="para">
       Le fichier contenant la clé publique doit être au format
       OpenSSH. Il doit ressembler à ceci :
      </p>
      <p class="para">
       ssh-rsa AAAAB3NzaC1yc2EAAA....NX6sqSnHA8= rsa-key-20121110
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">privkeyfile</code></dt>

     <dd>

      <p class="para">
         La clé privée doit être au format PEM
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">passphrase</code></dt>

     <dd>

      <p class="para">
       Si <code class="parameter">privkeyfile</code> est chiffré (et doit l&#039;être),
       la passe-phrase doit être fournie.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.ssh2-auth-pubkey-file-returnvalues">
  <h3 class="title">Valeurs de retour</h3>
  <p class="para">
   Cette fonction retourne <strong><code>TRUE</code></strong> en cas de succès ou <strong><code>FALSE</code></strong> si une erreur survient.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.ssh2-auth-pubkey-file-examples">
  <h3 class="title">Exemples</h3>
  <p class="para">
   <div class="example" id="example-5190">
    <p><strong>Exemple #1 Identification en utilisant une clé publique</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$connection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ssh2_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'shell.example.com'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">22</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'hostkey'</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">'ssh-rsa'</span><span style="color: #007700">));<br /><br />if&nbsp;(</span><span style="color: #0000BB">ssh2_auth_pubkey_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$connection</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'/home/username/.ssh/id_rsa.pub'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'/home/username/.ssh/id_rsa'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'secret'</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Identification&nbsp;réussie&nbsp;en&nbsp;utilisant&nbsp;une&nbsp;clé&nbsp;publique\n"</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Echec&nbsp;de&nbsp;l\'identification&nbsp;en&nbsp;utilisant&nbsp;une&nbsp;clé&nbsp;publique'</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

<div class="refsect1 notes" id="refsect1-function.ssh2-auth-pubkey-file-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    La bibliothèque libssh sous-jacente ne supporte pas très proprement les 
    authentifications partielles. C&#039;est à dire que si vous devez fournir à la 
    fois une clé publique et un mot de passe alors cela apparaitra comme si 
    la fonction est en erreur. Dans ce cas particulier, une erreur sur cet 
    appel peut juste signifier que l&#039;authentification n&#039;est pas encore terminée. 
    Vous devez ignorer cette erreur et continuer avec l&#039;appel 
    <span class="function"><a href="function.ssh2-auth-password.html" class="function">ssh2_auth_password()</a></span> pour terminer l&#039;authentification.
   </p>
  </p></blockquote>
 </div>

</div></div></div></body></html>