<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Cr&eacute;e une nouvelle entr&eacute;e pour service dans la base de donn&eacute;es SCM</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.win32-continue-service.html">« win32_continue_service</a></li>
      <li style="float: right;"><a href="function.win32-delete-service.html">win32_delete_service »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.win32service.html">Fonctions win32service</a></li>
    <li>Cr&eacute;e une nouvelle entr&eacute;e pour service dans la base de donn&eacute;es SCM</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.win32-create-service" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">win32_create_service</h1>
  <p class="verinfo">(PECL win32service &gt;=0.1.0)</p><p class="refpurpose"><span class="refname">win32_create_service</span> &mdash; <span class="dc-title">Crée une nouvelle entrée pour service dans la base de données SCM</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.win32-create-service-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>win32_create_service</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$details</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$machine</code></span>
  ] ) : <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span></div>

  <p class="para rdfs-comment">
   Tente d&#039;ajouter un service dans la base de données SCM. Des privilèges 
   d&#039;administrateur sont nécessaires pour que cela réussisse.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.win32-create-service-parameters">
  <h3 class="title">Liste de paramètres</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">details</code></dt>

     <dd>

      <p class="para">
       Un tableau des détails des services :
       <dl>

        
         <dt>
<code class="parameter">service</code></dt>

         <dd>

          <p class="para">
           Le nom court du service. C&#039;est le nom que vous utiliserez pour
           contrôler le service en utilisant la commande
           <code class="literal">net</code>. Le service doit être unique (deux services
           ne peuvent partager le même nom), et idéalement, devrait éviter
           d&#039;avoir des espaces dans son nom.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">display</code></dt>

         <dd>

          <p class="para">Le nom d&#039;affichage du service. C&#039;est le nom que vous verrez
           dans l&#039;Applet Services.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">description</code></dt>

         <dd>

          <p class="para">
           La description longue du service.
           C&#039;est la description que vous verrez dans l&#039;Applet des
           services.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">user</code></dt>

         <dd>

          <p class="para">
           Le nom de l&#039;utilisateur sous lequel vous voulez que le service
           s&#039;exécute. Si oublié, le service fonctionnera en tant que
           LocalSystem. Si le nom de l&#039;utilisateur est spécifié, vous devez
           aussi fournir un mot de passe.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">password</code></dt>

         <dd>

          <p class="para">
           Le mot de passe qui correspond à <code class="parameter">user</code>.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">path</code></dt>

         <dd>

          <p class="para">
           Le chemin complet au module exécutable qui sera démarré lorsque le
           service est démarré. Si oublié, le chemin du processus courant de
           PHP sera utilisé.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">params</code></dt>

         <dd>

          <p class="para">
           Paramètres de commande à passer au service lorsqu&#039;il démarre.
           Si vous voulez exécuter un script PHP en tant que service, alors
           le premier paramètre devrait être le chemin complet au script PHP
           que vous prévoyez exécuter. Si le nom du script ou le chemin 
           contiennent des espaces, alors, entourez le chemin complet du script
           PHP par des <code class="literal">&quot;</code>
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">load_order</code></dt>

         <dd>

          <p class="para">
           Contrôle le load_order. Cela n&#039;est pas encore complètement
           supporté.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">svc_type</code></dt>

         <dd>

          <p class="para">
           Fixe le type de service. Si oublié, la valeur par défaut est
           <strong><code>WIN32_SERVICE_WIN32_OWN_PROCESS</code></strong>. Ne changez
           pas ceci à moins que vous savez vraiment ce que vous faites.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">start_type</code></dt>

         <dd>

          <p class="para">
           Spécifie comment le service devrait être démarré. La valeur par
           défaut est <strong><code>WIN32_SERVIDE_AUTO_START</code></strong> qui
           signifie que le service sera démarré lorsque la machine démarrera.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">error_control</code></dt>

         <dd>

          <p class="para">
           Informe le SCM à propos de ce qu&#039;il devrait faire lorsqu&#039;il détecte
           un problème avec le service. La valeur par défaut est
           <strong><code>WIN32_SERVER_ERROR_IGNORE</code></strong>. Le changement de
           cette valeur n&#039;est pas encore complètement supporté.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">delayed_start</code></dt>

         <dd>

          <p class="para">
           Si <code class="parameter">delayed_start</code> est défini à
           <strong><code>TRUE</code></strong>, alors il informera le SCM que ce service doit être
           démarré après les services démarrés automatiquement et un certain
           délai.
          </p>
          <p class="para">
           N&#039;importe quel service peut être marqué comme étant un service
           retardé après le démarrage automatique ; cependant, cette configuration
           n&#039;a aucun effet tant que le paramètre <code class="parameter">start_type</code>
           du service vaut <strong><code>WIN32_SERVICE_AUTO_START</code></strong>.
          </p>
          <p class="para">
           Cette configuration n&#039;est application que sous Windows Vista et les
           serveurs Windows 2008 et suivants.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">base_priority</code></dt>

         <dd>

          <p class="para">
           Pour réduire l&#039;impacte sur l&#039;utilisation du processeur, il peut
           être nécessaire de définir une priorité plus basse qu&#039;à la normale.
          </p>
          <p class="para">
           Le paramètre <code class="parameter">base_priority</code> peut être défini à
           une des constantes définies dans les
           <a href="win32service.constants.basepriorities.html" class="link">classes de basse priorité Win32</a>.
          </p>
         </dd>

                
         <dt>
<code class="parameter">dependencies</code></dt>

         <dd>

          <p class="para">
           Pour définir les dépendances de votre service, il est nécessaire de 
           définir ce paramètre avec la liste des noms des service dans un tableau.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">recovery_delay</code></dt>

         <dd>

          <p class="para">
           Ce paramètre défini le délai entre la défaillance et l&#039;exécution de 
           l&#039;action de récupération. La valeur est en millisecondes.
          </p>
          <p class="para">
           La valeur par défaut est 60000.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">recovery_action_1</code></dt>

         <dd>

          <p class="para">
           L&#039;action qui sera exécuté lors de la première défaillance. L&#039;action 
           par défaut est <strong><code>WIN32_SC_ACTION_NONE</code></strong>.
          </p>
          <p class="para">
           Le paramètre <code class="parameter">recovery_action_1</code> peut être défini 
           avec l&#039;une des constantes définie dans les
           <a href="win32service.constants.recovery-action.html" class="link">Actions de récupération Win32</a>.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">recovery_action_2</code></dt>

         <dd>

          <p class="para">
           L&#039;action qui sera exécuté lors de la deuxième défaillance. L&#039;action 
           par défaut est <strong><code>WIN32_SC_ACTION_NONE</code></strong>.
          </p>
          <p class="para">
           Le paramètre <code class="parameter">recovery_action_2</code> peut être défini 
           avec l&#039;une des constantes définie dans les
           <a href="win32service.constants.recovery-action.html" class="link">Actions de récupération Win32</a>.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">recovery_action_3</code></dt>

         <dd>

          <p class="para">
           L&#039;action qui sera exécuté lors des défaillances suivantes. L&#039;action 
           par défaut est <strong><code>WIN32_SC_ACTION_NONE</code></strong>.
          </p>
          <p class="para">
           Le paramètre <code class="parameter">recovery_action_3</code> peut être défini 
           avec l&#039;une des constantes définie dans les
           <a href="win32service.constants.recovery-action.html" class="link">Actions de récupération Win32</a>.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">recovery_reset_period</code></dt>

         <dd>

          <p class="para">
           Le compteur des défaillance sera réinitialisé après le délai défini 
           dans ce paramètre. Le délai est exprimé en secondes.
          </p>
          <p class="para">
           La valeur par défaut est <code class="literal">86400</code>.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">recovery_enabled</code></dt>

         <dd>

          <p class="para">
           Définir ce paramètre à <strong><code>TRUE</code></strong> pour activer les options de récupération, et <strong><code>FALSE</code></strong> 
           pour les désactiver. 
          </p>
          <p class="para">
           La valeur par défaut est <strong><code>FALSE</code></strong>
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">recovery_reboot_msg</code></dt>

         <dd>

          <p class="para">
           Ajouter ce paramètre pour définir le message enregistré dans le jounal 
           d&#039;évènements Windows avant le redémarrage. Utilisé uniquement si l&#039;une 
           des actions est défini à 
           <strong><code>WIN32_SC_ACTION_REBOOT</code></strong>.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">recovery_command</code></dt>

         <dd>

          <p class="para">
           Ajouter ce paramètre pour définir la commande a exécuter lorsqu&#039;une 
           action est définie à 
           <strong><code>WIN32_SC_ACTION_RUN_COMMAND</code></strong>.
          </p>
         </dd>

        
       </dl>

      </p>
     </dd>

    
    
     <dt>
<code class="parameter">machine</code></dt>

     <dd>

      <p class="para">
       Le nom optionnel de la machine sur lequel vous voulez créer le service.
       Si oublié, cela utilisera la machine locale.
      </p>
     </dd>

    
    
    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.win32-create-service-returnvalues">
  <h3 class="title">Valeurs de retour</h3>
  <p class="para">
   Returns <strong><code>WIN32_NO_ERROR</code></strong> on success, <strong><code>FALSE</code></strong> if there is a problem with the parameters or a <a href="win32service.constants.errors.html" class="link">Win32 Error Code</a> on failure.
  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.win32-create-service-examples">
  <h3 class="title">Exemples</h3>
  <p class="para">
   <div class="example" id="example-6014">
    <p><strong>Exemple #1 Exemple avec <span class="function"><strong>win32_create_service()</strong></span></strong></p>
    <div class="example-contents"><p>
     Crée un service dont le nom court est &#039;dummyphp&#039;.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$x&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">win32_create_service</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'service'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'dummyphp'</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;le&nbsp;nom&nbsp;de&nbsp;votre&nbsp;service<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'display'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'service&nbsp;PHP&nbsp;simple&nbsp;PHP'</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;la&nbsp;description&nbsp;courte<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'description'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Ceci&nbsp;est&nbsp;un&nbsp;service&nbsp;Windows&nbsp;créé&nbsp;en&nbsp;utilisant&nbsp;PHP'</span><span style="color: #007700">,&nbsp;</span><span style="color: #FF8000">//&nbsp;la&nbsp;description&nbsp;longue<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'params'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'"'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">__FILE__&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'"&nbsp;&nbsp;run'</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;chemin&nbsp;vers&nbsp;le&nbsp;script&nbsp;ainsi&nbsp;que&nbsp;les&nbsp;paramètres<br /></span><span style="color: #007700">));<br /></span><span style="color: #0000BB">debug_zval_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$x</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-6015">
    <p><strong>Exemple #2 Un exemple <span class="function"><strong>win32_create_service()</strong></span> avec les dépendances</strong></p>
    <div class="example-contents"><p>
     Crée un service dont le nom court est &#039;dummyphp&#039; avec des dépendances.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$x&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">win32_create_service</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'service'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'dummyphp'</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Le&nbsp;nom&nbsp;du&nbsp;service<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'display'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'service&nbsp;PHP&nbsp;simple&nbsp;PHP'</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Une&nbsp;courte&nbsp;description<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'description'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Ceci&nbsp;est&nbsp;un&nbsp;service&nbsp;Windows&nbsp;créé&nbsp;en&nbsp;utilisant&nbsp;PHP.'</span><span style="color: #007700">,&nbsp;</span><span style="color: #FF8000">//&nbsp;Une&nbsp;longue&nbsp;description<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'params'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'"'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">__FILE__&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'"&nbsp;&nbsp;run'</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;chemin&nbsp;vers&nbsp;le&nbsp;script&nbsp;ainsi&nbsp;que&nbsp;les&nbsp;paramètres<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'dependencies'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"Netman"</span><span style="color: #007700">),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;La&nbsp;liste&nbsp;des&nbsp;dépendances<br /></span><span style="color: #007700">));<br /></span><span style="color: #0000BB">debug_zval_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$x</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-6016">
    <p><strong>Exemple #3 Exemple de <span class="function"><strong>win32_create_service()</strong></span> avec les options de récupération</strong></p>
    <div class="example-contents"><p>
     Crée un service dont le nom court est &#039;dummyphp&#039; avec les options de récupération.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$x&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">win32_create_service</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'service'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'dummyphp'</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Le&nbsp;nom&nbsp;du&nbsp;service<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'display'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'service&nbsp;PHP&nbsp;simple&nbsp;PHP'</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Une&nbsp;courte&nbsp;description<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'description'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Ceci&nbsp;est&nbsp;un&nbsp;service&nbsp;Windows&nbsp;créé&nbsp;en&nbsp;utilisant&nbsp;PHP.'</span><span style="color: #007700">,&nbsp;</span><span style="color: #FF8000">//&nbsp;Une&nbsp;longue&nbsp;description<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'params'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'"'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">__FILE__&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'"&nbsp;&nbsp;run'</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;chemin&nbsp;vers&nbsp;le&nbsp;script&nbsp;ainsi&nbsp;que&nbsp;les&nbsp;paramètres<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'recovery_delay'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">120000</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Les&nbsp;actions&nbsp;de&nbsp;récupération&nbsp;seront&nbsp;exécuté&nbsp;après&nbsp;2&nbsp;minutes<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'recovery_action_1'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">WIN32_SC_ACTION_RESTART</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Première&nbsp;défaillance,&nbsp;redémarrage&nbsp;du&nbsp;service<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'recovery_action_2'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">WIN32_SC_ACTION_RUN_COMMAND</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Deuxième&nbsp;défaillance,&nbsp;exécution&nbsp;d'une&nbsp;commande<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'recovery_action_3'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">WIN32_SC_ACTION_NONE</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Défaillance&nbsp;suivante,&nbsp;ne&nbsp;rien&nbsp;faire<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'recovery_reset_period'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">86400</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Réinitialiser&nbsp;le&nbsp;compteur&nbsp;des&nbsp;défaillance&nbsp;après&nbsp;1&nbsp;jour&nbsp;(86400&nbsp;minutes)<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'recovery_enabled'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Activer&nbsp;les&nbsp;options&nbsp;de&nbsp;récupération<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'recovery_reboot_msg'&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Ne&nbsp;pas&nbsp;définir&nbsp;de&nbsp;message&nbsp;de&nbsp;redémarrage,&nbsp;il&nbsp;n'est&nbsp;pas&nbsp;utile.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'recovery_command'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"c:\clean-service.bat"</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Lorsque&nbsp;l'action&nbsp;est&nbsp;WIN32_SC_ACTION_RUN_COMMAND,&nbsp;exécuter&nbsp;cette&nbsp;commande.<br /></span><span style="color: #007700">));<br /></span><span style="color: #0000BB">debug_zval_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$x</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

   </div>
  </p>
 </div>

 
 <div class="refsect1 changelog" id="refsect1-function.win32-create-service-changelog">
  <h3 class="title">Historique</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>0.4.0</td>
       <td>
        Les paramètres <code class="parameter">dependencies</code>, <code class="parameter">recovery_delay</code>,
        <code class="parameter">recovery_action_1</code>, <code class="parameter">recovery_action_2</code>,
        <code class="parameter">recovery_action_3</code>, <code class="parameter">recovery_reset_period</code>,
        <code class="parameter">recovery_enabled</code>, <code class="parameter">recovery_reboot_msg</code>
        et <code class="parameter">recovery_command</code> ont été ajoutés.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.win32-create-service-seealso">
  <h3 class="title">Voir aussi</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.win32-delete-service.html" class="function" rel="rdfs-seeAlso">win32_delete_service()</a> - Supprime une entr&eacute;e de service de la base de donn&eacute;es SCM</span></li>
    <li class="member"><a href="win32service.constants.basepriorities.html" class="link">Les classes de basse priorité Win32</a></li>
    <li class="member"><a href="win32service.constants.recovery-action.html" class="link">Les actions de récupération Win32</a></li>
    <li class="member"><a href="win32service.constants.errors.html" class="link">Les codes erreurs Win32</a></li>
   </ul>
  </p>
 </div>

 
</div></div></div></body></html>