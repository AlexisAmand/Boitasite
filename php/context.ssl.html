<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Liste des options de contexte SSL</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="context.ftp.html">« Options de contexte FTP</a></li>
      <li style="float: right;"><a href="context.curl.html">Options de contexte CURL »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="context.html">Options et param&egrave;tres de contexte</a></li>
    <li>Liste des options de contexte SSL</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="context.ssl" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Options de contexte SSL</h1>
  <p class="refpurpose"><span class="refname">Options de contexte SSL</span> &mdash; <span class="dc-title">Liste des options de contexte SSL</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-context.ssl-description">
  <h3 class="title">Description</h3>
  <p class="para">
   Options de contexte pour les protocoles <code class="literal">ssl://</code>
   et <code class="literal">tls://</code>.
  </p>
 </div>

 
 <div class="refsect1 options" id="refsect1-context.ssl-options">
  <h3 class="title">Options</h3>
  <p class="para">
   <dl>

    
     <dt id="context.ssl.peer-name">
      <code class="parameter">peer_name</code>
      <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
     </dt>

     <dd>

      <p class="para">
       Nom de paires à utiliser. Si cette valeur n&#039;est pas définie, alors le
       nom sera deviné en se basant sur le nom d&#039;hôte utilisé lors de
       l&#039;ouverture du flux.
      </p>
     </dd>

    
    
     <dt id="context.ssl.verify-peer">
      <code class="parameter">verify_peer</code>
      <span class="type"><a href="language.types.boolean.html" class="link">booléen</a></span>
     </dt>

     <dd>

      <p class="para">
       Nécessite une vérification du certificat SSL utilisé.
      </p>
      <p class="para">
       Par défaut, vaut <strong><code>TRUE</code></strong>.
      </p>
     </dd>

    
    
     <dt id="context.ssl.verify-peer-name">
      <code class="parameter">verify_peer_name</code>
      <span class="type"><a href="language.types.boolean.html" class="type boolean">boolean</a></span>
     </dt>

     <dd>

      <p class="para">
       Nécessite la vérification du nom de paires.
      </p>
      <p class="para">
       Par défaut, vaut <strong><code>TRUE</code></strong>.
      </p>
     </dd>

    
    
     <dt id="context.ssl.allow-self-signed">
      <code class="parameter">allow_self_signed</code>
      <span class="type"><a href="language.types.boolean.html" class="link">booléen</a></span>
     </dt>

     <dd>

      <p class="para">
       Permet les certificats autosignés. Requière le
       paramètre <a href="context.ssl.html#context.ssl.verify-peer" class="link"><code class="parameter">verify_peer</code></a>.
      </p>
      <p class="para">
       Par défaut, vaut <strong><code>FALSE</code></strong>
      </p>
     </dd>

    
    
     <dt id="context.ssl.cafile">
      <code class="parameter">cafile</code>
      <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
     </dt>

     <dd>

      <p class="para">
       Endroit où se trouve le fichier de l&#039;autorité du certificat
       sur le système de fichiers local et qui devra être utilisé
       avec l&#039;option de contexte <code class="literal">verify_peer</code>
       pour identifier le pair distant.
      </p>
     </dd>

    
    
     <dt id="context.ssl.capath">
      <code class="parameter">capath</code>
      <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
     </dt>

     <dd>

      <p class="para">
       Si <code class="literal">cafile</code> n&#039;est pas spécifié ou si le certificat
       n&#039;a pas été trouvé, une recherche dans le dossier pointé par
       <code class="literal">capath</code> sera effectuée afin d&#039;y trouver un certificat
       valide. <code class="literal">capath</code> doit être un dossier de certificat valide.
      </p>
     </dd>

    
    
     <dt id="context.ssl.local-cert">
      <code class="parameter">local_cert</code>
      <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
     </dt>

     <dd>

      <p class="para">
       Chemin vers le certificat local, sur le système de fichiers.
       Ce doit être un fichier encodé PEM qui contient votre certificat
       et votre clé privée. Il peut, optionnellement, contenir la
       chaîne de certification de l&#039;émetteur.
       La clé privée peut également être contenue dans un fichier distinct 
       spécifié par <code class="literal">local_pk</code>.
      </p>
     </dd>

    
    
     <dt id="context.ssl.local-pk">
      <code class="parameter">local_pk</code>
      <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
     </dt>

     <dd>

      <p class="para">
       Chemin d&#039;accès au fichier de clé privée locale sur le système de 
       fichiers dans le cas de fichiers distincts pour le certificat 
       (<code class="literal">local_cert</code>) et la clé privée.
      </p>
     </dd>

    
    
     <dt id="context.ssl.passphrase">
      <code class="parameter">passphrase</code>
      <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
     </dt>

     <dd>

      <p class="para">
       La phrase passe avec laquelle votre fichier
       <code class="literal">local_cert</code> a été encodé.
      </p>
     </dd>

    
    
     <dt id="context.ssl.cn-match">
      <code class="parameter">CN_match</code>
      <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
     </dt>

     <dd>

      <p class="para">
       Nom commun attendu. PHP effectuera un nombre limité de recherches
       sur les jokers. Si le nom commun ne correspond pas à celui-là,
       la connexion échouera.
      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       <span class="simpara">
        Cette option est obsolète en faveur de <code class="parameter">peer_name</code>,
        depuis PHP 5.6.0.
       </span>
      </p></blockquote>
     </dd>

    
    
     <dt id="context.ssl.verify-depth">
      <code class="parameter">verify_depth</code>
      <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>
     </dt>

     <dd>

      <p class="para">
       Échoue si la chaîne de certification est trop profonde.
      </p>
      <p class="para">
       Par défaut, aucune vérification.
      </p>
     </dd>

    
    
     <dt id="context.ssl.ciphers">
      <code class="parameter">ciphers</code>
      <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
     </dt>

     <dd>

      <p class="para">
       Définit la liste des chiffrements. Le format de la chaîne est décrite
       sur la page <a href="https://www.openssl.org/docs/manmaster/man1/ciphers.html#CIPHER-LIST-FORMAT" class="link external">&raquo;&nbsp;ciphers(1)</a>.
      </p>
      <p class="para">
       Par défaut, vaut <code class="literal">DEFAULT</code>.
      </p>
     </dd>

    
    
     <dt id="context.ssl.capture-peer-cert">
      <code class="parameter">capture_peer_cert</code>
      <span class="type"><a href="language.types.boolean.html" class="type boolean">boolean</a></span>
     </dt>

     <dd>

      <p class="para">
       Si définit à <strong><code>TRUE</code></strong>, un option de contexte <code class="literal">peer_certificate</code>
       sera créée, contenant le certificat de l&#039;émetteur.
      </p>
     </dd>

    
    
     <dt id="context.ssl.capture-peer-cert-chain">
      <code class="parameter">capture_peer_cert_chain</code>
      <span class="type"><a href="language.types.boolean.html" class="type boolean">boolean</a></span>
     </dt>

     <dd>

      <p class="para">
       Si définit à <strong><code>TRUE</code></strong>, une option de contexte <code class="literal">peer_certificate_chain</code>
       sera créée, contenant la chaîne de certification.
      </p>
     </dd>

    
    
     <dt id="context.ssl.sni-enabled">
      <code class="parameter">SNI_enabled</code>
      <span class="type"><a href="language.types.boolean.html" class="type boolean">boolean</a></span>
     </dt>

     <dd>

      <p class="para">
       Si vaut <strong><code>TRUE</code></strong>, l&#039;indication sur le nom du serveur sera activée.
       Le fait d&#039;activer SNI permet d&#039;utiliser plusieurs certificats
       sur la même adresse IP.
      </p>
     </dd>

    
    
     <dt id="context.ssl.sni-server-name">
      <code class="parameter">SNI_server_name</code>
      <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
     </dt>

     <dd>

      <p class="para">
       Si définie, alors cette valeur sera utilisée comme nom
       dans l&#039;indication sur le nom du serveur. Si cette valeur
       n&#039;est pas définie, alors le nom du serveur sera déduit
       par rapport au nom de l&#039;hôte utilisé lors de l&#039;ouverture
       du flux.
      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       <span class="simpara">
        Cette option est obsolète en faveur de <code class="parameter">peer_name</code>,
        depuis PHP 5.6.0.
       </span>
      </p></blockquote>
     </dd>

    
    
     <dt id="context.ssl.disable-compression">
      <code class="parameter">disable_compression</code>
      <span class="type"><a href="language.types.boolean.html" class="type boolean">boolean</a></span>
     </dt>

     <dd>

      <p class="para">
       Si défini, la compression TLS sera désactivée.
       Cela peut aider à mitiger le vecteur d&#039;attaque CRIME.
      </p>
     </dd>

    
    
     <dt id="context.ssl.peer-fingerprint">
      <code class="parameter">peer_fingerprint</code>
      <span class="type"><a href="language.types.string.html" class="type string">string</a></span> | <span class="type"><a href="language.types.array.html" class="type array">array</a></span>
     </dt>

     <dd>

      <p class="para">
       Stop lorsque le certificat digest distant ne correspond pas au hash spécifié.
      </p>
      <p class="para">
       Lorsqu&#039;une <a href="language.types.string.html" class="link">chaîne de caractères</a> est utilisée, la longueur va déterminer l&#039;algorithme
       de hashage utilisé, soit &quot;md5&quot; (32), soit &quot;sha1&quot; (40).
      </p>
      <p class="para">
       Lorsqu&#039;un <a href="language.types.array.html" class="link">tableau</a> est utilisé, la clé indique le nom de l&#039;algorithme de
       hashage, et chaque valeur correspondante représente le digest attendu.
      </p>
     </dd>

    
    
     <dt id="context.ssl.security-level">
      <code class="parameter">security_level</code>
      <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>
     </dt>

     <dd>

      <p class="para">
       Définie le niveau de sécurité. Si non spécifié le niveau de sécurité par
       défaut est utilisé.
       Les niveaux de sécurités sont décrit dans 
       <a href="https://www.openssl.org/docs/man1.1.0/man3/SSL_CTX_get_security_level.html" class="link external">&raquo;&nbsp;SSL_CTX_get_security_level(3)</a>.
      </p>
      <p class="para">
       Disponible à partir de PHP 7.2.0 et OpenSSL 1.1.0.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 
 <div class="refsect1 changelog" id="refsect1-context.ssl-changelog">
  <h3 class="title">Historique</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>7.2.0</td>
       <td>
        Ajout de <code class="parameter">security_levels</code>. Requit OpenSSL &gt;= 1.1.0.
       </td>
      </tr>

      <tr>
       <td>5.6.0</td>
       <td>
        Ajout des paramètres <code class="parameter">peer_fingerprint</code>
        et <code class="parameter">verify_peer_name</code>.
        La valeur par défaut de <code class="parameter">verify_peer</code> change en <strong><code>TRUE</code></strong>.
       </td>
      </tr>

      <tr>
       <td>5.4.13</td>
       <td>
        Ajout du paramètre <code class="parameter">disable_compression</code>.
        Requiert OpenSSL &gt;= 1.0.0.
       </td>
      </tr>

      <tr>
       <td>5.3.2</td>
       <td>
        Ajout de <code class="parameter">SNI_enabled</code> et de
        <code class="parameter">SNI_server_name</code>.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>

 
 <div class="refsect1 notes" id="refsect1-context.ssl-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    Vu que <code class="literal">ssl://</code> est un protocole sous-jacent pour
    les gestionnaires <a href="wrappers.http.html" class="link"><code class="literal">https://</code></a> et
    <a href="wrappers.ftp.html" class="link"><code class="literal">ftps://</code></a>,
    toutes les options de contexte appliquées à <code class="literal">ssl://</code>
    seront également appliquées à <code class="literal">https://</code> et <code class="literal">ftps://</code>.
   </span>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    Afin que SNI (Server Name Indication) soit disponible, PHP doit
    être compilé avec OpenSSL 0.9.8j ou supérieur. Utilisez la
    constante <strong><code>OPENSSL_TLSEXT_SERVER_NAME</code></strong> pour
    déterminer si SNI est supporté ou non.
   </span>
  </p></blockquote>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-context.ssl-seealso">
  <h3 class="title">Voir aussi</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><a href="context.socket.html" class="xref">Options de contexte des sockets</a></li>
   </ul>
  </p>
 </div>

 
</div></div></div></body></html>